["```\n#let's define our silly countupdown function\n#as a sample of a custom ttr rule\nCUD <- function(x,params=50,...) {\n\t#CUD takes the n-period sum of 1 (up days) and -1 (down days)\n\ttemp <- ifelse(runSum(ifelse(ROC(x,1,type=\"discrete\") > 0,1,-1),params)>=0,1,0)\n\t#replace NA with 0 at beginning of period\n\ttemp[is.na(temp)] <- 0\n\ttemp\n}   require(ttrTests)\nrequire(quantmod)\nrequire(lattice)\nrequire(reshape2)\nrequire(PerformanceAnalytics)   #defaults functions is overridden by ggplot2 and plyr if loaded\n#and will cause problems if you want to use ttrTests concurrently   tckrs <- c(\"GSPC\",\"RUT\",\"N225\",\"GDAXI\",\"DJUBS\")   #use 1 or GSPC but adjust however you would like\ni=1\ngetSymbols(paste(\"^\",tckrs[i],sep=\"\"),from=\"1896-01-01\",to=Sys.Date())\ntest_price <- as.vector(get(tckrs[i])[,4])   #run dataSnoop to test for luck\n#by checking all parameters across multiple bootstrap samples\n#this takes a long time, so for experimenting change bSamples to\n#something smaller than 100\n#if you are planning to use this for commercial purposes\n#make sure you see the warning in the documentation\n#on Dr. Halbert White's patent and his paper\n#http://www.ssc.wisc.edu/~bhansen/718/White2000.pdf   #don't get me started on patents of this sort   #crit can be \"sharpe\", \"return\", or \"adjust\"\n#will choose \"sharpe\" but feel free to try them all\nsnoop <- dataSnoop(x=test_price, ttr = CUD, start = 20, nSteps = 30, stepSize = 10,\n\tbSamples=100, crit=\"sharpe\",\n\trestrict = FALSE, burn = 0, short = FALSE, condition = NULL,\n\tsilent = TRUE, TC = 0.001, loud = TRUE, alpha = 0.025,\n\tbegin = 1, percent = 1, file = \"\", benchmark = \"hold\")   #make output slightly more usable with some naming\n#believe I got this right\nnames(snoop) <- c(\"details\",\"V1\",\"V2\",\n\t\"V3\",\"p1.for.l\",\"p2.for.c\",\"p3.for.u\")   #jpeg(filename=\"dataSnoop values.jpg\",\n\tquality=100,width=6.25, height = 6.25,  units=\"in\",res=96)\nplot(snoop$V3,\n\ttype=\"l\", col=2,\n\tmain=\"ttrTests dataSnoop V1,V2,and V3 on CUD\",\n\txlab=\"Bootstrap Sample\", ylab=\"Values\")\npoints(snoop$V2, type=\"l\", col=3)\npoints(snoop$V1, col=4)\nlegend(\"topright\",legend=c(\"V1\",\"V2\",\"V3\"),col=c(4,3,2),pch=19,lty=1)\n#dev.off()\n```"]