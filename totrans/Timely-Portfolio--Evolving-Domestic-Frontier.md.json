["```\nrequire(quantmod)\nrequire(fPortfolio)\nrequire(reshape)   #############################################################\n#get data; unfortunately cannot share since I would violate\n#copyright\nsp_agg <- read.csv(\"C:\\\\Users\\\\Kent.TLEAVELL_NT\\\\Documents\\\\old\\\\R\\\\sp_agg.csv\",stringsAsFactors=FALSE)\nsp_agg <- sp_agg[2:NROW(sp_agg),3:NCOL(sp_agg)]\nsp_agg <- sp_agg[,c(1,3,5)]   len <- nchar(sp_agg[,1])\nxtsdate <- paste(substr(sp_agg[,1],len-3,len),\"-\",\n\tifelse(len==9,\"0\",\"\"),substr(sp_agg[,1],1,len-8),\"-01\",sep=\"\")   sp_agg.xts <- xts(data.matrix(sp_agg[,2:NCOL(sp_agg)]),order.by=as.Date(xtsdate))\nsp_agg.xts <- sp_agg.xts/100\n#############################################################     #for svg\n#require(Cairo)\n#CairoSVG(\"frontier.svg\", width=8 ,height=8 )\n#jpeg(filename=\"evolving frontier.jpg\",\n#\tquality=100,width=6, height = 7.5,  units=\"in\",res=96)#############################################################\n## spec -\n   Spec = portfolioSpec()\n   setTargetReturn(Spec) = mean(colMeans(as.timeSeries(sp_agg.xts)))   ## constraints -\n   Constraints = \"LongOnly\"\n#get frontiers by 5-year range\nfrom = time(as.timeSeries(sp_agg.xts))[c(1,1,49,109,169,229,289,349,385)]\nto = time(as.timeSeries(sp_agg.xts))[c(NROW(sp_agg.xts),48,108,168,228,288,348,NROW(sp_agg.xts)-8,NROW(sp_agg.xts)-8)]   rollFron <- rollingPortfolioFrontier(as.timeSeries(sp_agg.xts),Spec,Constraints,\n\tfrom=from,to=to)   #chartcol <- topo.colors(length(rollFron))\nchartcol <- 1:length(rollFron)\n#hindsight bias; yellow is too hard to read so change\nchartcol[length(rollFron)-2] <- \"goldenrod\"     i=1\nfrontierPlot(rollFron[[1]],col=rep(chartcol[1],2),xlim=c(0,0.08),ylim=c(-0.01,0.025))\nfrontierlabels <- frontierPoints(rollFron[[i]])\ntext(x=frontierlabels[NROW(frontierlabels),1],y=frontierlabels[NROW(frontierlabels),2],\n\tlabels=paste(from[i],\" to \",to[i],sep=\"\"),\n\tpos=4,offset=0.5,cex=0.5,col = chartcol[i])   for (i in 2:(length(rollFron)-3) ) {\n\tfrontierPlot(rollFron[[i]],add=TRUE,col = rep(chartcol[i],2),pch=19,auto=FALSE,\n\t\ttitle=FALSE)\n\tfrontierlabels <- frontierPoints(rollFron[[i]])\n\ttext(x=frontierlabels[NROW(frontierlabels),1],y=frontierlabels[NROW(frontierlabels),2],\n\t\tlabels=paste(from[i],\" to \",to[i],sep=\"\"),\n\t\tpos=4,offset=0.5,cex=0.5,col = chartcol[i])\n}   i=7\nlowerFrontier = frontierPoints(rollFron[[i]], frontier = \"both\")\npoints(lowerFrontier,col = rep(chartcol[i],2),pch=19)\nfrontierlabels <- frontierPoints(rollFron[[i]])\ntext(x=frontierlabels[1,1],y=frontierlabels[1,2],\n\tlabels=paste(from[i],\" to \",to[i],sep=\"\"),\n\tpos=4,offset=0.5,cex=0.5,col = chartcol[i])     #legend(\"topright\",legend=paste(from,to,sep=\" \"),pch=19,\n#\tcol=chartcol,cex=0.7)\nfor (i in 8:length(rollFron)) {\n\tlowerFrontier = frontierPoints(rollFron[[i]], frontier = \"lower\")\n\tpoints(lowerFrontier,col = rep(chartcol[i],2),pch=19)\n\tfrontierlabels <- frontierPoints(rollFron[[i]],frontier=\"lower\")\n\ttext(x=frontierlabels[1,1],y=frontierlabels[1,2],\n\t\tlabels=paste(from[i],\" to \",to[i],sep=\"\"),\n\t\tpos=4,offset=0.5,cex=0.5,col = chartcol[i])\n}\n#\n#frontier <- portfolioFrontier(as.timeSeries(sp_agg.xts))\n#frontierPlot(frontier,col=rep(chartcol[length(rollFron)+1],2),add=TRUE,pch=19,auto=FALSE,\n#\t\ttitle=FALSE)   #dev.off()\n```"]