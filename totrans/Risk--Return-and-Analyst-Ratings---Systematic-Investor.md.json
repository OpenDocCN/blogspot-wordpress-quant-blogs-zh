["```\n\n# load Systematic Investor Toolbox\nsetInternet2(TRUE)\nsource(gzcon(url('https://github.com/systematicinvestor/SIT/raw/master/sit.gz', 'rb')))\n\nload.packages('quantmod,car')\n\n```", "```\n\n# download Dow Jones Components\nurl = 'http://finance.yahoo.com/q/cp?s=^DJI+Components'\ntxt = join(readLines(url))\n\n# extract table from this page\ntemp = extract.table.from.webpage(txt, 'Symbol', hasHeader = T)\n\n# Symbols\nSymbols = temp[, 'Symbol']\n\n```", "```\n\n# Matrix with number of Upgrades/Downgrades in 2010:2011\nup.down.stats = matrix( NA, nrow = len(Symbols), ncol = 3 )\n\trownames(up.down.stats) = Symbols\n\tcolnames(up.down.stats) = spl('N,Return,Risk')\n\n# Get Upgrade/Downgrade statistics and compute Risk and Return for each symbol\nfor( Symbol in Symbols ) {\n\tcat('Downloading', Symbol, '\\n')\n\n\t# download Upgrade/Downgrade table\n\turl = paste('http://finance.yahoo.com/q/ud?s=', Symbol, sep = '')\n\ttxt = join(readLines(url))\n\n\t# extract table from this page\n\ttemp = extract.table.from.webpage(txt, 'Research Firm', hasHeader = T)\n\n\t# find number of Upgrades/Downgrades in 2010:2011\n\tevent.year = format(as.Date(temp[, 'Date'], '%d-%b-%y'), '%Y')\n\tup.down.stats[Symbol, 'N'] = sum(event.year == '2010' | event.year == '2011')\n\n\t# download price history from Yahoo\n\tdata = getSymbols(Symbol, from = '1980-01-01', auto.assign = FALSE)\n\treturns = ROC(Cl(data['2010::2011']), type = 'discrete')\n\t\treturns = na.omit(returns)\n\n\t# compute basic measures of Return and Risk\n\tup.down.stats[Symbol, 'Return'] = 252 * mean(returns)\n\tup.down.stats[Symbol, 'Risk'] = sqrt(252) * sd(returns)\n}\n\n```", "```\n\n# sort up.down.stats by number of events\nup.down.stats = up.down.stats[ order(up.down.stats[,'N']), , drop = FALSE]\nup.down.stats[, spl('Return,Risk')] = round(100 * up.down.stats[, spl('Return,Risk')], 1)\n\n# plot table\nplot.table(up.down.stats)\n\n# barplot of Number of Upgrades & Downgrades in 2010:2011\npar(mar = c(5,4,2,1), cex = 0.8)\nbarplot( up.down.stats[, 'N'],\n\txlab = 'Symbols', ylab = 'Number of Upgrades & Downgrades in 2010:2011',\n\tmain = 'Upgrades & Downgrades in 2010:2011 from Yahoo Finance',\n\tnames.arg = rownames(up.down.stats), las = 2 )\n\n```", "```\n\n# run linear regression and compute correlation between number of events and Returns / Risk\nfor( measure in spl('Risk,Return') ) {\n\tx = up.down.stats[, 'N']\n\ty = up.down.stats[, measure]\n\n\t# linear regression\n\tfit = lm(y ~ x)\n\tprint(summary(fit))\n\n\tpar(mar = c(5,4,2,1))\n\tplot(x, y, xlab = 'Number of of Upgrades & Downgrades', ylab = measure,\n\t\tmain = paste(plota.format(100 * cor(x,y), 0, '', '%') , 'correlation between', measure, 'and Number of Events'))\n\t\tgrid()\n\t\ttext(x, y, rownames(up.down.stats), col = 'blue', adj = c(1,1), cex = 0.8)\n\t\tabline(coef = coef(fit), lty=2)\n\n\t# compute ellipsoid at 50% confidence level\n\td = dataEllipse(x, y, levels = c(0.5), draw = FALSE)\n\tlines(d, col='red', lty=3)\n}\n\n```", "```\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)\n(Intercept)  20.1766     2.3879   8.449 3.45e-09 ***\nx             0.6589     0.3022   2.180   0.0378 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nMultiple R-squared: 0.1451,     Adjusted R-squared: 0.1146\nF-statistic: 4.753 on 1 and 28 DF,  p-value: 0.0378\n```", "```\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)\n(Intercept)  14.5098     4.5533   3.187  0.00352 **\nx            -1.6238     0.5763  -2.818  0.00877 **\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nMultiple R-squared: 0.2209,     Adjusted R-squared: 0.1931\nF-statistic:  7.94 on 1 and 28 DF,  p-value: 0.008769\n```"]