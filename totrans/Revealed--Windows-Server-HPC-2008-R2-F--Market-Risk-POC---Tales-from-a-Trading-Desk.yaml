- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: æœªåˆ†ç±»'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: ç±»åˆ«ï¼šæœªåˆ†ç±»
- en: 'date: 2024-05-18 06:13:44'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¥æœŸï¼š2024-05-18 06:13:44
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: 'Revealed: Windows Server HPC 2008 R2 F# Market Risk POC | Tales from a Trading
    Desk'
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ­ç¤ºï¼šWindows Server HPC 2008 R2 F#å¸‚åœºé£é™©POC | äº¤æ˜“æ¡Œä¸Šçš„æ•…äº‹
- en: æ¥æºï¼š[https://mdavey.wordpress.com/2010/04/29/revealed-windows-server-hpc-2008-r2-f-market-risk-poc/#0001-01-01](https://mdavey.wordpress.com/2010/04/29/revealed-windows-server-hpc-2008-r2-f-market-risk-poc/#0001-01-01)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¥æºï¼š[https://mdavey.wordpress.com/2010/04/29/revealed-windows-server-hpc-2008-r2-f-market-risk-poc/#0001-01-01](https://mdavey.wordpress.com/2010/04/29/revealed-windows-server-hpc-2008-r2-f-market-risk-poc/#0001-01-01)
- en: So here in all its glory is my latest Proof Of Concept (POC). Leveraging everything
    I have blogged about previously, itâ€™s time to see if we can move from the Excel
    [Runner](http://www.theregister.co.uk/2010/04/07/microsoft_hpc_server_r2_beta_2/)HPC
    world ğŸ˜‰ The diagram below essentially provide a high level architecture of what
    I hope will provide a useful guide to leveraging Windows Server 2008 HPC to calculate
    Market Risk.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥ï¼Œä»¥ä¸‹æ˜¯æˆ‘æœ€æ–°çš„æ¦‚å¿µéªŒè¯ï¼ˆPOCï¼‰çš„å…¨éƒ¨è£è€€ã€‚åˆ©ç”¨æˆ‘ä¹‹å‰åšå®¢ä¸­æåˆ°çš„æ‰€æœ‰å†…å®¹ï¼Œæ˜¯æ—¶å€™çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦èƒ½å¤Ÿä»Excel [Runner](http://www.theregister.co.uk/2010/04/07/microsoft_hpc_server_r2_beta_2/)HPCä¸–ç•Œè¿ˆå‡ºæ­¥ä¼äº†ã€‚ä¸‹é¢çš„å›¾è¡¨åŸºæœ¬ä¸Šæä¾›äº†ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¶æ„ï¼Œæˆ‘å¸Œæœ›å®ƒèƒ½æä¾›åˆ©ç”¨Windows
    Server 2008 HPCè®¡ç®—å¸‚åœºé£é™©çš„æœ‰ç”¨æŒ‡å—ã€‚
- en: Taking a feed from my simulated market (and the Market Strategy Engine POC)
    the trades will be submitted to the HPC cluster, where the F# cashflow/PV code
    I blogged about a few months ago will run as a service, crunching the trades,
    and generating PV numbers. Obviously to calculate the cashflows I need appropriate
    market data and curves. For this initial POC, Iâ€™ll pre-populate AppFabric caching
    with this data, and pass the velocity object keys to the HPC SOA with the trade
    data. A further POC will look at snapping this data, and updating Velocity at
    specific intervals, hence forcing portfolio recalculations â€“ real world scenario.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ä»æˆ‘æ¨¡æ‹Ÿçš„å¸‚åœºï¼ˆä»¥åŠå¸‚åœºç­–ç•¥å¼•æ“POCï¼‰è·å–æ•°æ®ï¼Œäº¤æ˜“å°†æäº¤åˆ°HPCé›†ç¾¤ï¼Œå…¶ä¸­æˆ‘å‡ ä¸ªæœˆå‰åšå®¢ä¸­æåˆ°çš„F#ç°é‡‘æµ/ç°å€¼ä»£ç å°†ä½œä¸ºæœåŠ¡è¿è¡Œï¼Œå¤„ç†äº¤æ˜“å¹¶ç”Ÿæˆç°å€¼æ•°å­—ã€‚æ˜¾ç„¶ï¼Œä¸ºäº†è®¡ç®—ç°é‡‘æµï¼Œæˆ‘éœ€è¦é€‚å½“çš„å¸‚åœºæ•°æ®å’Œæ›²çº¿ã€‚å¯¹äºè¿™ä¸ªæœ€åˆçš„POCï¼Œæˆ‘å°†é¢„å…ˆå°†AppFabricç¼“å­˜å¡«å……è¿™äº›æ•°æ®ï¼Œå¹¶å°†é€Ÿåº¦å¯¹è±¡é”®ä¸äº¤æ˜“æ•°æ®ä¸€èµ·ä¼ é€’ç»™HPC
    SOAã€‚è¿›ä¸€æ­¥çš„POCå°†ç ”ç©¶å®šæ—¶æ›´æ–°è¿™äº›æ•°æ®ï¼Œå¹¶åœ¨ç‰¹å®šé—´éš”å†…æ›´æ–°Velocityï¼Œä»è€Œå¼ºåˆ¶é‡æ–°è®¡ç®—æŠ•èµ„ç»„åˆâ€”â€”ç°å®ä¸–ç•Œåœºæ™¯ã€‚
- en: The need for the HPC custom broker has been discussed in a previous posting,
    so I wonâ€™t re-iterate again. Likewise, the design of the Real-Time Cube (RTC).
    The VelocityClient on each HPC node is however important to discuss.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« å·²ç»è®¨è®ºè¿‡éœ€è¦HPCè‡ªå®šä¹‰ç»çºªäººçš„åŸå› ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šå†é‡å¤ã€‚åŒæ ·ï¼Œå®æ—¶ç«‹æ–¹ä½“ï¼ˆRTCï¼‰çš„è®¾è®¡ã€‚ç„¶è€Œï¼Œæ¯ä¸ªHPCèŠ‚ç‚¹ä¸Šçš„VelocityClientå¾ˆé‡è¦ï¼Œéœ€è¦è®¨è®ºã€‚
- en: The HPC cluster needs to be party stateless, and partly stateful. This is driven
    by the need to reduce the amount of data sent around the LAN coupled with the
    type of Market Risk processing that will be undertaken. Stateless is probably
    more common on a cluster, since the process running the job/service will usually
    be ripped down on completion. Even if the process isnâ€™t ripped down, one has to
    cater for the instance where the process crashes for some reason. Hence in stateless
    clusters, all data is shipped to each node, each time, but this is expensive.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: é›†ç¾¤éœ€è¦éƒ¨åˆ†æ— çŠ¶æ€å’Œéƒ¨åˆ†æœ‰çŠ¶æ€ã€‚è¿™æ˜¯ä¸ºäº†å‡å°‘åœ¨å±€åŸŸç½‘ä¸­ä¼ è¾“çš„æ•°æ®é‡ï¼Œç»“åˆå°†è¿›è¡Œçš„å¸‚åœºé£é™©å¤„ç†ç±»å‹ã€‚åœ¨é›†ç¾¤ä¸Šæ— çŠ¶æ€å¯èƒ½æ›´å¸¸è§ï¼Œå› ä¸ºè¿è¡Œä½œä¸š/æœåŠ¡çš„è¿›ç¨‹é€šå¸¸åœ¨å®Œæˆåä¼šè¢«å…³é—­ã€‚å³ä½¿è¿›ç¨‹æ²¡æœ‰å…³é—­ï¼Œä¹Ÿå¿…é¡»è€ƒè™‘åˆ°è¿›ç¨‹å› æŸç§åŸå› å´©æºƒçš„æƒ…å†µã€‚å› æ­¤ï¼Œåœ¨æ— çŠ¶æ€é›†ç¾¤ä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šå‘é€åˆ°æ¯ä¸ªèŠ‚ç‚¹ï¼Œæ¯æ¬¡éƒ½å‘é€ï¼Œä½†è¿™ä»£ä»·æ˜‚è´µã€‚
- en: The reason we need stateful nodes is when we move into the world of snapping
    market data/curves, and re-calculating portfolios. Given that we have snapped,
    we know that for x trades/positions/portfolios, certain data will be identical.
    Hence to reduce the expense of sending data, and improving performance, Iâ€™m planning
    to run a [VelocityClient](http://msdn.microsoft.com/en-us/magazine/dd861287.aspx)
    Windows Service on the Market Risk nodes. This Windows Service would do exactly
    what the service name implies, act as a node VelocityCache, drawing down certain
    a specific set (probably by currency) of market data/curves to nodes for a duration,
    and then flushing the service. The VelocityCache could be done away with if we
    kept the node service process (F#) running indefinitely, but as I said earlier
    this doesnâ€™t cater for the process crashing, which could happen :(. Obviously
    not all nodes will cache the same market data/curves â€“ as discussed in a previous
    posting.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éœ€è¦æœ‰çŠ¶æ€çš„èŠ‚ç‚¹çš„åŸå› æ˜¯å½“æˆ‘ä»¬è¿›å…¥æ•æ‰å¸‚åœºæ•°æ®/æ›²çº¿çš„é¢†åŸŸï¼Œä»¥åŠé‡æ–°è®¡ç®—æŠ•èµ„ç»„åˆæ—¶ã€‚è€ƒè™‘åˆ°æˆ‘ä»¬å·²ç»æ•æ‰åˆ°äº†æ•°æ®ï¼Œæˆ‘ä»¬çŸ¥é“å¯¹äºxä¸ªäº¤æ˜“/å¤´å¯¸/æŠ•èµ„ç»„åˆï¼ŒæŸäº›æ•°æ®å°†ä¼šæ˜¯ç›¸åŒçš„ã€‚å› æ­¤ï¼Œä¸ºäº†å‡å°‘æ•°æ®ä¼ è¾“çš„å¼€é”€ï¼Œæé«˜æ€§èƒ½ï¼Œæˆ‘è®¡åˆ’åœ¨å¸‚åœºé£é™©èŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ª[VelocityClient](http://msdn.microsoft.com/en-us/magazine/dd861287.aspx)
    WindowsæœåŠ¡ã€‚è¿™ä¸ªWindowsæœåŠ¡å°†åšä¸æœåŠ¡åç§°å®Œå…¨ç›¸ç¬¦çš„äº‹æƒ…ï¼Œä½œä¸ºä¸€ä¸ªèŠ‚ç‚¹çš„VelocityCacheï¼Œæ‹‰å–ç‰¹å®šçš„ä¸€ç»„ï¼ˆå¯èƒ½æŒ‰è´§å¸åˆ’åˆ†ï¼‰çš„å¸‚åœºæ•°æ®/æ›²çº¿åˆ°èŠ‚ç‚¹ä¸ŠæŒç»­ä¸€æ®µæ—¶é—´ï¼Œç„¶ååˆ·æ–°æœåŠ¡ã€‚å¦‚æœæˆ‘ä»¬å°†èŠ‚ç‚¹æœåŠ¡è¿›ç¨‹ï¼ˆF#ï¼‰æ— é™æœŸåœ°è¿è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åºŸé™¤VelocityCacheï¼Œä½†æ˜¯å¦‚æˆ‘ä¹‹å‰æ‰€è¯´ï¼Œè¿™ä¸èƒ½åº”å¯¹è¿›ç¨‹å´©æºƒçš„æƒ…å†µï¼Œè¿™æ˜¯å¯èƒ½å‘ç”Ÿçš„
    :(ã€‚æ˜¾ç„¶ï¼Œå¹¶éæ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šç¼“å­˜ç›¸åŒçš„å¸‚åœºæ•°æ®/æ›²çº¿â€”â€”å¦‚ä¹‹å‰çš„å¸–å­æ‰€è®¨è®ºçš„ã€‚
- en: The data coming out of the HPC cluster will be used to populate the RTC (previous
    POC), which also leverages Windows Server AppFabric caching, and hence provide
    cache notifications which via a streaming server (Nirvana in the case of this
    POC) update a Silverlight 4 RIA in real-time.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: ä»é«˜æ€§èƒ½è®¡ç®—ï¼ˆHPCï¼‰é›†ç¾¤ä¸­è¾“å‡ºçš„æ•°æ®å°†è¢«ç”¨æ¥å¡«å……å®æ—¶é€šè®¯ï¼ˆRTCï¼Œä¹‹å‰çš„POCï¼‰ï¼Œå®ƒä¹Ÿåˆ©ç”¨äº†Windows Server AppFabricçš„ç¼“å­˜ï¼Œä»è€Œæä¾›ç¼“å­˜é€šçŸ¥ï¼Œé€šè¿‡æµæœåŠ¡å™¨ï¼ˆåœ¨è¿™ä¸ªPOCä¸­æ˜¯Nirvanaï¼‰å®æ—¶æ›´æ–°Silverlight
    4 RIAã€‚
- en: Iâ€™m sure there are flaw in this HPC design, but for the moment it appear viable,
    and worthy of a POC. Obviously I have a few other interesting idea up my sleeve
    post this POC, some of them are unfortunately dependant on Microsoft giving me
    access to some new technology ğŸ˜‰
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ç¡®ä¿¡è¿™ä¸ªHPCè®¾è®¡ä¸­æœ‰ç¼ºé™·ï¼Œä½†ç›®å‰çœ‹æ¥æ˜¯å¯è¡Œçš„ï¼Œå€¼å¾—åšä¸€ä¸ªPOCã€‚æ˜¾ç„¶ï¼Œåœ¨å®Œæˆè¿™ä¸ªPOCåï¼Œæˆ‘è¿˜æœ‰å…¶ä»–ä¸€äº›æœ‰è¶£çš„æƒ³æ³•ï¼Œå…¶ä¸­ä¸€äº›ä¸å¹¸çš„æ˜¯ä¾èµ–äºå¾®è½¯è®©æˆ‘æ¥è§¦ä¸€äº›æ–°æŠ€æœ¯
    ğŸ˜‰
- en: '[![](img/91237db29f5d0a98010207f34d6d2fe4.png "HPC")](https://mdavey.wordpress.com/wp-content/uploads/2010/04/hpc.jpg)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '![HPC](https://mdavey.wordpress.com/wp-content/uploads/2010/04/hpc.jpg)'
- en: ~ by mdavey on April 29, 2010.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: ~ mdaveyäº2010å¹´4æœˆ29æ—¥ã€‚
- en: Posted in [CEP](https://mdavey.wordpress.com/category/hpc/cep/), [HPC](https://mdavey.wordpress.com/category/hpc/)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å‘å¸ƒåœ¨[CEP](https://mdavey.wordpress.com/category/hpc/cep/)ï¼Œ[HPC](https://mdavey.wordpress.com/category/hpc/)
- en: 'Tags: [MarketRisk](https://mdavey.wordpress.com/tag/marketrisk/), [Microsoft](https://mdavey.wordpress.com/tag/microsoft/)'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡ç­¾ï¼š[å¸‚åœºé£é™©](https://mdavey.wordpress.com/tag/marketrisk/)ï¼Œ[å¾®è½¯](https://mdavey.wordpress.com/tag/microsoft/)
