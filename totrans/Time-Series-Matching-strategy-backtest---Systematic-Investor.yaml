- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-18 14:43:31'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: Time Series Matching strategy backtest | Systematic Investor
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://systematicinvestor.wordpress.com/2012/01/17/time-series-matching-strategy-backtest/#0001-01-01](https://systematicinvestor.wordpress.com/2012/01/17/time-series-matching-strategy-backtest/#0001-01-01)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This is a quick post to address comments raised in the [Time Series Matching](https://systematicinvestor.wordpress.com/2012/01/13/time-series-matching/)
    post. I will show a very simple example of backtesting a Time Series Matching
    strategy using a distance weighted prediction. I have to warn you, the strategy’s
    performance is worse then the Buy and Hold.
  prefs: []
  type: TYPE_NORMAL
- en: 'I used the code from [Time Series Matching](https://systematicinvestor.wordpress.com/2012/01/13/time-series-matching/)
    post and re-arranged it into 3 functions:'
  prefs: []
  type: TYPE_NORMAL
- en: bt.matching.find – finds historical matches similar to the given query (pattern).
  prefs: []
  type: TYPE_NORMAL
- en: bt.matching.overlay – creates matrix that overlays all matches one on top of
    each other.
  prefs: []
  type: TYPE_NORMAL
- en: bt.matching.overlay.table – creates and plots matches summary table.
  prefs: []
  type: TYPE_NORMAL
- en: I will use historical prices for [^GSPC](http://finance.yahoo.com/q?s=%5Egspc)
    to extend [SPY](http://finance.yahoo.com/q?s=spy) time series. I will create a
    monthly backtest, that trades at the end of the month, staring January 1994\.
    Each month, I will look back for the best historical matches similar to the last
    90 days in the last 10 years of history.
  prefs: []
  type: TYPE_NORMAL
- en: I will compute a distance weighted average prediction for the next month and
    will go long if prediction is positive, otherwise stay in cash. This is a very
    simple backtest and the strategy’s performance is worse then the Buy and Hold.
  prefs: []
  type: TYPE_NORMAL
- en: 'Following code loads historical prices from Yahoo Fiance and setups Time Series
    Matching strategy backtest using the [Systematic Investor Toolbox](https://systematicinvestor.wordpress.com/systematic-investor-toolbox/):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Next, let’s compare the Time Series Matching strategy to Buy & Hold:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '[![](img/1da7d3e51d2a6e95778ed8429001e4ca.png "plot1.png.small")](https://systematicinvestor.wordpress.com/wp-content/uploads/2012/01/plot1-small2.png)'
  prefs: []
  type: TYPE_NORMAL
- en: How would you change the strategy or backtest to make it profitable? Please
    share your ideas. I looking forward to exploring them.
  prefs: []
  type: TYPE_NORMAL
- en: To view the complete source code for this example, please have a look at the
    [bt.matching.backtest.test() function in bt.test.r at github](https://github.com/systematicinvestor/SIT/blob/master/R/bt.test.r).
  prefs: []
  type: TYPE_NORMAL
