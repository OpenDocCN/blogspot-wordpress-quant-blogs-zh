- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: 注释
- en: 'category: 未分类'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 'category: 未分类'
- en: 'date: 2024-05-18 14:25:13'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 'date: 2024-05-18 14:25:13'
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '---------'
- en: Good Knight – Sniper In Mahwah & friends
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 良好的骑士 - 马瓦和朋友
- en: 来源：[https://sniperinmahwah.wordpress.com/2013/11/02/good-knight/#0001-01-01](https://sniperinmahwah.wordpress.com/2013/11/02/good-knight/#0001-01-01)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 来源：[https://sniperinmahwah.wordpress.com/2013/11/02/good-knight/#0001-01-01](https://sniperinmahwah.wordpress.com/2013/11/02/good-knight/#0001-01-01)
- en: Contrairement à ce que le silence de ce blog laisse penser, nous sommes revenus
    de vacances il y a bien longtemps déjà – il est tout simplement compliqué et chronophage
    d’écrire un livre tout en écrivant parallèlement des billets sur des sujets aussi
    (parfois) retors que les transactions à haute fréquences. Pour fêter notre retour
    numérique, voilà un bref compte rendu de la [condamnation](http://www.sec.gov/litigation/admin/2013/34-70694.pdf) de
    Knight Capital par la SEC suite au dysfonctionnement qu’a connu le *market maker*
    le 1er août 2012, qui lui a fait perdre 461 millions de dollars en 40 minutes.
    L’événement avait (légitimement) fait beaucoup coulé beaucoup d’encre à l’époque,
    et les raisons de la condamnation de Knight (à 12 millions de dollars d’amende)
    sont particulièrement intéressantes, en ce sens qu’elles sont à la fois complètement
    en lien avec les hautes fréquences… et dans le même temps pas du tout.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 与这个博客的沉默相反，我们已经很久以前就结束了假期——在同时撰写有关高频交易等（有时）棘手主题的博客的情况下撰写一本书是非常复杂和耗时的。为了庆祝我们的数字回归，这里是关于[判决](http://www.sec.gov/litigation/admin/2013/34-70694.pdf)
    Knight资本因2012年8月1日市场做市商断路事件导致在40分钟内损失4.61亿美元而被SEC处罚1200万美元的简要报告。这一事件在当时引起了很大的轰动，Knight被处罚的原因尤其有趣，因为它既完全与高频交易有关...又完全不是。
- en: '**Retail Liquidity Program (Nyse)**'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '**零售流动性计划（纽交所）**'
- en: 'Ce 1er août 2012, le New York Stock Exchange mettait en route un nouveau programme
    intitulé Retail Liquidity Program (RPL). Fruit de deux ans de discussions serrées
    avec la SEC – d’après un responsable du NYSE –, l’objectif du RPL était de permettre
    aux particuliers d’avoir des meilleurs prix de cotation/transaction que ceux apparaissant
    dans le carnet d’ordre central des plateformes du NYSE (Nyse ou Nyse-Arca). Les
    deux ans de discussion avec le régulateur américain s’expliquent par l’aspect
    controversé du programme : en proposant un prix différent de ceux des marchés
    dits « éclairés » (les 13 plateformes de négociations américaines), ce programme
    destiné aux particuliers (et non aux *market makers*) était dès le début critiqué
    du fait de sa forte ressemblance avec les « dark pools », ces « bourses de l’ombre
    » (au nombre d’une cinquantaine aux Etats-Unis) qui désignent un ensemble de plateformes
    où les transactions sont complètement anonymes et les prix non publics – ces dark
    pools peuvent prendre la forme de plateformes comme Sigma-X (Goldman Sachs) ou
    Crossfinder (Crédit Suisse), mais aussi d’internalisateurs, i.e. des plateformes
    internes aux banques ou aux *market makers *qui apparient les ordres de leurs
    client en interne plutôt que de les faire router vers les 13 marchés éclairés
    américains… ou d’autres dark pools.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 2012年8月1日，纽约证券交易所启动了一个名为零售流动性计划（RPL）的新计划。根据纽交所的一位负责人的说法，RPL经过与SEC两年的激烈讨论，其目标是允许个人获得比纽交所平台中心订单簿中所显示的更好的报价/交易价格。与美国13个交易平台（Nyse或Nyse-Arca）的讨论持续了两年，这是因为该计划颇具争议性：通过提供与“明智市场”（美国的13个交易平台）不同的价格，这个面向个人而非做市商的计划自始至终都受到了批评，因为它与“暗池”（美国约50个交易平台）极为相似，这些“暗池”指的是一系列完全匿名的交易平台和非公开的价格
    — 这些暗池可以是高盛的Sigma-X或瑞士信贷的Crossfinder等交易平台，也可以是内部化者，即银行或做市商内部的交易平台，他们在内部匹配客户订单而不是将其路由到美国13个明智市场...或其他暗池。
- en: Passons sur la controverse qui entoure chaque jour davantage les dark pools
    – de plus en plus de transactions ont lieu dans ces bourses de l’ombre, ce qui
    inquiète à la fois les régulateurs… et les marchés éclairés car les dark pools
    sont des concurrents directs des marchés traditionnels, qui voient ainsi leur
    flux diminuer –, pour simplement préciser que le PDG de NYSE, Duncan Niederauer,
    s’était montré assez virulent contre ces concurrents de l’ombre, ce que n’ont
    pas manqué de rappeler les opposants au Retail Liquidity Program. En avalisant
    le RLP, la SEC a autorisé une dérogation à la règle dite du *sub-penny rule* (intégrée
    dans Reg NMS), qui interdit à une place boursière de recevoir des ordres au-delà
    d’1 dollar de plus ou de moins que la cotation du moment, et en-deça d’un centime
    de dollars. Concrètement, un titre cotée à 20,50 dollars ne peut donner lieu à
    une transaction qu’entre 19,50 dollars et 21,50 dollars *a minima*, ou entre 20,49
    et 20,51 dollars *a maxima*. Reg NMS interdit donc le pas de cotation (*tick*)
    en dessous d’1 *cent*. Grâce à cette exception accordée par la SEC, le RLP du
    NYSE est autorisé à ramener le pas de cotation à 1 centième de dollar, ce qui
    affine le prix – l’action à 20,50 dollars peut ainsi être achetée ou vendue à
    20,4999 ou 20,5001 dollars, une fourchette bien plus précise que celle permise
    dans le carnet d’ordre « standard » des plateformes.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们暂且不谈每天都愈发争议的“暗池”——越来越多的交易发生在这些暗池中，这既令监管机构担忧……也令开放市场担忧，因为暗池是传统市场的直接竞争者，导致它们的流量下降——，只需明确指出NYSE的CEO邓肯·尼德罗在暗池对手上表现得相当激烈
    ，这点不乏反对“零售流动性计划”的人揭示。通过批准RLP，SEC允许了所谓的*亚分规则*（纳入Reg NMS）的例外规定，该规则禁止证券交易场所接受超过或低于当前报价1美元以上或以下1美分的订单。在具体上
    ，一支报价为20.50美元的股票只能交易在19.50美元至21.50美元之间*最低*，或20.49美元至20.51美元*最高*。因此，Reg NMS禁止*一美分*以下的步进。通过SEC允许的这个例外，NYSE的RLP被授权将步进改为1美分，从而提高了价格——20.50美元的股票可以以20.4999或20.5001美元买入或卖出，这个范围比交易平台“标准”的订单簿更精确。
- en: 'Cette « discrétisation » du prix (ou *discret* doit être entendu au sens scientifique
    du terme) est un vaste sujet si on la replace dans l’histoire de l’arrivée des
    machines au sein des marchés financiers (nous sommes loin du temps où, dans les
    années 1990, le pas de cotation était d’un huitième de dollar : pour une action
    cotée à 20,50 dollars, il était impossible de faire une offre entre 20,25  et
    20,50 dollars, ou entre 20,50 et 20,75 dollars). Le Retail Liquidity Program,
    d’après le NYSE, devait être capable d’offrir des prix améliorés de 1,4 centimes
    de dollars en moyenne, et ce pour les particuliers passant directement leurs ordres
    sur les plateformes Nyse et Nyse-Arca. Le programme fut avalisé par la SEC en
    juin 2012, et sa mise en route prévue le 1er août 2012, ce qui laissait un peu
    de temps aux passeurs d’ordre pour mettre à jour leur connexion avec ces plateformes
    (depuis, le Nasdaq et Bats ont eu eux aussi l’autorisation de passer outre la
    *sub-penny rule*).'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 这种价格的“数字化”（或*离散*应该在科学意义上理解）是一个广泛的话题，如果将其置于金融市场机器到达的历史之中（我们远离20世纪90年代，股价步进为1/8美元的时代：对于报价为20.50美元的股票，无法做出20.25至20.50美元之间，或20.50至20.75美元之间的报价）。根据NYSE的说法，*零售流动性计划*平均应该能提供1.4美分的改善价格，适用于直接在NYSE和NYSE-Arca平台上下订单的个人投资者。该计划于2012年6月获得SEC的批准，计划于2012年8月1日启动，这给定单方面交易者一些时间来更新他们与这些平台的连接（自那时起，纳斯达克和Bats也得到了克服*亚分规则*的许可）。
- en: '**Routage et information**'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**路由和信息**'
- en: 'D’après le rapport assez ébouriffant de la SEC sur le Knightmare de ce jour-là,
    la débâcle de l’un des plus solides *market makers* de Wall Street est la conséquence
    d’un enchaînement de manquements à la vigilance dont le rapport donne quelques
    détails croustillants. En résumé :'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 根据SEC关于那天“Knightmare”事件的相当惊人的报告，华尔街最强大的*市场制造商*之一的崩溃是一系列疏忽监管的结果，报告中给出了一些有趣的细节。简而言之：
- en: '– Afin de pouvoir se connecter sans problème avec le RLP, Knight Capital a
    été obligé de mettre à jour SMARS, le routeur hyper-rapide permettant d’envoyer
    des ordres vers les marchés. Concrètement, SMARS dispatche un ordre « parent »
    venu de Knight en ordres « enfants » destinés à être exécutés sur une ou plusieurs
    plateformes de négociation. Ce nouveau code algorithmique de routage devait remplacer
    une fonction intitulée « Power Peg » que Knight n’utilisait plus depuis 2003 mais
    dont le code était resté implanté dans les routeurs (premier problème). Le rôle
    de Power Peg était de faire remonter l’information concernant les ordres enfants
    : si ceux-ci donnaient lieu à des transactions sur telle ou telle plateforme,
    alors (pour faire court) l’ordre parent en était informé et enlevait ces ordres
    enfants de la liste des ordre à exécuter. Rien de compliqué.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: – 为了能够顺利连接RLP，Knight Capital必须更新SMARS，这是一款超快速路由器，用于向市场发送订单。具体来说，SMARS将来自Knight的“父”订单分派到一个或多个交易平台上执行的“子”订单。这个新的路由算法代码应该取代一个名为“Power
    Peg”的功能，Knight自2003年以来就不再使用，但其代码仍然嵌入在路由器中（第一个问题）。Power Peg的作用是传递有关子订单的信息：如果这些订单在某个交易平台上进行了交易，那么（简而言之）父订单就会被告知，并从要执行的订单列表中删除这些子订单。没有什么复杂的。
- en: – Le 27 juillet 2012, Knight commença à déployer son nouvel algorithme de routage
    vers le RLP sur ses routeurs tests… mais « durant le déploiement de ce nouveau
    code, un technicien n’a pas copié le nouveau code dans l’un des huit serveurs
    de SMARS », selon la SEC. *Errare humanum est.* C’est d’autant plus impressionnant
    qu’aucun dispositif de contrôle de l’implémentation de ce nouveau code n’avait
    été prévu par Knight Capital. Un serveur de SMARS a donc conservé son ancien code…
    lequel avait été entre-temps « déménagé » à un autre endroit du code général d’exécution
    (deuxième problème).
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: – 2012年7月27日，Knight开始在其测试路由器上部署新的RLP路由算法……但是根据证监会称，“在部署新代码的过程中，一名技术人员没有在SMARS的八台服务器之一上复制新代码”。*人非圣贤，孰能无过*。更令人印象深刻的是，Knight
    Capital并没有为这个新代码的实施设计任何控制手段。因此，一个SMARS服务器保存了其旧代码……而这段代码已经被“转移到”到执行的常规代码中的另一个地方（第二个问题）。
- en: '– Arrive le 1er août 2012 : SMARS se connecte au RPL tout en recevant les ordres
    des clients de Knight. Les sept serveurs avec le nouveau code de routage fonctionnent
    parfaitement… mais pas le huitième, qui se met à réactiver (de fait) Power Peg,
    les anciennes lignes de code de routage qui non seulement étaient obsolètes pour
    le RLP mais dont l’exécution était par ailleurs périlleuse compte tenu de leur
    déménagement. Conséquence (toujours pour faire court) : le septième serveur ne
    faisait pas remonter l’information sur l’exécution ou non des ordres enfants,
    ceux-ci apparaissaient donc aux yeux de l’ordre parent comme n’étant jamais exécutés.
    Ces ordres étaient donc tous renvoyés vers les marchés, qu’ils aient été exécutés
    ou non, en boucle. Oups.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: – 2012年8月1日：SMARS连接到RLP，同时接收来自Knight客户的订单。具有新路由代码的七台服务器完美运行……但第八台却未能如此，它重新激活（事实上）了Power
    Peg，这是旧的路由代码，不仅对RLP来说已经过时，而且由于其移动而执行起来非常危险。 结果（为了简洁起见）：第七台服务器没有将有关子订单是否执行的信息传送回来，因此父订单看起来就像从未执行过一样。这些订单因此全部被循环发送回市场，无论它们是否已被执行。哎呀。
- en: '– Dans le détail : 212 ordres parents ont donné lieu à… des millions d’ordres
    enfants, donnant lieu à 4 millions de transactions sur 154 titres différents,
    ce qui représente 397 millions d’actions en 45 minutes – c’est du joli. On se
    dit alors que 461 millions de dollars de perte ne sont pas grand-chose par rapport
    aux… 6,65 milliards de dollars de positions (non voulues évidemment) détenues
    par Knight quelques minutes avant la fin des événements. On sera également surpris
    de constater (si la SEC dit juste) que 97 mails d’alerte (dont l’objet était «
    *Power Peg disabled* ») furent envoyés entre 08h01 et 09h30 (heure d’ouverture
    des marchés) à certains membres du personnel de Knight – 1) soit ces gens dormaient,
    2) soit ils tentèrent de résoudre le problème sans succès, activant malgré tout
    la connexion avec le Retail Liquidity Program du NYSE. Tous ces manquements sont
    détaillés et sanctionnés dans le rapport de la SEC.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: – 具体来说：212 个母订单导致了… 数百万的子订单，产生了对 154 种不同股票的 400 万笔交易，在 45 分钟内- 真是既壮丽又令人咋舌。然后我们会发现，相对于……Knight
    在事件结束前几分钟所持有的 65.5 亿美元的仓位（显然是非自愿的），4.61 亿美元的亏损已经不算什么了。此外，如果 SEC 的说法准确的话，会惊讶地发现，在市场开张的08:01到09:30之间（也就是市场开头一个半小时内），就有
    97 封警告邮件（主题是“ *Power Peg disabled*”）发送给 Knight 的某些员工，而这些邮件都没有得到回应 - 1）这些人要么是在睡觉，2）要么试图但没有成功地解决问题，却不得不启动与
    NYSE的 *零售流动性计划* 的连接。所有这些过失都在 SEC 的报告中详细描述和受到制裁。
- en: '*Errare humanum est, perseverare diabolique* : « L’erreur est humaine, persévérer
    dans son erreur est diabolique » dit l’adage… et c’est malgré tout ce que fit
    Knight à un certain moment (le point le plus ahurissant de l’histoire) : en tentant
    de résoudre cette cacophonie, Knight décida de désactiver le nouveau code de routage
    des 7 serveurs qui fonctionnaient pourtant parfaitement, et de fait Power Peg,
    l’ancien code désormais défectueux, prit le relais, enfonçant Knight dans ses
    problèmes (c’est sans doute à ce moment-là que la compagnie se retrouva avec des
    positions comptées en milliards de dollars). Au-delà des détails techniques, la
    morale de l’histoire est celle-ci : une défaillance humaine concernant un seul
    algorithme de routage d’un seul serveur d’un seul opérateur peut avoir des conséquences,
    dans les marchés, sur la cotation de 75 titres dont Knight Capital fit bouger
    le cours de plus de 5% (plus de 10% pour 37 d’entre elles). Dans un univers où
    les machines travaillent vite et bien, une seule petite erreur humaine peut mener
    à la catastrophe.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '*Errare humanum est, perseverare diabolique* : « 错误是人性的，坚持错误则是邪恶的 » 如谚语所说…
    然而，这正是 Knight 某一时刻所做的事情（这则故事最令人震惊的地方）：试图解决这场混乱时，Knight 决定关闭了那正常运行的 7 台服务器的新路由代码，而
    Power Peg，那个现在已经失效的旧代码，接管了指令，让 Knight 陷入麻烦中（这大概就是公司账户出现了数十亿美元亏损的时候）。除了技术细节，故事的教训就是：一个运营商的单一服务器上一个单一路由算法的人为错误，都可能对市场上的
    75 种股票报价产生影响，其中 37 种报价波动超过 10%。在机器快速高效地工作的世界，一个小小的人为错误就足以引发灾难。'
- en: '**And the winner is… Goldman Sachs**'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '**胜者为王… 高盛**'
- en: 'La condamnation de la SEC a été jugée par certains comme « infâmante » : perdre
    461 millions de dollars était suffisant, nul besoin d’y ajouter une amende. Par
    ailleurs, certains ordres auraient pu être purement et simplement annulés par
    les marchés, et spécialement par le NYSE (compte de l’ampleur de la débâcle, une
    annulation complète aurait été sans doute compliquée). Knight fut rapidement renfloué
    par Goldman Sachs avant que Getco, l’une des plus importantes compagnie de trading
    à hautes fréquences américaines, ne la rachète (du pain béni pour Getco qui a
    perdu 80% de ses bénéfices depuis fin 2012 dans ses activités à hautes fréquences
    mais qui prend possession d’un *market maker* efficace malgré le *bug* humain).'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 有些人认为 SEC 的裁决是“可耻的”：亏损了 4.61 亿美元已经足够，无需再加上罚款。此外，一些订单本来可以被市场直接取消，特别是由 NYSE（考虑到事件规模，完全取消可能会很复杂）来进行，以弥补
    Knight 遭遇的重大失败。在 Goldman Sachs 迅速救助之后，高频交易市场中的重要公司 Getco 收购了 Knight（对于 Getco 而言这是意料之外的捷利，自
    2012 年底以来的高频交易业务利润已经缩水了 80%，但是他们获得了一个有效的 *市场创造者*，尽管出现了人为的 *错误*）。
- en: Le 20 août 2013, peu après des problèmes techniques qui obligèrent le Nasdaq
    à fermer purement et simplement, Goldman Sachs eut également un *glitch* (pas
    un *bug* ;) avec l’exécution de certains ordres concernant les options, ce qui
    déstabilisa les marchés et occasionna une perte de plus de 10 millions de dollars
    pour la banque. Et là, comme par un miracle commandé par la firme qui « accomplit
    l’œuvre de Dieu », la plupart des ordres furent annulés par le NYSE, le Nasdaq,
    le CBOE et ISE. L’être humain qui a oublié de mettre à jour le huitième serveur
    de Knight Capital a du sauter de joie à l’annonce de cette bonne nouvelle.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在2013年8月20日，纳斯达克因技术问题被迫完全关闭后不久，高盛也出现了一次*故障*（不是*错误* ;)），
