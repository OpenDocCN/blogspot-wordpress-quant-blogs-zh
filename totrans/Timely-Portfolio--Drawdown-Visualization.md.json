["```\nrequire(quantmod)\nrequire(PerformanceAnalytics)   getSymbols(\"DJIA\",src=\"FRED\")\ngetSymbols(\"DJTA\",src=\"FRED\")\ngetSymbols(\"DJUA\",src=\"FRED\")   DJ <- merge(DJIA,DJTA,DJUA)   #DJ.yearly <- DJ[endpoints(DJ, on=\"years\", k=1),]\nDJ.roc <- ROC(DJ,n=1,type=\"discrete\")\nDJ.draw = Drawdowns(DJ.roc)   #jpeg(filename=\"DJ plot with Drawdowns zoo.jpg\",\n# quality=100,width=6.25, height = 6.25,  units=\"in\",res=96)\nplot.zoo(log(DJ),plot.type=\"single\",\n col=c(2,3,4),ylab=\"log Price\",xlab=NA,main=\"Dow Jones Indexes\")\nrgb <- hcl(c(0, 0, 260), c = c(100, 0, 100), l = c(50, 90, 50), alpha = 0.3)\nxblocks(index(DJ),as.vector(DJ.draw[,1] < -0.20),col = rgb[1])\nxblocks(index(DJ),as.vector(DJ.draw[,1] < -0.40),col = rgb[1])\nlegend(\"topleft\",inset=0.05,colnames(DJ),fill=c(2,3,4),bg=\"white\")\n#dev.off()   #if we want to add linear models\n#abline(lm(log(coredata(DJ[,1]))~as.Date(index(DJ))),col=2)\n#abline(lm(log(coredata(DJ[,2]))~as.Date(index(DJ))),col=3)\n#abline(lm(log(coredata(DJ[,3]))~as.Date(index(DJ))),col=4)     #another method of viewing drawdowns\n#this is really easy with PerformanceAnalytics\n#but for some reason I am getting an error\n#with findDrawdowns\n#will just shade worst drawdowns until I figure it out\ndrawdowns <- table.Drawdowns(DJ.roc[,1])\ndrawdowns.dates <- cbind(format(drawdowns$From),format(drawdowns$To))\ndrawdowns.dates[is.na(drawdowns.dates)] <- format(index(DJ.roc)[NROW(DJ.roc)])\n# to get in proper list format\n# thanks http://stackoverflow.com/questions/6819804/how-to-convert-a-matrix-to-a-list-in-r\ndrawdowns.dates <- lapply(seq_len(nrow(drawdowns.dates)), function(i) drawdowns.dates[i,])   #jpeg(filename=\"DJ plot with Drawdowns chart TimeSeries.jpg\",\n# quality=100,width=6.25, height = 6.25,  units=\"in\",res=96)\nchart.TimeSeries(DJ,ylog=TRUE,\n period.areas = drawdowns.dates,period.color = rgb[1],\n colorset=c(2,3,4),\n legend.loc=\"topleft\",\n main = \"Dow Jones Indexes\" )\n#dev.off()\n#or even fancier\n#jpeg(filename=\"DJ plot with Drawdowns chart PerformanceSummary.jpg\",\n# quality=100,width=6.25, height = 8.25,  units=\"in\",res=96)\ncharts.PerformanceSummary(DJ.roc,ylog=TRUE,\n period.areas = drawdowns.dates,period.color = rgb[1],\n colorset=c(2,3,4),\n legend.loc=\"topleft\",\n main = \"Dow Jones Indexes\" )\n#dev.off()\n```"]