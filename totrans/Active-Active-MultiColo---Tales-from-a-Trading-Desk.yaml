- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: æœªåˆ†ç±»'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: ç±»åˆ«ï¼šæœªåˆ†ç±»
- en: 'date: 2024-05-18 05:37:02'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¥æœŸï¼š2024å¹´5æœˆ18æ—¥05:37:02
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: Active/Active MultiColo | Tales from a Trading Desk
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¸»/å¤‡ä»½å¤šæ•°æ®ä¸­å¿ƒ|äº¤æ˜“å°çš„æ•…äº‹
- en: æ¥æºï¼š[https://mdavey.wordpress.com/2015/12/15/activeactive-multicolo/#0001-01-01](https://mdavey.wordpress.com/2015/12/15/activeactive-multicolo/#0001-01-01)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¥æºï¼š[https://mdavey.wordpress.com/2015/12/15/activeactive-multicolo/#0001-01-01](https://mdavey.wordpress.com/2015/12/15/activeactive-multicolo/#0001-01-01)
- en: Active/Active MultiColo
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¸»/å¤‡ä»½å¤šæ•°æ®ä¸­å¿ƒ
- en: 'Great [presentation](http://www.infoq.com/presentations/linkedin-scalability-arch)Â fromÂ Erran
    Berger,Â Head of Content Engineering at LinkedIn. Â Discussion centres around stream
    processing, personal data and cache invalidation & replication conflicts. Â Take
    aways:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥è‡ªé¢†è‹±å†…å®¹å·¥ç¨‹éƒ¨è´Ÿè´£äººErran Bergerçš„ç²¾å½©[æ¼”ç¤º](http://www.infoq.com/presentations/linkedin-scalability-arch)ã€‚è®¨è®ºé›†ä¸­åœ¨æµå¤„ç†ã€ä¸ªäººæ•°æ®ä»¥åŠç¼“å­˜å¤±æ•ˆå’Œå¤åˆ¶å†²çªã€‚ä¸»è¦è§‚ç‚¹æœ‰ï¼š
- en: Kafka â€“ data is replicated (best and worst feature because it causes re-processing
    of messages)
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kafka â€“ æ•°æ®è¢«å¤åˆ¶ï¼ˆæœ€å¥½å’Œæœ€åçš„åŠŸèƒ½ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´æ¶ˆæ¯çš„é‡å¤„ç†ï¼‰
- en: Kafka and DB replication turned out not to be the LinkedIn solution â€“ due to
    duplication.
  id: totrans-9
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kafkaå’Œæ•°æ®åº“å¤åˆ¶ç»“æœå¹¶ä¸æ˜¯é¢†è‹±çš„è§£å†³æ–¹æ¡ˆâ€”â€”å› ä¸ºé‡å¤ã€‚
- en: The solution was to process user notifications in the data centre in which the
    user is attached too via a sticky routing service. Â Each data centre has a queue
    to route messages to other data centres.
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ç”¨æˆ·æ‰€åœ¨çš„æ•°æ®ä¸­å¿ƒé€šè¿‡ç²˜æ€§è·¯ç”±æœåŠ¡å¤„ç†ç”¨æˆ·é€šçŸ¥ã€‚æ¯ä¸ªæ•°æ®ä¸­å¿ƒéƒ½æœ‰ä¸€ä¸ªé˜Ÿåˆ—æ¥å°†æ¶ˆæ¯è·¯ç”±åˆ°å…¶ä»–æ•°æ®ä¸­å¿ƒã€‚
- en: Process Kafka messages only once, else youâ€™ll go down a painful road ğŸ™‚
  id: totrans-11
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: åªå¤„ç†Kafkaæ¶ˆæ¯ä¸€æ¬¡ï¼Œå¦åˆ™ä½ ä¼šèµ°ä¸Šä¸€æ¡ç—›è‹¦ä¹‹è·¯ğŸ™‚
- en: Data
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ•°æ®
- en: Replicate data only as required. Â Personal data doesnâ€™t need to live everywhere
    in LinkedIn. Â Profile data does live everywhere.
  id: totrans-13
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»…æ ¹æ®éœ€è¦å¤åˆ¶æ•°æ®ã€‚åœ¨é¢†è‹±ï¼Œä¸ªäººæ•°æ®ä¸éœ€è¦å­˜æ”¾åœ¨æ‰€æœ‰åœ°æ–¹ã€‚ä¸ªäººèµ„æ–™æ•°æ®ç¡®å®å­˜æ”¾åœ¨å„å¤„ã€‚
- en: Router service decide which DB is accessed in which data centre using URNâ€™s
    as the routing payload, and a catalog held in a DB for route the personal data
    request to the correct DB to retrieve the mailbox.
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: è·¯ç”±å™¨æœåŠ¡å†³å®šåœ¨å“ªä¸ªæ•°æ®ä¸­å¿ƒè®¿é—®å“ªä¸ªæ•°æ®åº“ï¼Œä½¿ç”¨ URN ä½œä¸ºè·¯ç”±è½½è·ï¼Œå¹¶åœ¨æ•°æ®åº“ä¸­ä¿å­˜ä¸€ä¸ªç›®å½•ä»¥å°†ä¸ªäººæ•°æ®è¯·æ±‚è·¯ç”±åˆ°æ­£ç¡®çš„æ•°æ®åº“ä»¥æ£€ç´¢é‚®ç®±ã€‚
- en: Data centre connectivity needs to be low latency to aid this solution
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ•°æ®ä¸­å¿ƒè¿æ¥éœ€è¦ä½å»¶è¿Ÿæ¥å¸®åŠ©è¿™ä¸ªè§£å†³æ–¹æ¡ˆ
- en: DB is shard (1000â€™s) for the 95 TeraBytes ğŸ™‚
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ•°æ®åº“åˆ†ç‰‡ï¼ˆåƒå…†å­—èŠ‚ï¼‰è¾¾åˆ°95TBğŸ™‚
- en: Cache invalidators
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¼“å­˜å¤±æ•ˆå™¨
- en: In the case of LinkedIn, the cache invalidator listens to DB writes to invalidate
    the cache, leveraging the DB [replication](https://engineering.linkedin.com/data-replication/open-sourcing-databus-linkedins-low-latency-change-data-capture-system)
    across data centres
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨LinkedInçš„æƒ…å†µä¸‹ï¼Œç¼“å­˜å¤±æ•ˆå™¨ç›‘å¬æ•°æ®åº“å†™å…¥æ¥ä½¿ç¼“å­˜å¤±æ•ˆï¼Œåˆ©ç”¨è·¨æ•°æ®ä¸­å¿ƒçš„æ•°æ®åº“[å¤åˆ¶](https://engineering.linkedin.com/data-replication/open-sourcing-databus-linkedins-low-latency-change-data-capture-system)
- en: Conflicts
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å†²çª
- en: Soft deletes
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: è½¯åˆ é™¤
- en: Custom conflict resolution if you canâ€™t resolve in the data model/actors
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœæ— æ³•åœ¨æ•°æ®æ¨¡å‹/å‚ä¸è€…ä¸­è§£å†³å†²çªï¼Œåˆ™è¿›è¡Œè‡ªå®šä¹‰å†²çªè§£å†³ã€‚
- en: ~ by mdavey on December 15, 2015.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: ï½ ç”±mdaveyäº2015å¹´12æœˆ15æ—¥ã€‚
- en: Posted in [Data](https://mdavey.wordpress.com/category/data/)
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: å‘å¸ƒåœ¨[æ•°æ®](https://mdavey.wordpress.com/category/data/)ä¸­
