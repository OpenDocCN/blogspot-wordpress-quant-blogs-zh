- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-18 14:25:58'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: 'Nasdark #2 – De l’espace et du temps – Sniper In Mahwah & friends'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://sniperinmahwah.wordpress.com/2013/08/26/nasdark-2-de-lespace-et-du-temps/#0001-01-01](https://sniperinmahwah.wordpress.com/2013/08/26/nasdark-2-de-lespace-et-du-temps/#0001-01-01)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'La panne historique du Nasdaq, qui a duré trois heures jeudi 22 août 2013,
    continue de faire couler pas mal d’encre ici et là. Même Thomas Peterffy, le vétéran
    des transactions à haute fréquence dont je raconte dans [*6*](http://www.zones-sensibles.org/index.php?mod=auteurs&a=06)
    les débuts épiques, y est allé de son commentaire dans cet [article](http://blogs.barrons.com/stockstowatchtoday/2013/08/23/nasdaqs-shutdown-what-next/)
    de Barron’s : « *We should all recognize that computer systems are inherently
    complex and subject to failure* » affirme Peterffy, ce qui rejoint son fameux
    discours du 11 octobre 2010 à Paris à l’occasion du congrès de la World Federation
    of Exchanges où il avait, devant le gratin des marchés financiers, déclaré que
    le marché était désormais un « vrai bordel ». A y regarder de plus près, cette
    panne du Nasdaq offre une opportunité rêvée pour revenir sur l’histoire récente
    des plateformes électroniques et les problèmes engendrés par les régulateurs.
    Karl Marx a très certainement écrit des choses intelligentes, mais lorsqu’il affirmait
    que le capitalisme était une « annihilation de l’espace par le temps », force
    est de constater qu’il se trompait lourdement.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Du Nasdaq aux plateformes électroniques**'
  prefs: []
  type: TYPE_NORMAL
- en: Le Nasdaq, qui ouvrit ses câbles le 8 février 1971, fut le premier marché américain
    automatisé, au sens où les courtiers recevaient les ordres de leurs clients avant
    de les passer dans un carnet d’ordre électronique auquel tous les courtiers du
    pays avaient accès via un ordinateur. Ce carnet d’ordre électronique a alors remplacé
    les fosses (*pits*, ou parquets), des lieux physiques où des traders humains négociaient
    entre eux à l’aide de la voix et de signes de la main, les courtiers se situant
    tout autour de cet espace. Puis avec montée en puissance des machines dans les
    années 1980 et 1990, quasiment tous les marchés américains passèrent à l’électronique
    sous la forme d’ECN (*electronic communications network*). Les marchés devinrent
    alors des plateformes électroniques où des algorithmes remplacent les traders
    humains pour ce qui est du travail d’exécution des ordres. Au cœur de ce dispositif
    se trouve les *matching engines,* le serveur du marché qui met en relation un
    algorithme vendeur avec un algorithme acheteur (l’équivalent électronique de l’espace
    physique où autrefois les traders humains se rencontraient).
  prefs: []
  type: TYPE_NORMAL
- en: '**Island et la colocation**'
  prefs: []
  type: TYPE_NORMAL
- en: Pour comprendre la colocation, il faut revenir aux débuts des ECN, et tout particulièrement
    à Island. Dans les années 1970 et 1980, le New York Stock Exchange et le Nasdaq
    étaient considérés comme un « duopole » où les intermédiaires humains étaient
    très mal vus par certains (accusés, parfois à juste titre, de manipuler les prix
    entre eux au détriment des investisseurs). L’un des plus énervés face à ce duopole
    était le truculent Sheldon Maschler qui, via sa société Datek, s’attaqua frontalement
    et informatiquement au Nasdaq. C’était l’époque des « bandits du SOES ». Je détaille
    dans [6](http://www.zones-sensibles.org/index.php?mod=auteurs&a=06) comment un
    génie de l’informatique, Josh Levine, dans les sous-sols de Datek, conçut alors
    ce qui deviendra la matrice des plateformes électroniques de marché, Island. Island
    fut rapidement considérée comme la plus robuste des premières plateformes, attirant
    les meilleurs courtiers électroniques du pays, y compris le mythique *hedge fund* Renaissance
    (techniquement parlant, Island était surtout une *matching engine* extrêmement
    efficace, dont Josh Levine a mis en ligne le code [ici](http://josh.com/notes/island-ecn-10th-birthday/ISLAND.PRG.TXT) à
    l’occasion des 10 ans d’Island).
  prefs: []
  type: TYPE_NORMAL
- en: 'Parmi ces courtiers clients d’Island se trouvait Tradebot, l’une des premières
    sociétés de transactions à hautes fréquences. Son fondateur, Dave Cummings, ira
    ensuite créer sa propre plateforme électronique qui deviendra plus tard Bats Global
    Markets, aujourd’hui troisième ou quatrième marché américain en volume, concurrent
    frontal du Nyse et du Nasdaq (dont on [apprend](http://dealbook.nytimes.com/2013/08/26/bats-and-direct-edge-to-merge-taking-on-older-rivals/)
    à l’instant même la fusion avec Direct Edge, son plus proche concurrent, ce qui
    va secouer les marchés américains). Mais à l’époque, alors que Tradebot développait
    ses premiers algorithmes à hautes fréquences, Cummings appela Levine pour soulever
    un lièvre : contrairement à la plupart des clients d’Island, qui se trouvait du
    côté de Wall Street (Island elle-même était au 50 Broad Street), Tradebot était
    localisé à Kansas City, à 1927 kilomètres de là. La distance nécessaire à Tradebot
    pour passer un ordre sur Island défavorisait donc la société, un ordre en provenance
    de Tradebot arrivant forcément moins rapidement qu’un ordre passé à quelques rues
    de Broad Street. Island proposa alors à Tradebot de venir installer son ordinateur
    (et donc les algorithmes) dans les bureaux mêmes d’Island, en échange d’un loyer,
    au plus près de la *matching engine –* ce que firent ensuite les autres clients
    d’Island.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Ainsi naquit la « colocation », opération qui consiste donc à rapprocher le
    plus possible les algorithmes de trading et la *matching engine* qui se fait rencontrer
    ces algorithmes (plus la distance est courte, plus le passage d’un ordre est rapide).
    Si à l’origine les premiers colocataires s’installèrent dans les sous-sols surchauffés
    de Datek pour être au plus près d’Island, en seulement 10 ans les choses ont bien
    changé : les *matching engines* des marchés financiers sont installés dans d’immenses
    *data centers* frigorifiés,les marchés de Wall Street ayant tous déménagé dans
    le New Jersey (le Nyse à Mahwah, le Nasdaq à Carteret, etc. – cf. la carte ci-dessous).
    A l’intérieur de ces *data centers*, un cabinet est reservé à la *matching engine*
    du marché, alors qu’un autre hall regroupe tous les cabinets où se trouvent les
    algorithmes des opérateurs de marchés, qui tous sont bien entendu à la même distance
    du marché. L’histoire est ironique : même en passant au tout électronique, les
    marchés ont recréé cette proximité spatiale dont avaient besoins les traders humains
    du temps des parquets… C’est ainsi que le Nyse promet à ces clients colocataires
    d’exécuter un ordre en 37 microsondes, soit 0.000037 secondes, soit 4 fois moins
    de temps qu’il n’en faut pour que le son d’une voix humaine parte du fond de la
    gorge pour arriver à la bouche.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Reg NMS, SIP et le NBBO**'
  prefs: []
  type: TYPE_NORMAL
- en: Les marchés financiers sont donc devenus un archipel de *data centers, *et les
    plus puissants opérateurs de marchés installent leurs algorithmes de transactions
    dans chacun de ces *data centers* (si Island facturait quelques centaines de dollars
    la location d’un espace près de sa machine, aujourd’hui les marchés peuvent facturer
    jusqu’à plusieurs dizaines de milliers de dollars de loyer).
  prefs: []
  type: TYPE_NORMAL
- en: Voilà une carte des marchés américains, avec la localisation des *data centers*
    et le temps de latence pour qu’une information (une cotation ou simplement une
    donnée) quitte le Nasdaq pour se diriger vers les autres marchés (ou inversement).
    Cette carte est également visible via [Google Maps](https://mapsengine.google.com/map/edit?mid=zrNZZNGK5JGs.kpbJtsC1ztHI).
    Le Nasdaq est installé à Carteret, Bats à Weehawken, le Nyse à Mahwah, la charmante
    ville de Secaucus accueillant le Chicago Board Options Exchange (CBOE), International
    Securities Exchange (ISE), le Boston Options Exchange et Directe Edge (qui dispose
    là de deux plateformes, EDGE-A et EDGA-X). On voit bien désormais que les noms
    des marchés n’ont plus rien à voir avec leur nouvel emplacement physique, Chicago
    se retrouvant à Secaucus.
  prefs: []
  type: TYPE_NORMAL
- en: '[![](img/9dfb137be95f14a1533d8a89dfb500cc.png "US Stock Exchanges")](https://sniperinmahwah.wordpress.com/wp-content/uploads/2013/08/nasdaq.png)'
  prefs: []
  type: TYPE_NORMAL
- en: 'En 2007, le régulateur des marchés américains, la Securities and Exchange Commission
    (SEC), fit passer toute une série de règles intitulées Reg NMS pour réglementer
    ce nouvel archipel de machines. L’une des règles impose à un courtier ou à un
    marché de faire “router” un ordre vers la plateforme qui propose le meilleur prix,
    une disposition qui va de soi : un investisseur a forcément envie de faire affaire
    avec une contrepartie qui lui propose un meilleur prix que les autres. Il faut
    donc que tous les courtiers et tous les marchés soient au courant des prix pratiqués
    ici et là au sein de cet archipel fragmenté de *data centers.* La SEC a alors
    créé le NBBO, ou National Best Bid Offer, un fichier qui regroupe toutes les informations
    de toutes les cotations de tous les marchés, fichier ensuite mis à disposition
    des courtiers et des marchés pour qu’ils puissent router leurs ordres là où le
    prix est le meilleur.'
  prefs: []
  type: TYPE_NORMAL
- en: Passons sur le fait que la SEC a délégué à un marché (le Nasdaq en l’occurrence)
    le fait de traiter le NBBO (un conflit d’intérêt très justement pointé par [Themis](http://blog.themistrading.com/the-real-story-of-why-nasdaq-halted-trading-yesterday/)
    avant-hier) pour en rester à la technique. Pour mettre à jour le NBBO, le Nasdaq
    utilise le Securities Information Processor ou SIP, qui recueille les cotations
    des différentes plateformes avant de les intégrer dans le NBBO, puis le NBBO est
    envoyé à tous les participants. Or il est de notoriété publique qu’un courtier
    électronique peut, parallèlement au NBBO, acheter directement les informations
    concernant les cotations d’une plateforme à cette dernière (ce que l’on appelle
    avoir un *direct feed*). Pourquoi un courtier aurait-il intérêt à *acheter* à
    un marché des données qui sont distribuées via le NBBO ? Parce que cela va plus
    vite, *of course…*
  prefs: []
  type: TYPE_NORMAL
- en: 'La lenteur de la mise à jour du NBBO est connue depuis bien longtemps, et c’est
    là que l’histoire est, de nouveau, ironique… et nous ramène à Island. A ses débuts,
    Island fut un compétiteur féroce du Nasdaq car la plateforme de Josh Levine était
    bien plus efficace et robuste et rapide, ce qui amenait les courtiers électroniques
    à diriger leurs ordres vers Island et non plus vers le Nasdaq. Première ironie
    du sort : Island fut plus tard revendue à Instinet (une autre plafetorme), avant
    qu’Instinet ne soit ensuite racheté par le… Nasdaq. Island tomba donc dans les
    escarcelles de son rival historique. Josh Levine décida alors de s’attaquer à
    SIP, de le rendre plus efficace et surtout plus rapide. Il proposa de reconstruire
    SIP pour la modique somme de… 1 dollar, un nouveau système qu’il intitula Big
    J Sip. « Je vais créer un SIP simple, rapide et fiable pour 1 dollar. Je m’en
    occuperai pendant un an pour prouver qu’il fonctionne, puis je le mettrai dans *trust* à
    but non lucratif. Je peux livrer le système en six mois, et je garantie que le
    coût opérationnel technique sera en dessous de 100 000 dollars la première année,
    et moins les années précédentes. Je le ferai parce que je pense qu’un SIP très
    efficace aura des effets bénéfiques pour l’ensemble des marchés et de l’économie.
    J’utilisera le même genre de technologie que j’ai utilisé pour Island ».'
  prefs: []
  type: TYPE_NORMAL
- en: Hélas (pour le Nasdaq en 2013), les liens de Josh Levine avec Shelson Maschler
    et les anciens bandits du SOES rendirent méfiantle Nasdaq, qui déclina l’offre
    et engagea une société extérieure pour reconstruire le SIP… pour le prix de 10
    millions de dollars ! Josh Levine décida alors de quitter Island/Instinet et d’aller
    fabriquer un système automatisé de création de documents légaux en s’inspirant
    du *Tractatus Logico-Philosophicus* du philosophe Ludwig Wittgenstein…
  prefs: []
  type: TYPE_NORMAL
- en: '**La panne du Nasdaq**'
  prefs: []
  type: TYPE_NORMAL
- en: 'Le Nasdaq aurait certainement du accepter l’offre de Josh Levine. On en sait
    désormais un peu plus (quoi que le Nasdaq ne fasse pas vraiment dans le détail)
    sur la panne du marché électronique jeudi 22 août. Cet [article](http://online.wsj.com/article/SB10001424127887324906304579035270873010160.html?mod=itp)
    du Wall Street Journal confirme ce que des sources anonymes évoquaient auparavant
    : le problème est né d’un souci de liaison entre le Nasdaq et Nyse Arca, les deux
    marchés échouant à se connecter entre eux à partir de 10h55mn (notons au passage
    que Arca est le diminutif d’Archipelago, une plateforme électronique rachetée
    par le Nyse en 2005 et fondée par Jerry Putnam, Putnam ayant dénommé sa plateforme
    « Archipel » en réaction à l’« Ile » de Josh Levine). Sans connexion avec le Nyse,
    le Nasdaq était incapable de mettre à jour le NBBO (reste à savoir pourquoi un
    problème lié au SIP a poussé le Nasdaq a fermer carrément ses portes aux courtiers).'
  prefs: []
  type: TYPE_NORMAL
- en: '**Arbitrage temporel, hautes fréquences et dark pools**'
  prefs: []
  type: TYPE_NORMAL
- en: 'Reg NMS est très clair sur un point : même si un courtier achète directement
    les informations concernant les cotations à une plateforme/un marché (*direct
    feed*), le prix auquel il doit traiter un titre doit l’être en fonction des prix
    affichés par le NBBO (ce qui est logique car le NBBO informe de manière égalitaire
    tous les participants). Or, récupérer les données du NBBO prend plus de temps
    que de traiter les *direct feeds*… et ce en raison de la colocation (tout se tient).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Prenons le cas d’un opérateur de marché (mettons, au hasard, Goldman Sachs)
    qui a installé ses algorithmes à Mahwah, là où se trouve le Nyse. Goldman Sachs
    est ici un colocataire, il achète donc les données des cotations au Nyse et en
    raison de la colocation et de sa proximité avec le marché, ces données arrivent
    en quelques dizaines de millionièmes de secondes à ses algorithmes. Pourquoi,
    alors, attendre 390 millionièmes de secondes pour que les informations du NBBO
    parviennent de Carteret, à 60 kilomètres de là ? Même si c’est interdit, pour
    un algorithme colocataire situé tout près d’un marché il est très tentant d’utiliser
    les données *direct feed* plutôt que d’attendre le NBBO. Ceci explique sans doute
    ce graphique de Nanex :'
  prefs: []
  type: TYPE_NORMAL
- en: '[![20130822.eAAPL.11.43.45.000_5000ms.0](img/543ef2e60d325a462f3bf52d5740074e.png)](https://sniperinmahwah.wordpress.com/wp-content/uploads/2013/08/20130822-eaapl-11-43-45-000_5000ms-0.gif)'
  prefs: []
  type: TYPE_NORMAL
- en: Suite à la panne du SIP, et donc du NBBO, les cotations s’arrêtent à 12h04mn40s.
    Or, pendant 15 minutes, des transactions ont eu lieu. Comment peut-il y avoir
    des transactions sans cotations ? La réponse est sans doute à trouver du côté
    des algorithmes de trading à haute fréquence qui font de la colocation. La seule
    explication possible est que ces algorithmes ont utilisé les données *direct feed* (récupérées
    directement auprès des marchés, à quelques mètres de là où sont les algorithmes)
    pour réaliser des transactions, se passant purement et simplement du NBBO – qui
    de toute manière n’existait plus. Si c’est bien le cas, alors toutes les transactions
    passées 12h04h40s **sont purement et simplement illégales**, puisque Reg NMS interdit
    d’utiliser le *direct feed* pour réaliser des transactions.
  prefs: []
  type: TYPE_NORMAL
- en: 'C’est le cas notamment pour les *dark pools*, qui ont, comme le montre le graphique
    de Nanex, continuer à fonctionner et à réaliser des transactions pendant plus
    d’une heure après la disparition du NBBO. Or les *dark pools* sont eux aussi contraint
    de prendre comme référence le NBBO pour réaliser des transactions, et ce graphique
    montre bien le problème engendré par la disparition du NBBO : entre 12h04mn40s
     et 13h14, les *dark pools* ont réalisé des transactions à un prix qui n’était
    plus à jour (voire à deux prix différents en l’occurrence). Dans un écosystème
    où tout peut se jouer à quelques millisecondes près (voir quelques microsecondes),
    le fait de constater que les *dark pools* ont pu réaliser des transactions à un
    prix ayant plus d’heure de retard est assez perturbant.'
  prefs: []
  type: TYPE_NORMAL
- en: Ce billet étant déjà passablement long ;), je passe vite sur le fait que Tradebot
    justement, dans les années 2004 -2005, faisait de l'”arbitrage temporel” entre
    le prix d’un titre coté sur les marchés éclairés (Nyse par exemple) et le prix
    coté sur les *dark pool*, jouant justement sur la lenteur de la mise à jour du
    NBBO (les *dark pools* recevant les informations plus tard que les marchés éclairés,
    il était – est encore ? – possible de gagner quelques centimes à l’aide d’un arbitrage
    rapide). Ni les algorithmes à hautes fréquences, ni les *dark pools* ne sont à
    l’origine de la panne du Nasdaq, mais ils en ont malgré tout bien profité (quand
    bien même les deux plus gros *dark pools,* Sigma-X de Goldman Sachs et Crossfinder
    de Crédit Suisse ont fini par s’arrêter de fonctionner au bout d’un moment).
  prefs: []
  type: TYPE_NORMAL
- en: '**Conclusion**'
  prefs: []
  type: TYPE_NORMAL
- en: La panne du Nasdaq la semaine passée est un parfait symptômes de ce que sont
    devenus les marchés financiers. La répartition spatiale/géographique de l’archipel
    des marchés financiers et la colocation font que *jamais* les traders (algorithmiques)
    ne seront sur un pied d’égalité temporel, tout simplement parce que la vitesse
    de la lumière est indépassable et que la terre est ronde. A moins de situer tous
    les opérateurs de marché au même endroit, le NBBO se doit de fonctionner sans
    aucun problème ni délai. Par ailleurs, il va être intéressant de savoir quelle
    sera l’opinion de la SEC sur toutes les transactions qui ont eu lieu après 12h04mn40s,
    sachant qu’elles se sont basées sur des données utilisées illégalement.
  prefs: []
  type: TYPE_NORMAL
- en: Finissons avec les propos de Josh Levine, rapporté par [Bloomberg](http://www.bloomberg.com/news/2013-08-23/island-inventor-levine-says-backups-not-enough-in-stocks.html) vendredi
    passé (sauf erreur, c’est la première fois que Levine évoque les marchés financiers
    depuis qu’il a quitté Island en 2004). D’après Levine, la solution pour avoir
    un NBBO efficace serait de le décentraliser, et de construire un système distribué
    (l’ensemble des données n’aurait pas alors à arriver à Carteret avant de  repartir
    vers les différentes plateformes). Ce que Levine ne dit pas (difficile de savoir
    s’il y pensait ou non), c’est qu’un tel système obligerait les traders à haute
    fréquence à faire de la colocation à chaque point de distribution du NBBO, ce
    qui leur ferait porter lourdement la main au portefeuille. Une piste intéressante…
  prefs: []
  type: TYPE_NORMAL
