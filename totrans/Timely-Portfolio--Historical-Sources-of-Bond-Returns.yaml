- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-18 15:18:32'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: 'Timely Portfolio: Historical Sources of Bond Returns'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[http://timelyportfolio.blogspot.com/2011/04/historical-sources-of-bond-returns.html#0001-01-01](http://timelyportfolio.blogspot.com/2011/04/historical-sources-of-bond-returns.html#0001-01-01)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: As promised in [Monitoring Sources of Bond Return](http://timelyportfolio.blogspot.com/2011/04/monitoring-sources-of-bond-return.html),
    we can show more history if we use CPI instead of expected inflation (from the
    TIP inflation breakeven yield).  Here are the results with history back to 1953.
  prefs: []
  type: TYPE_NORMAL
- en: However, more history includes negative inflation, so I think the chart is a
    little more clear with a PerformanceAnalytics chart.TimeSeries graph.
  prefs: []
  type: TYPE_NORMAL
- en: 'R code:'
  prefs: []
  type: TYPE_NORMAL
- en: require(quantmod)
  prefs: []
  type: TYPE_NORMAL
- en: require(PerformanceAnalytics)
  prefs: []
  type: TYPE_NORMAL
- en: require(reshape2)
  prefs: []
  type: TYPE_NORMAL
- en: require(ggplot2)
  prefs: []
  type: TYPE_NORMAL
- en: 'getSymbols("GS10",src="FRED") #load 10yTreasury'
  prefs: []
  type: TYPE_NORMAL
- en: 'getSymbols("BAA",src="FRED") #load Corporate for credit'
  prefs: []
  type: TYPE_NORMAL
- en: 'getSymbols("CPIAUCSL",src="FRED") #load CPI for inflation'
  prefs: []
  type: TYPE_NORMAL
- en: bondReturnSources<-na.omit(merge(ROC(CPIAUCSL,12,type="discrete")*100,BAA-GS10,GS10-ROC(CPIAUCSL,12,type="discrete")*100))
  prefs: []
  type: TYPE_NORMAL
- en: 'bondReturnSources<-merge(bondReturnSources,bondReturnSources[,1]+bondReturnSources[,2]+bondReturnSources[,3])
    #add for total'
  prefs: []
  type: TYPE_NORMAL
- en: colnames(bondReturnSources)<-c("Inflation","Credit","Real","Total")
  prefs: []
  type: TYPE_NORMAL
- en: chart.TimeSeries(bondReturnSources,legend.loc="bottom",main="Historical Sources
    of Bond Returns",ylab="Yield as %",colorset=c("darkolivegreen3","cadetblue","goldenrod","gray70"))
  prefs: []
  type: TYPE_NORMAL
- en: '#use this for stacked bar, but comes out strange with too many months'
  prefs: []
  type: TYPE_NORMAL
- en: '#chart.StackedBar(bondReturnSources["1953::"],main="Historical Sources of Bond
    Returns",ylab="Yield as %",colorset=c("darkgreen","red","blue"))'
  prefs: []
  type: TYPE_NORMAL
- en: '#use ggplot for consistency with previous plot, but negative makes chart hard
    to read'
  prefs: []
  type: TYPE_NORMAL
- en: bondReturnSourcesToGraph<-data.frame(cbind(as.Date(index(bondReturnSources)),coredata(bondReturnSources[,1:3])))
  prefs: []
  type: TYPE_NORMAL
- en: colnames(bondReturnSourcesToGraph)<-c("Date","Inflation","Credit","Real")
  prefs: []
  type: TYPE_NORMAL
- en: bondReturnSourcesToGraph<-melt(bondReturnSourcesToGraph,id.vars=1)
  prefs: []
  type: TYPE_NORMAL
- en: colnames(bondReturnSourcesToGraph)<-c("Date","ReturnSource","Yield")
  prefs: []
  type: TYPE_NORMAL
- en: rownames(bondReturnSourcesToGraph)<-c(1:NROW(bondReturnSourcesToGraph))
  prefs: []
  type: TYPE_NORMAL
- en: ggplot(bondReturnSourcesToGraph, stat="identity", aes(x=Date,y=Yield,fill=ReturnSource,group=ReturnSource))
    + geom_area() +scale_x_date(format = "%Y") + opts(title = "Historical Sources
    of Bond Return")
  prefs: []
  type: TYPE_NORMAL
