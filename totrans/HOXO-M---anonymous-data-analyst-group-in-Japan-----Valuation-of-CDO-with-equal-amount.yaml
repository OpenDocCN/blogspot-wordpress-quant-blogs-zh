- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-18 06:49:10'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: 'HOXO-M - anonymous data analyst group in Japan - : Valuation of CDO with equal
    amount'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[http://mockquant.blogspot.com/2011/01/valuation-of-cdo-with-equal-amount.html#0001-01-01](http://mockquant.blogspot.com/2011/01/valuation-of-cdo-with-equal-amount.html#0001-01-01)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Bank of Japan(BOJ) publish research paper
  prefs: []
  type: TYPE_NORMAL
- en: regularly. And, they issued very interesting paper about valuation of CDO recently.
    They introduced copula for pricing of CDO,and discussed how different CDO spreads
    were with using different copula for pricing.
  prefs: []
  type: TYPE_NORMAL
- en: I would like to reproduce their result (especially,P23-Table7)
  prefs: []
  type: TYPE_NORMAL
- en: The condition of calculation is following that
  prefs: []
  type: TYPE_NORMAL
- en: number of debt（NUM.REFDEBT）:=100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: maturity(MATURITY):=5 year
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: recovery rate(RECOVERY.RATE):=40%（constant value）
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: probability of default (DEFAULT.PROBABILITY):=5％（in 5 years）
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: parameter of nomal copula ρ:=0.15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: parameter of clayton copula α:=0.21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: They apporoximated their valuation formula for easy calculation(equation (27))
  prefs: []
  type: TYPE_NORMAL
- en: (They assumed that CDO spread were paid as discounted bond at the begging.)
  prefs: []
  type: TYPE_NORMAL
- en: I simulated valuation of CDO with their method.
  prefs: []
  type: TYPE_NORMAL
- en: The result is following that
  prefs: []
  type: TYPE_NORMAL
- en: '| copula/tranche | Equity | mezzanine | senior | super senior |'
  prefs: []
  type: TYPE_TB
- en: '| normal | 1,145.42 | 62.49 | 0.52 | 0.000 |'
  prefs: []
  type: TYPE_TB
- en: '| t(20) | 1,055.28 | 86.07 | 2.18 | 0.004 |'
  prefs: []
  type: TYPE_TB
- en: '| t(6) | 896.74 | 126.44 | 8.56 | 0.044 |'
  prefs: []
  type: TYPE_TB
- en: '| t(3) | 733.31 | 165.90 | 23.56 | 0.191 |'
  prefs: []
  type: TYPE_TB
- en: '| clayton | 857.64 | 135.73 | 12.83 | 0.084 |'
  prefs: []
  type: TYPE_TB
- en: This table reproduce their result(P23-Table7).
  prefs: []
  type: TYPE_NORMAL
- en: And, In senior or super senior,you can understand that the CDO spread which
    is evaluated by normal copula is lower than the others. It means that normal copula
    is inadequate in financial crisis.
  prefs: []
  type: TYPE_NORMAL
- en: I show you my programming code（by R language).
  prefs: []
  type: TYPE_NORMAL
- en: If you copy and run my source code, you can duplicate my result easily.
  prefs: []
  type: TYPE_NORMAL
- en: Before you run, please install "copula"package.
  prefs: []
  type: TYPE_NORMAL
- en: <fieldset>
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '[library](http://inside-r.org/r-doc/base/library)(copula)'
  prefs: []
  type: TYPE_NORMAL
- en: '#function for CDO spread calculation'
  prefs: []
  type: TYPE_NORMAL
- en: SpreadOfCDO <- function(copula, default.probability, maturity,
  prefs: []
  type: TYPE_NORMAL
- en: recovery.rate, attachment, detachment, num.path, num.refdebt)
  prefs: []
  type: TYPE_NORMAL
- en: '{'
  prefs: []
  type: TYPE_NORMAL
- en: random.copula <- rcopula(copula,num.path)
  prefs: []
  type: TYPE_NORMAL
- en: num.default <- rowSums(random.copula < default.probability)
  prefs: []
  type: TYPE_NORMAL
- en: loss.refdebt <- (1-recovery.rate)/num.refdebt*num.default
  prefs: []
  type: TYPE_NORMAL
- en: loss.tranche <- (pmax(loss.refdebt - attachment,0)-pmax(loss.refdebt - detachment,0))/(detachment-attachment)
  prefs: []
  type: TYPE_NORMAL
- en: expectation.loss.tranche <- sum(loss.tranche)/num.path
  prefs: []
  type: TYPE_NORMAL
- en: spread <- -1/maturity*log(1-expectation.loss.tranche)
  prefs: []
  type: TYPE_NORMAL
- en: return(spread)
  prefs: []
  type: TYPE_NORMAL
- en: '}'
  prefs: []
  type: TYPE_NORMAL
- en: '################  main  ##################'
  prefs: []
  type: TYPE_NORMAL
- en: '#parameter'
  prefs: []
  type: TYPE_NORMAL
- en: NUM.PATH <- 10^3
  prefs: []
  type: TYPE_NORMAL
- en: NUM.REFDEBT <- 100
  prefs: []
  type: TYPE_NORMAL
- en: DEFAULT.PROBABILITY <- 0.05
  prefs: []
  type: TYPE_NORMAL
- en: MATURITY <- 5
  prefs: []
  type: TYPE_NORMAL
- en: RECOVERY.RATE <- 0.4
  prefs: []
  type: TYPE_NORMAL
- en: '#copulas which I want to compare.'
  prefs: []
  type: TYPE_NORMAL
- en: COPULA <- list(normalCopula(0.15, dim = NUM.REFDEBT),
  prefs: []
  type: TYPE_NORMAL
- en: tCopula(0.15, dim = NUM.REFDEBT, df = 20),
  prefs: []
  type: TYPE_NORMAL
- en: tCopula(0.15, dim = NUM.REFDEBT, df = 6),
  prefs: []
  type: TYPE_NORMAL
- en: tCopula(0.15, dim = NUM.REFDEBT, df = 3),
  prefs: []
  type: TYPE_NORMAL
- en: claytonCopula(0.21, dim = NUM.REFDEBT)
  prefs: []
  type: TYPE_NORMAL
- en: )
  prefs: []
  type: TYPE_NORMAL
- en: '#define for easy programming'
  prefs: []
  type: TYPE_NORMAL
- en: SpreadOfCDOWithFixedParameter <- function(copula,attachment, detachment){
  prefs: []
  type: TYPE_NORMAL
- en: SpreadOfCDO(copula, DEFAULT.PROBABILITY, MATURITY,
  prefs: []
  type: TYPE_NORMAL
- en: RECOVERY.RATE, attachment, detachment, NUM.PATH, NUM.REFDEBT)
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '}'
  prefs: []
  type: TYPE_NORMAL
- en: result <- list()
  prefs: []
  type: TYPE_NORMAL
- en: '#tranche:equity'
  prefs: []
  type: TYPE_NORMAL
- en: result[[1]] <- sapply(COPULA,SpreadOfCDOWithFixedParameter,0.0,0.06)
  prefs: []
  type: TYPE_NORMAL
- en: '#tranche:mezzanine'
  prefs: []
  type: TYPE_NORMAL
- en: result[[2]] <- sapply(COPULA,SpreadOfCDOWithFixedParameter,0.06,0.18)
  prefs: []
  type: TYPE_NORMAL
- en: '#tranche:senior'
  prefs: []
  type: TYPE_NORMAL
- en: result[[3]] <- sapply(COPULA,SpreadOfCDOWithFixedParameter,0.18,0.36)
  prefs: []
  type: TYPE_NORMAL
- en: '#tranche:super senior'
  prefs: []
  type: TYPE_NORMAL
- en: result[[4]] <- sapply(COPULA,SpreadOfCDOWithFixedParameter,0.36,1)
  prefs: []
  type: TYPE_NORMAL
- en: '#convert to matrix, and chenge unit to "bp"'
  prefs: []
  type: TYPE_NORMAL
- en: result <- 10^4*do.call("cbind", result)
  prefs: []
  type: TYPE_NORMAL
- en: colnames(result) <- c("equity","mezzanine","senior","super senior")
  prefs: []
  type: TYPE_NORMAL
- en: rownames(result) <- c("normal","t(20)","t(6)","t(3)","clayton")
  prefs: []
  type: TYPE_NORMAL
- en: result
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '[Created by Pretty R at inside-R.org](http://www.inside-r.org/pretty-r "Created
    by Pretty R at inside-R.org")</fieldset>'
  prefs: []
  type: TYPE_NORMAL
