["```\n#explore relationships of best years in US Stocks\n#and recessions   require(quantmod)\nrequire(ggplot2)\nrequire(PerformanceAnalytics)\n```", "```\ngetSymbols(\"DJIA\",src=\"FRED\")  #get Dow Jones Industrials\ngetSymbols(\"USREC\",src=\"FRED\") #get US Recession(1)/Expansion(0)   \n```", "```\nDJIA <- to.yearly(DJIA)[,4]\nUSREC <- to.yearly(USREC)[,4]   \n```", "```\n#align dates as 12-31 of each year\n#probably better way to do this but it works\nindex(DJIA) <- as.Date(paste(\n\tformat(index(DJIA),\"%Y-%m\"),rep(\"-31\",NROW(DJIA)),sep=\"\"))\nindex(USREC) <- as.Date(paste(\n\tformat(index(USREC),\"%Y-%m\"),rep(\"-31\",NROW(USREC)),sep=\"\"))     \n```", "```\nstocks_economy <- na.omit(merge(\n\tlag(USREC,k=1),ROC(DJIA,n=1,type=\"discrete\")))   \n```", "```\n#I really like the boxplot by range, so let's do the same here\ndf <- as.data.frame(cbind(index(stocks_economy),\n\tcoredata(stocks_economy)))\ncolnames(df) <- c(\"date\",\"economy\",\"DJIAreturn\")\nggplot(df,aes(factor(economy),DJIAreturn)) +\n\tgeom_boxplot(aes(colour = factor(economy))) +\n\topts(title=\"Box Plot of DJIA Yearly Change by State of Economy Previous Year (recession=1)\")     \n```", "```\nm <- ggplot(df, aes(DJIAreturn, colour=factor(economy)) )\nm + geom_density(size=1,aes(y = ..scaled..)) +\n\topts(title=\"Density Plot of DJIA Yearly Change by State of Economy Previous Year (recession=1)\")     \n```", "```\nm <- ggplot(df, aes(y=DJIAreturn, x=factor(economy)) )\nm + geom_point() + geom_rug() +\n\topts(title=\"Marginal Rug Plot of DJIA Yearly Change by State of Economy Previous Year (recession=1)\")     \n```", "```\nchartSeries(runSum(USREC,n=10),theme=\"white\",\n\tname=\"Years in Recession by Decade\")\n```"]