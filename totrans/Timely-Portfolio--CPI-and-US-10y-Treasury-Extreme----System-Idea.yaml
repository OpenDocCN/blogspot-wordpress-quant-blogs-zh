- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-18 15:17:34'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: 'Timely Portfolio: CPI and US 10y Treasury Extreme –> System Idea'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[http://timelyportfolio.blogspot.com/2011/05/cpi-and-us-10y-treasury-extreme-system.html#0001-01-01](http://timelyportfolio.blogspot.com/2011/05/cpi-and-us-10y-treasury-extreme-system.html#0001-01-01)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: When I see extremes, I feel compelled to explore. The US 10y Treasury yield
    is at an extreme versus the annualized 3 month CPI rate of change.
  prefs: []
  type: TYPE_NORMAL
- en: Of course, I have to try to build a system around the idea.  While this 3 month
    CPI rate of change generates a decent signal of entry and exit for the S&P 500,
    it appears the 6 to 12 month rate of change works better.  Let’s just use US 10y
    Treasury minus the lagged (since CPI released middle of following month) 9 month
    rate of change on CPI.  If the 9 month S&P 500 rate of change exceeds this US10y-9monthCPI
    rate by –5%, then enter a long S&P 500 position.
  prefs: []
  type: TYPE_NORMAL
- en: Results are better than I would have expected, and the degrees of freedom are
    fairly robust.
  prefs: []
  type: TYPE_NORMAL
- en: For some hindsight optimization, we can add an exit on upside extremes. Magically,
    1987 disappears. I don't recommend this hindsight optimization approach unless
    the concept works on multiple other markets, but the upside extreme would have
    you out of the S&P 500 currently also.
  prefs: []
  type: TYPE_NORMAL
- en: I use these for illustrative purposes. In no way am I providing financial advice. 
    You are responsible for your own profits and losses.
  prefs: []
  type: TYPE_NORMAL
- en: 'R code:'
  prefs: []
  type: TYPE_NORMAL
- en: require(PerformanceAnalytics)
  prefs: []
  type: TYPE_NORMAL
- en: require(quantmod)
  prefs: []
  type: TYPE_NORMAL
- en: 'getSymbols("CPIAUCNS",src="FRED") #load CPI from Fed Fred'
  prefs: []
  type: TYPE_NORMAL
- en: 'getSymbols("GS10",src="FRED") #load US Treasury 10y from Fed Fred'
  prefs: []
  type: TYPE_NORMAL
- en: 'getSymbols("GS20",src="FRED") #load US Treasury 20y from Fed Fred'
  prefs: []
  type: TYPE_NORMAL
- en: 'getSymbols("GS30",src="FRED") #load US Treasury 30y from Fed Fred'
  prefs: []
  type: TYPE_NORMAL
- en: 'getSymbols("SP500",src="FRED") #load SP500 from Fed Fred'
  prefs: []
  type: TYPE_NORMAL
- en: '#fill 20y gap from discontinued 20y Treasuries with 30y'
  prefs: []
  type: TYPE_NORMAL
- en: GS20["1987-01::1993-09"]<-GS30["1987-01::1993-09"]
  prefs: []
  type: TYPE_NORMAL
- en: SP500<-to.monthly(SP500)[,4]
  prefs: []
  type: TYPE_NORMAL
- en: '#get monthly format to yyyy-mm-dd with the first day of the month'
  prefs: []
  type: TYPE_NORMAL
- en: index(SP500)<-as.Date(index(SP500))
  prefs: []
  type: TYPE_NORMAL
- en: '#subtract the annualized 3mo ROC of CPI from US 10y'
  prefs: []
  type: TYPE_NORMAL
- en: US10yMinus3moCPI<-GS10/100-((1+ROC(CPIAUCNS,3))^4-1)
  prefs: []
  type: TYPE_NORMAL
- en: chartSeries(US10yMinus3moCPI,theme="white.mono")
  prefs: []
  type: TYPE_NORMAL
- en: '#get the 12 month rate of change on CPI'
  prefs: []
  type: TYPE_NORMAL
- en: '#subtract the lagged amount from the 10y Treasury'
  prefs: []
  type: TYPE_NORMAL
- en: '#I retrieved the 20y series also if you would like to use that here'
  prefs: []
  type: TYPE_NORMAL
- en: '#it does not make much difference'
  prefs: []
  type: TYPE_NORMAL
- en: US10yMinusCPI<-GS10/100-lag(ROC(CPIAUCNS,9,type="discrete"),k=1)
  prefs: []
  type: TYPE_NORMAL
- en: signal<-ifelse(ROC(SP500,n=9)-lag(US10yMinusCPI) > -0.05,1,0)
  prefs: []
  type: TYPE_NORMAL
- en: signal<-lag(signal,k=1)
  prefs: []
  type: TYPE_NORMAL
- en: signal[is.na(signal)]<-0
  prefs: []
  type: TYPE_NORMAL
- en: 'SPreturn<-ROC(SP500,1,type="discrete")  # 1 month SP500 rate of change'
  prefs: []
  type: TYPE_NORMAL
- en: SPreturn[1]<-0
  prefs: []
  type: TYPE_NORMAL
- en: SystemReturn<-signal*SPreturn
  prefs: []
  type: TYPE_NORMAL
- en: SystemEquity<-cumprod(1+signal*SPreturn)*coredata(SP500)[1]
  prefs: []
  type: TYPE_NORMAL
- en: return_compare<-merge(SystemReturn,SPreturn)
  prefs: []
  type: TYPE_NORMAL
- en: colnames(return_compare)<-c("SP500 System based on US10y & CPI","SP500")
  prefs: []
  type: TYPE_NORMAL
- en: charts.PerformanceSummary(return_compare,ylog=TRUE,
  prefs: []
  type: TYPE_NORMAL
- en: main="Performance Comparison of SP500 and System",
  prefs: []
  type: TYPE_NORMAL
- en: colorset=c("cadetblue","darkolivegreen3"))
  prefs: []
  type: TYPE_NORMAL
- en: chartSeries(SystemEquity,theme="white.mono",log=TRUE,
  prefs: []
  type: TYPE_NORMAL
- en: TA="addTA(SP500,on=1);addTA(ROC(SP500,n=9)-lag(US10yMinusCPI))",
  prefs: []
  type: TYPE_NORMAL
- en: name="Performance Comparison of SP500 and System with Signal")
  prefs: []
  type: TYPE_NORMAL
- en: '#now with some hindsight optimization to really limit the drawdown'
  prefs: []
  type: TYPE_NORMAL
- en: '#add an extreme upside filter and 1987 magically disappears'
  prefs: []
  type: TYPE_NORMAL
- en: '#don''t recommend this approach but a good example'
  prefs: []
  type: TYPE_NORMAL
- en: signal<-ifelse(ROC(SP500,n=9)-lag(US10yMinusCPI) > -0.05 & ROC(SP500,n=9)-lag(US10yMinusCPI)
    < 0.2,1,0)
  prefs: []
  type: TYPE_NORMAL
- en: signal<-lag(signal,k=1)
  prefs: []
  type: TYPE_NORMAL
- en: signal[is.na(signal)]<-0
  prefs: []
  type: TYPE_NORMAL
- en: 'SPreturn<-ROC(SP500,1,type="discrete")  # 1 month SP500 rate of change'
  prefs: []
  type: TYPE_NORMAL
- en: SPreturn[1]<-0
  prefs: []
  type: TYPE_NORMAL
- en: SystemReturn<-signal*SPreturn
  prefs: []
  type: TYPE_NORMAL
- en: SystemEquity<-cumprod(1+signal*SPreturn)*coredata(SP500)[1]
  prefs: []
  type: TYPE_NORMAL
- en: return_compare<-merge(SystemReturn,return_compare)
  prefs: []
  type: TYPE_NORMAL
- en: colnames(return_compare)[1]<-"System with Upside filter"
  prefs: []
  type: TYPE_NORMAL
- en: charts.PerformanceSummary(return_compare,ylog=TRUE,
  prefs: []
  type: TYPE_NORMAL
- en: main="Performance Comparison of SP500 and System with Upside Extreme Limit",
  prefs: []
  type: TYPE_NORMAL
- en: colorset=c("gray70","darkolivegreen3","cadetblue"))
  prefs: []
  type: TYPE_NORMAL
