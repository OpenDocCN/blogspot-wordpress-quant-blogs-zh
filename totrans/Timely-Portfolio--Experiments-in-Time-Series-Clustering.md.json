["```\n library(TSclust)\nlibrary(quantmod)\nlibrary(dplyr)\nlibrary(pipeR)\nlibrary(tidyr)\nlibrary(epiwidgets)\n\nsp5 >%\n  # dplyr doesn't like xts, so make a data.frame\n  (\n    data.frame(\n      date = index(.)\n      ,price = .[,1,drop=T]\n    )\n  ) %>>%\n  # add a column for Year\n  mutate( year = as.numeric(format(date,\"%Y\"))) %>>%\n  # group by our new Year column\n  group_by( year ) %>>%\n  # within each year, find what day in the year so we can join\n  mutate( pos = rank(date) ) %>>%\n  mutate( roc = price/lag(price,k=1) - 1 ) %>>%\n  # can remove date\n  select( -c(date,price) ) %>>%\n  as.data.frame %>>%\n  # years as columns as pos as row\n  spread( year, roc ) %>>%\n  # remove last year since assume not complete\n  ( .[,-ncol(.)] ) %>>%\n  # remove pos since index will be same\n  select( -pos ) %>>%\n  # fill nas with previous value\n  na.fill( 0 ) %>>%\n  t %>>%\n  # use TSclust diss; notes lots of METHOD options\n  diss( METHOD=\"ACF\" ) %>>%\n  hclust %>>%\n  ape::as.phylo() %>>% \n  treewidget\n\n```"]