["```\n\nprivate UltraGridRow m_firstRowOfTheHeaderThatWasDoubleClickedOn = null;\n\nprivate void dgTrades_MouseDoubleClick(object sender, MouseEventArgs e)\n{\n  Infragistics.Win.UIElement element =\n  this.dgTrades.DisplayLayout.UIElement.ElementFromPoint(new Point(e.X, e.Y));\n  if (element != null)\n  {\n    this.CalcGridRowForDblClick(element);\n    if (element is Infragistics.Win.TextUIElement)\n    {\n      HeaderBase hdr = element.GetContext(typeof(HeaderBase)) as HeaderBase;\n      if (hdr != null)\n        this.dgTrades_DoubleClickHeader(hdr);\n    }\n  }\n}\n\nprivate void dgTrades_DoubleClickHeader(HeaderBase hdr)\n{\n  if (hdr.Column.Key == \"Selected\")\n  {\n    if (this.m_firstRowOfTheHeaderThatWasDoubleClickedOn != null)\n      this.ToggleSelected(e.Header, \n                          this.m_firstRowOfTheHeaderThatWasDoubleClickedOn);\n  }\n\n  this.m_firstRowOfTheHeaderThatWasDoubleClickedOn = null;\n}\n\nprivate void ToggleSelected(HeaderBase header, UltraGridRow row)\n{\n  if (row == null)\n    return;\n\n  UltraGridBand band = header.Band;\n  UltraGridRow childRow = row.GetChild(ChildRow.First, band);\n  if (childRow == null)\n  {\n    // May be a leaf node\n    UltraGridColumn colSelected = band.Columns[\"Selected\"];\n    if (colSelected == null)\n      return;\n    int idx = colSelected.Index;\n    for (; row != null; row = row.GetSibling(SiblingRow.Next, false))\n    {\n      row.Cells[idx].Value = !((bool)row.Cells[idx].Value);\n    }\n  }\n  else\n  {\n    // Is a non-leaf node\n    this.ToggleSelected(header, childRow);\n    this.ToggleSelected(header, row.GetSibling(SiblingRow.Next, false));\n  }\n}\n\nprivate UltraGridRow CalcGridRowForDblClick(Infragistics.Win.UIElement uiElement)\n{\n  this.m_firstRowOfTheHeaderThatWasDoubleClickedOn = null;\n\n  if (uiElement == null)\n  return null;\n\n  object elementContext = uiElement.GetContext(typeof(UltraGridRow));\n  if (elementContext == null)\n    return null;\n\n  UltraGridRow row = elementContext as UltraGridRow;\n  if (row != null)\n    this.m_firstRowOfTheHeaderThatWasDoubleClickedOn = row;\n  return row;\n}\n\n```"]