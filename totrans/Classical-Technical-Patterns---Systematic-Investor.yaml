- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-18 14:40:40'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: Classical Technical Patterns | Systematic Investor
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://systematicinvestor.wordpress.com/2012/05/22/classical-technical-patterns/#0001-01-01](https://systematicinvestor.wordpress.com/2012/05/22/classical-technical-patterns/#0001-01-01)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'In my [presentation](http://www.systematicportfolio.com/RFinance2012) about
    Seasonality Analysis and Pattern Matching at the [R/Finance](http://www.rinfinance.com/agenda/)
    conference, I used examples that I have previously covered in my blog:'
  prefs: []
  type: TYPE_NORMAL
- en: The only subject in my [presentation](http://www.systematicportfolio.com/RFinance2012)
    that I have not discussed previously was about [Classical Technical Patterns](http://en.wikipedia.org/wiki/Chart_pattern).
    For example, the [Head and Shoulders](http://en.wikipedia.org/wiki/Head_and_shoulders_%28chart_pattern%29)
    pattern, most often seen in up-trends and generally regarded as a reversal pattern.
    Below I implemented the algorithm and pattern definitions presented in the [Foundations
    of Technical Analysis by A. Lo, H. Mamaysky, J. Wang (2000)](http://web.mit.edu/alo/www/Papers/1705-1765.pdf)
    paper.
  prefs: []
  type: TYPE_NORMAL
- en: 'To identify a price pattern I will follow steps as described in the [Foundations
    of Technical Analysis](http://web.mit.edu/alo/www/Papers/1705-1765.pdf) paper:'
  prefs: []
  type: TYPE_NORMAL
- en: First, fit a smoothing estimator, a kernel regression estimator, to approximate
    time series.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Next, determine local extrema, tops and bottoms, using fist derivative of the
    kernel regression estimator.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Define classical technical patterns in terms of tops and bottoms.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Search for classical technical patterns throughout the tops and bottoms of the
    kernel regression estimator.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Let’s begin by loading historical prices for SPY:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'The first step is to fit a smoothing estimator, a [kernel regression estimator](http://en.wikipedia.org/wiki/Kernel_density_estimation),
    to approximate time series. I used [sm](http://cran.r-project.org/web/packages/sm/index.html)
    package to fit kernel regression:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'The second step is to find local extrema, tops and bottoms, using first derivative
    of the kernel regression estimator. (more details in the paper on page 15):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: I put the logic for the first and second step into the [find.extrema()](https://github.com/systematicinvestor/SIT/blob/master/R/rfinance2012.r)
    function.
  prefs: []
  type: TYPE_NORMAL
- en: 'The next step is to define classical technical patterns in terms of tops and
    bottoms. The [pattern.db()](https://github.com/systematicinvestor/SIT/blob/master/R/rfinance2012.r)
    function implements the 10 patterns described in the paper on page 12\. For example,
    let’s have a look at the [Head and Shoulders](http://en.wikipedia.org/wiki/Head_and_shoulders_%28chart_pattern%29)
    pattern. The [Head and Shoulders](http://en.wikipedia.org/wiki/Head_and_shoulders_%28chart_pattern%29)
    pattern:'
  prefs: []
  type: TYPE_NORMAL
- en: is defined by 5 extrema points (E1, E2, E3, E4, E5)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: starts with a maximum (E1)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: E1 and E5 are within 1.5 percent of their average
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: E2 and E4 are within 1.5 percent of their average
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The R code below that corresponds to the [Head and Shoulders](http://en.wikipedia.org/wiki/Head_and_shoulders_%28chart_pattern%29)
    pattern is a direct translation, from the pattern description in the paper on
    page 12, and is very readable:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: The last step is a function that searches for all defined patterns in the kernel
    regression representation of original time series.
  prefs: []
  type: TYPE_NORMAL
- en: 'I put the logic for this step into the [find.patterns()](https://github.com/systematicinvestor/SIT/blob/master/R/rfinance2012.r)
    function. Below is a simplified version:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'I put the logic for the entire process in to the [plot.patterns()](https://github.com/systematicinvestor/SIT/blob/master/R/rfinance2012.r)
    helper function. The [plot.patterns()](https://github.com/systematicinvestor/SIT/blob/master/R/rfinance2012.r)
    function first call find.extrema() function to determine extrema points, and next
    it calls find.patterns() function to find and plot patterns. Let’s find classical
    technical patterns in the last 150 days of SPY history:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: It is very easy to define you own custom patterns and I encourage everyone to
    give it a try.
  prefs: []
  type: TYPE_NORMAL
- en: '[![](img/5e142b51436062d709ac83a7bc1d3735.png "plot.pattern.matching.png.small")](https://systematicinvestor.wordpress.com/wp-content/uploads/2012/05/plot-pattern-matching-small.png)'
  prefs: []
  type: TYPE_NORMAL
- en: To view the complete source code for this example, please have a look at the
    [pattern.test() function in rfinance2012.r at github](https://github.com/systematicinvestor/SIT/blob/master/R/rfinance2012.r).
  prefs: []
  type: TYPE_NORMAL
