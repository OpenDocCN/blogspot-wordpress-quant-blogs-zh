- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-18 04:47:10'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: 'Intelligent Trading: Using J48 Decision Tree Classifier to Dynamically Allocate
    Next Day Position in Stocks or Bonds'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[http://intelligenttradingtech.blogspot.com/2010/02/prior-introduction-using-simple-model.html#0001-01-01](http://intelligenttradingtech.blogspot.com/2010/02/prior-introduction-using-simple-model.html#0001-01-01)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The prior introduction using a simple model to determine next weeks change based
    on the S&P 500 index and VIX did not look very promising, although hopefully it
    served to familiarize yourself with how classification is used in augmenting trading
    decisions. Wouldn't it be nice if we had something that performed a little better?
  prefs: []
  type: TYPE_NORMAL
- en: Well, let's look at an application of using a decision tree type classification
    in order to predict whether to invest in stocks or bonds one day ahead of time.
  prefs: []
  type: TYPE_NORMAL
- en: We will use a very simple input model stimulus in order to arrive at a decision.
  prefs: []
  type: TYPE_NORMAL
- en: The following will be used as input attributes.
  prefs: []
  type: TYPE_NORMAL
- en: 1) VIX 1 day change
  prefs: []
  type: TYPE_NORMAL
- en: 2) TLT 1 day change
  prefs: []
  type: TYPE_NORMAL
- en: 3) SPY 1 day change
  prefs: []
  type: TYPE_NORMAL
- en: 4) VIX 5 day momentum
  prefs: []
  type: TYPE_NORMAL
- en: 5) TLT 5 day momentum
  prefs: []
  type: TYPE_NORMAL
- en: 6) SPY 5 day momentum
  prefs: []
  type: TYPE_NORMAL
- en: The VIX is used as a volatility proxy to measure fear, which leads (presumably)
    to flights to safer instruments (bonds).
  prefs: []
  type: TYPE_NORMAL
- en: The TLT is the iShares Barclays 20+ Year Treas Bond ETF used to track treasury
    bonds with an average duration of 20 years.
  prefs: []
  type: TYPE_NORMAL
- en: 'The SPY is an ETF that tracks the general market index: S&P500\.'
  prefs: []
  type: TYPE_NORMAL
- en: The remaining 5 day momentum attributes are simply nominal attributes of UP
    or DN used to generally ascertain the momentum of the index over the last 5 days.
    In addition to the input attributes, we append one output attribute which is the
    superior instrument to invest in the following day-- SPY or TLT (stocks or bonds).
    This is what we are trying to predict and decide upon. The training and testing
    data sample is from the period 7/31/2002 up until present.
  prefs: []
  type: TYPE_NORMAL
- en: By entering the information into Weka (via .csv, see prior tutorials), we will
    choose the J.48 decision tree learner and use 90%/10% training/test split in order
    to develop a model tree that will predict which class of instrument to invest
    in based upon the prior days input stimulus.
  prefs: []
  type: TYPE_NORMAL
- en: '[![](img/b65a9f2c7976bae8197054a289d74c84.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjfHCZvDIu2KeCy3Lyol51LhiSXwtkUbCEYqwq57T0ZySoGnb8QUhTfHHS6ovdvLHcP4caq49xHQMQFOqm7Pz_L1FwITe5tSOsOj2LpZRw2BmhvVkvIyGAGZoErA_tVihFOt8j4FA6G4BY/s1600-h/fig1_tree2_raw2.jpg)'
  prefs: []
  type: TYPE_NORMAL
- en: Fig 1\. Resulting Model Decision Tree
  prefs: []
  type: TYPE_NORMAL
- en: 'The decision tree can be read from the top down as making a decision based
    upon certain conditions. I.e. If we traverse the far left branch for example,
    it would give us the following rule:'
  prefs: []
  type: TYPE_NORMAL
- en: IF 5 day SPY momentum is DN and 1 day TLT change is <=.91% and 5 day TLT momentum
    is UP and 5 day VIX momentum is UP then
  prefs: []
  type: TYPE_NORMAL
- en: invest the next day in SPY.
  prefs: []
  type: TYPE_NORMAL
- en: We can traverse each branch similarly to obtain an all encompassing set of rules
    to make a decision on what to invest in the following day.
  prefs: []
  type: TYPE_NORMAL
- en: Although the tree looks a bit daunting, if you can program the rule set into
    your favorite language, it is a simple matter for the algorithm to take that model
    and process it forward.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, we want to see if the prediction scheme was any better or worse than
    guessing.
  prefs: []
  type: TYPE_NORMAL
- en: '[![](img/b284ad75d98ac721495d02896216a0cb.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjMxPa_STm5q-cM7cklIDcKnF-ven6TOVUs38iDht2IwVzxVtS5huiJGne7DVOAh2GW_kXuNb5O1gganpouTPZfBmxgc2CckWGjxqgqhmGy9VzmOCHXp7KSJx6h_fETj8YlQTMDRgpi-LY/s1600-h/fig2_results_raw2.jpg)'
  prefs: []
  type: TYPE_NORMAL
- en: Fig 2\. 90/10 split train/validation results of J.48 Model Tree
  prefs: []
  type: TYPE_NORMAL
- en: The results are pretty good. Using a very simple and intuitive model, we were
    able to select the better instrument to buy with a 59% success rate on the 10%
    out of sample validation set. The same type of methodology can be used to select
    between trading systems with a little ingenuity.
  prefs: []
  type: TYPE_NORMAL
- en: '[![](img/1fa32ee80d32b0fc0f6b3bc1afc851e9.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgPj9wuNNqr7CI4jbwqTaWnRuyLoFrDr6Ks4pGCF5GOXl2n64Pwi0HkflGNZPwsxHm0PA8Jqt9S7RcwrSjszZSOcxzhT-C8mZoXrWHmjx6skrnTvhIPEcsQ6_L_7kh3WuCyh_VgQnrqljc/s1600-h/fig3_eq_curve.jpg)'
  prefs: []
  type: TYPE_NORMAL
- en: Fig 3\. Equity Curve comparison of Learner System to investment classes on out
    of sample data
  prefs: []
  type: TYPE_NORMAL
- en: Finally, we take a look at the equity curve of investing in
  prefs: []
  type: TYPE_NORMAL
- en: 1) The results of the classifier system we modeled
  prefs: []
  type: TYPE_NORMAL
- en: 2) Investing in SPY or TLT alone (Stocks or Bonds)
  prefs: []
  type: TYPE_NORMAL
- en: 3) Investing half in each
  prefs: []
  type: TYPE_NORMAL
- en: Notice the terminal wealth results from our system only slightly beat
  prefs: []
  type: TYPE_NORMAL
- en: all of the other systems. It's a good example of how you might have a good hit
    rate and only moderate improvement in net results, since hit rate does not account
    for magnitude. In addition, the costs associated with commission and slippage
    from trading many times in an out would likely overcome the systematic edge. Later
    on as we discuss Genetic Algorithms, we will see there are many other ways to
    optimize.
  prefs: []
  type: TYPE_NORMAL
- en: As always, please do your own due diligence and thoroughly verify any results
    you may use to make decisions in your own trading.
  prefs: []
  type: TYPE_NORMAL
