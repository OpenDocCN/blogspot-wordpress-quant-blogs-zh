- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-12 18:53:40'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: CSSA | new concepts in quantitative research
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://cssanalytics.wordpress.com#0001-01-01](https://cssanalytics.wordpress.com#0001-01-01)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The premise of using either time-series momentum or “trend-following” using
    moving averages is the same only the math differs very slightly (see [Which Trend
    Is Your Friend? by AQR](https://www.aqr.com/Insights/Research/Journal-Article/Which-Trend-Is-Your-Friend)):
    using some fixed lookback you can time market cycles and capture more upside than
    downside and therefore improve performance vs buy and hold OR at the very least
    improve return versus downside risk. The problem lies in the “fixed” portion of
    the description: markets as we know are non-stationary and business cycles can
    vary widely.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: In 2020, the COVID-19 selloff was unprecedented in its speed and ferocity relative
    to past corrections. The chart below from [“Towards Data Science”](https://towardsdatascience.com/understanding-the-2020-us-stock-market-drop-using-data-visualizations-bccd2d91bf9f)
    shows a comparison of the drawdown depth and number of days it took to get near
    the bottom.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: '[![](img/09d86b84769b0936e649233837fed23c.png)](https://cssanalytics.files.wordpress.com/2020/12/covid-drawdown.png)'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: What you can also gather from the chart above is that corrections in 2015 and
    2018 were also relatively fast selloffs and that ***this may be a defining feature
    of the modern environment***. One can speculate rationally as to the cause of
    this situation; monetary policy driven asset bubbles via low interest rates that
    artificially inflate assets like balloons that expel quickly when the air is removed,
    and/or computerized trading that take advantage of sellers by moving prices rapidly
    away as pressure increases. Regardless of the reason, the reality is that markets
    seem to take the escalator up and the elevator down in today’s day and age. Traditional
    methods that rely on linear and static time-based lookbacks have been doing quite
    poorly which is not surprising. An article chronicling the struggles of trend-followers
    was posted on Bloomberg
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: '[![](img/4cf9ad053ce307c25d39814f709a5d30.png)](https://cssanalytics.files.wordpress.com/2020/12/the-trend-isnt-always-your-friend.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: 'As you can see CTA’s have not been having an easy ride as of late and their
    struggles seemed to start around 2015\. I know what some of you are thinking:
    tactical long-only trend-following with ETFs is not the same as long/short hedge
    funds that trade futures. You are right and wrong: right in the sense that long
    only ETF has a tendency to profit from asset class positive drift, whereas long/short
    has no such favorable tailwinds especially with low interest rates. But wrong
    in the sense that this doesn’t discount the timing component of returns which
    has been unfavorable for equity indices. The problem is more straightforward when
    you consider how trend-following generates excess returns. In a fantastic [post
    by Philosophical Economics](http://www.philosophicaleconomics.com/2016/01/gtt/)
    he illustrates exactly what is responsible for trend-following P/L:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，最近CTA并不容易，而且他们的困难似乎始于2015年左右。我知道有些人在想什么：只采取战术性长期跟随ETF的方法与交易期货的多空对冲基金并不相同。你们对和错的：对的是只有ETF的长期持有倾向于从资产类别的正向漂移中获利，而多空对冲则没有这样有利的尾风，特别是在低利率环境下。但错误的是这并不排除时间组成部分的收益，而这对股票指数来说并不利。当考虑趋势跟随如何产生超额收益时，问题更为直接。在哲学经济学的一篇[绝妙的文章中](http://www.philosophicaleconomics.com/2016/01/gtt/)，他准确地说明了趋势跟随的盈亏情况由什么负责：
- en: '[![](img/2bf97ffe9a5eaa9669eb5a776f22eafe.png)](https://cssanalytics.files.wordpress.com/2020/12/trend-following-math.jpg)'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[![](img/2bf97ffe9a5eaa9669eb5a776f22eafe.png)](https://cssanalytics.files.wordpress.com/2020/12/trend-following-math.jpg)'
- en: The bottom line is that if markets are moving faster than the moving average
    oscillation period (roughly half the lookback) then you will lose money via whipsaw.
    This is made worse if the oscillation period is asymmetric such as when it takes
    longer to go up than down. Most trend-followers or tactical managers employ a
    1-year or 6-month lookback. These can be too long if the drawdown materializes
    within less than a quarter. Furthermore using holding periods that are monthly
    rather than daily inspection also introduces more luck into the equation since
    drawdowns can happen at any time rather than on someone’s desired rebalancing
    period. Savvy portfolio managers use multiple lookbacks and holding periods in
    order to reduce the variance associated with not knowing what the oscillation
    period will look like. ***However this does not address the core problem which
    requires a more dynamic or nonlinear approach***.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 如果市场的波动速度超过移动平均振荡周期（大约为回看期的一半），那么你将通过**鞭挞**（whipsaw）亏钱。如果振荡周期是不对称的，比如向上的时间比向下的时间长，情况就更糟了。大多数趋势跟随者或战术管理者使用1年或6个月的回看期。如果回撤在不到一个季度内发生，这些期限可能太长了。此外，使用月度持有期而不是每日检查还会引入更多的运气因素，因为回撤可能随时发生，而不是在某人期望的再平衡周期上发生。精明的投资组合经理使用多个回看期和持有期，以减少由于不知道振荡周期将是什么样子而产生的方差。***然而，这并没有解决核心问题，这需要更具动态或非线性的方法。***
- en: 'In a [recent paper by Garg et. al called “Momentum Turning Points”](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3489539)
    they explore the nature of dynamic trend-following or time-series momentum strategies.
    They call situations where short-term trends and long-term trends disagree to
    be “turning points” and the number of these turning points determine trend-following
    performance. [AllocateSmartly provides a fantastic post](https://allocatesmartly.com/momentum-turning-points/?aff=634)
    reviewing the paper and shows the following chart:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在[Garg等人最近发表的名为“动量转折点”的论文](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3489539)中，他们探讨了动态趋势跟随或时间序列动量策略的性质。他们将短期趋势和长期趋势不一致的情况称为“转折点”，而这些转折点的数量决定了趋势跟随的表现。[AllocateSmartly提供了一篇绝妙的文章](https://allocatesmartly.com/momentum-turning-points/?aff=634)审查了这篇论文，并展示了以下图表：
- en: '[![](img/2e504c7b6c8037164c79eee2793ad844.png)](https://cssanalytics.files.wordpress.com/2020/12/impact-of-turning-points.png)'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[![](img/2e504c7b6c8037164c79eee2793ad844.png)](https://cssanalytics.files.wordpress.com/2020/12/impact-of-turning-points.png)'
- en: '***A greater frequency of turning points is consistent with a faster oscillation
    as described by Philosophical Economics.*** As you can see when the number of
    turning points increases performance tends to decrease for traditional trend-following
    strategies which tend to rely on longer term and static lookbacks.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '***更频繁的转折点与更快的振荡是一致的，这与哲学经济学所描述的一样。***正如你所看到的，当转折点的数量增加时，传统的趋势跟随策略的表现往往会下降，这些策略倾向于依赖于更长期和静态的回看期。'
- en: 'Garg. et al in the paper classify different market states that result from
    short-term versus long-term trend-following signals:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Garg等人在论文中对由短期与长期趋势跟随信号产生的不同市场状态进行分类：
- en: 'Bull: ST UP, LT UP'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 牛市：短期上升，长期上升
- en: 'Correction: ST DOWN, LT UP'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 修正：短期下降，长期上升
- en: 'Bear: ST DOWN, LT DOWN'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 熊市：短期下降，长期下降
- en: 'Rebound: ST UP, LT DOWN'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 反弹：短期上升，长期下降
- en: 'In reviewing optimal trend-following lookbacks as a function of market state
    the paper came up with an interesting conclusion:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在审查市场状态作为趋势跟随回溯期的最佳函数时，该论文得出了一个有趣的结论：
- en: '“The conclusion from our state-dependent speed analysis: **elect slower-speed
    momentum after Correction months and faster-speed momentum after Rebound months**“'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: “我们的状态依赖速度分析的结论：**在修正月份后选择较慢的动量，而在反弹月份后选择较快的动量**“
- en: Unfortunately their solution to make such adjustments relies on longer-term
    optimization based on previous data. Even if this is walk-forward there is a considerable
    lag in the adjustment period. There is a simple way to account for oscillations
    that may occur more rapidly and potentially in a non-linear fashion. ***To state
    the obvious the concept of a “drawdown” is itself a nonlinear variable that is
    independent of time and is the most directly tied to investor profits*** which
    makes it a good candidate for making adjustments. Furthermore small drawdowns
    (corrections) based on the analysis presented in the paper above require longer
    lookbacks, while large drawdowns (that precede rebounds) require shorter/faster
    lookbacks. ***If we can use a relative measure of historical drawdowns within
    an adaptive framework this should more directly solve the problem.*** In this
    case we don’t care about how many turning points there are (which is the assumption
    made by choosing a static lookback) but rather how to adjust to them in a logical
    way.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，他们解决此类调整的方法依赖于基于先前数据的长期优化。即使这是向前走的，调整期间也存在相当大的滞后。有一种简单的方法可以解释可能更快地发生且可能以非线性方式发生的振荡。
    ***显而易见，“回撤”的概念本身是一个与时间无关且与投资者利润直接相关的非线性变量***，这使其成为进行调整的良好候选。此外，基于上述论文中提出的分析，小回撤（修正）需要较长的回溯期，而大回撤（在反弹之前发生）则需要较短/较快的回溯期。
    ***如果我们可以在自适应框架内使用历史回撤的相对度量，这应该更直接地解决问题。*** 在这种情况下，我们不关心有多少个转折点（这是选择静态回溯期所做的假设），而是如何以逻辑方式调整它们。
- en: '**The Simple Solution**'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '**简单解决方案**'
- en: 'The first step is to create a series of drawdowns from all-time highs (it isn’t
    critical to choose all-time, 1-year highs work well too). Then find the empirical
    distribution of such drawdowns using some lookback using a percentile ranking
    over the past 6 months (again not critical can use longer or shorter or a combination).
    I use the square of this value for the simple reason that we want to ignore small
    drawdowns and focus on larger drawdowns to make lookback length adjustments (remember
    corrections require long-term lookbacks and rebounds after large drawdowns require
    short-term lookbacks). Next choose a short-term trend-following lookback and a
    long-term lookback. In this case I chose 50 and 200 which are often followed by
    market participants via their respective moving averages but again the parameter
    choice is not critical. One practical point is that it is inefficient to use a
    really short-term lookback for tactical trading such as 20 days. We can calculate
    the optimal alpha of a moving average using the exponential moving average framework
    as follows:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是从历史最高点创建一系列回撤（选择全部时间并不关键，选择1年最高点也可以）。然后使用一些回溯期找到这些回撤的经验分布，使用过去6个月的百分位排名（再次强调，可以使用更长或更短或其组合）。我使用此值的平方的简单原因是我们要忽略小回撤并专注于更大的回撤以进行回溯期长度的调整（记住，修正需要长期回溯期，大回撤后的反弹需要短期回溯期）。接下来选择一个短期趋势跟随回溯期和一个长期回溯期。在这种情况下，我选择了50和200，这些值经常由市场参与者通过各自的移动平均线进行关注，但是参数选择并不关键。一个实用的观点是，在战术交易中使用真正短期的回溯期（例如20天）是低效的。我们可以使用指数移动平均线框架计算移动平均的最佳α，方法如下：
- en: Percentile Ranking of Drawdowns ^ 2 (squared) = P
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 回撤百分位排名^ 2（平方）= P
- en: Short- Term Alpha= ST
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 短期α= ST
- en: Long-Term Alpha= LT
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 长期α= LT
- en: Optimal Alpha= P*ST+(1-P)*LT
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳α= P*短期+(1-P)*长期
- en: 'We then calculate an adaptive moving average using the optimal alpha which
    looks like this:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们使用最佳α计算自适应移动平均，其形式如下：
- en: '[![](img/e9a4d90cb88513ef832bc8640622c44a.png)](https://cssanalytics.files.wordpress.com/2020/12/adaptive-momentum-2.png)'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '[![](img/e9a4d90cb88513ef832bc8640622c44a.png)](https://cssanalytics.files.wordpress.com/2020/12/adaptive-momentum-2.png)'
- en: 'Notice that the adaptive moving average gets slower as the market makes new
    highs and faster after large drawdowns exactly as we would expect. The result
    is that it permits both earlier exits and entries into the market. The latter
    is far more important given the tendency for the market to make “V-shaped” recoveries.
    But to test this theory we need to backtest over a long time period and compare
    to traditional static lookbacks. Instead of using fixed holding periods we will
    do daily signal generation at the close. Since an adaptive moving average is not
    as effective as a simple moving average as a low pass filter it is important to
    filter the price when using a traditional price vs moving average strategy. To
    filter price I take the 10-day moving average of price (could be 3 could be 15
    doesn’t matter that much). Note that the price (or filtered price) vs moving average
    in an exponential moving average framework is mathematically equivalent to momentum.
    **Therefore using a price vs ema in this context is basically an adaptive momentum
    calculation.** Here is what Adaptive Momentum looks like vs typical static lookbacks:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，随着市场创新高后，自适应移动平均值变慢，而在大幅回撤后变得更快，这正是我们所期望的。其结果是允许更早地退出和进入市场。后者更重要，因为市场有形成“V”形回升的倾向。但是，为了测试这个理论，我们需要在长时间段内进行回溯测试，并与传统的静态回溯进行比较。我们将不使用固定的持有期，而是在收盘时进行每日信号生成。由于自适应移动平均值作为低通滤波器的效果不如简单移动平均值，因此在使用传统价格与移动平均值策略时，过滤价格是很重要的。为了过滤价格，我取价格的10日移动平均值（可以是3天，也可以是15天，没有太大关系）。请注意，在指数移动平均值框架中，价格（或经过滤的价格）与移动平均值之间的关系在数学上等同于动量。**因此，在这种情况下使用价格与ema基本上是一种自适应动量计算。**下面是自适应动量与典型静态回溯的对比：
- en: '[![](img/666570e8ff44bfb970a244bcc5199ed2.png)](https://cssanalytics.files.wordpress.com/2020/12/adpative-momentum-1.png)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '[![](img/666570e8ff44bfb970a244bcc5199ed2.png)](https://cssanalytics.files.wordpress.com/2020/12/adpative-momentum-1.png)'
- en: 'And for the quants out there here is the performance table:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些量化交易者来说，这是性能表格：
- en: '[![](img/af73cd5ae719d7cbbe10bcdc690a273e.png)](https://cssanalytics.files.wordpress.com/2020/12/adaptive-table.png)'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '[![](img/af73cd5ae719d7cbbe10bcdc690a273e.png)](https://cssanalytics.files.wordpress.com/2020/12/adaptive-table.png)'
- en: Adaptive Momentum is the best performer in terms of CAGR, but most the biggest
    difference is in risk-adjusted returns (sharpe) and higher moments (skew and kurtosis).
    Adaptive Momentum has more positive skew and lower kurtosis indicating higher
    upside/downside capture and lower tail risk. What is most impressive is that it
    does so with nearly the same number of trades as 12-month time series momentum.
    If you look carefully at the line chart you can see that Adaptive Momentum does
    much better in recent years than the static lookbacks which we would expect. Overall
    performance is impressive and this can be considered as a practical approach for
    tactical asset allocation. An interesting note is that if you dispense with the
    percentile ranking in the calculation and simply increase the lookback to the
    maximum when the market is making new highs, and decrease the lookback to the
    minimum when the market is not making new highs you get pretty similar performance.
    Overall, the strategy doesn’t exhibit much parameter sensitivity at all.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '自适应动量在CAGR方面表现最佳，但最大的区别在于风险调整后的回报（夏普）和更高的矩（偏度和峰度）。自适应动量具有更多的正偏度和较低的峰度，表明更高的上行/下行捕获和较低的尾部风险。最令人印象深刻的是，它几乎与12个月时间序列动量一样多地进行交易。如果仔细观察线图，您会发现自适应动量在最近几年的表现比我们预期的静态回溯要好得多。总体表现令人印象深刻，这可以被视为一种用于战术资产配置的实用方法。有趣的是，如果在计算中放弃百分位排名，并且在市场创新高时将回溯期增加到最大，并在市场不创新高时将回溯期减小，您会得到相似的表现。总体而言，该策略几乎不表现出任何参数敏感性。  '
- en: While this simple solution is not a perfect approach, it certainly does make
    intuitive sense and produces worthwhile results. Given a choice between static
    and adaptive/dynamic I would personally take this type of approach for real-life
    trading.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这种简单的解决方案并不是完美的方法，但它确实具有直观的意义，并产生了有价值的结果。在静态和自适应/动态之间选择时，我个人会选择这种类型的方法进行实际交易。
