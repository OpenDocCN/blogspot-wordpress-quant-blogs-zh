- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: '```'
- en: 'category: 未分类'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 分类：未分类
- en: 'date: 2024-05-18 06:43:52'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：2024-05-18 06:43:52
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '```'
- en: 'Manipulation Using Compliance Tools: Equities Analysis Inspired By Allston
    Case | Mechanical Markets'
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用合规工具进行操纵：Allston案例启发的股票分析 | 机械市场
- en: 来源：[https://mechanicalmarkets.wordpress.com/2015/03/31/manipulation-using-compliance-tools-equities-analysis-inspired-by-allston-case/#0001-01-01](https://mechanicalmarkets.wordpress.com/2015/03/31/manipulation-using-compliance-tools-equities-analysis-inspired-by-allston-case/#0001-01-01)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 来源：[https://mechanicalmarkets.wordpress.com/2015/03/31/manipulation-using-compliance-tools-equities-analysis-inspired-by-allston-case/#0001-01-01](https://mechanicalmarkets.wordpress.com/2015/03/31/manipulation-using-compliance-tools-equities-analysis-inspired-by-allston-case/#0001-01-01)
- en: Recently, Allston has been [accused](http://www.bloomberg.com/news/articles/2015-03-31/allston-said-to-face-cftc-investigation-for-alleged-manipulation)
    of engaging in market manipulation on the CME. In this post, I’ll discuss why
    these [specific allegations](http://www.bloomberg.com/news/articles/2014-08-29/allston-accused-by-hft-rival-of-manipulative-trading)
    are extraordinary and examine whether similar manipulation could be occurring
    on equities markets.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，Allston被[指控](http://www.bloomberg.com/news/articles/2015-03-31/allston-said-to-face-cftc-investigation-for-alleged-manipulation)在CME进行市场操纵。在这篇文章中，我将讨论为什么这些[具体指控](http://www.bloomberg.com/news/articles/2014-08-29/allston-accused-by-hft-rival-of-manipulative-trading)不同寻常，并检查是否有可能在股票市场上发生类似的操纵。
- en: The alleged manipulation is much more serious than ordinary spoofing. Spoofing
    involves a trader entering orders with the intention of artificially moving market
    prices and without any desire for those orders to actually execute. There are
    plenty of descriptions available detailing how spoofing defrauds market participants
    and damages public confidence in markets. What makes this case special is that
    the alleged spoofing makes use of an exchange’s Self-Match Prevention. Self-matching
    (also called “self-trading”) is a separate method employed by manipulators who,
    by executing fake trades, induce participants into thinking an instrument is trading
    away from its market value. Because self-matching is so damaging, regulators frown
    on it even when it’s accidental. Self-Match Prevention is an exchange feature
    designed to prevent such accidents, particularly those by algorithmic traders,
    who can inadvertently self-match even when they use strong countermeasures. It
    is thus, at its core, a compliance tool.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 被指控的操纵比普通的幌骗更为严重。幌骗涉及交易员输入旨在人为移动市场价格的订单，且不希望这些订单实际执行。有很多描述详细说明了幌骗如何欺骗市场参与者并损害市场信心。使这个案子特别的是，被指控的幌骗利用了交易所的自我匹配预防功能。自我匹配（也称为“自我交易”）是操纵者使用的一种
    separate method，通过执行假交易，使参与者认为某工具的交易价格偏离其市场价值。因为自我匹配非常具有破坏性，监管机构即使在其是意外的情况下也不悦。自我匹配预防是交易所的一个功能，旨在防止此类意外发生，特别是那些由算法交易员发生的意外自我匹配，即使他们使用了强大的对策。因此，在本质上，它是一个合规工具。
- en: If the allegations turn out to be true, this case is unique in that a seemingly
    reputable trading company used a tool with only one purpose, increased compliance,
    to manipulate the market. I have always assumed that exchanges and regulators
    heavily monitor the usage of Self-Match Prevention. It seems virtually inevitable
    that somebody using it manipulatively would be caught, which makes me wonder if
    any traders involved thought they were above the law. It’s either that, or there
    would have been such a lack of compliance culture at Allston, that it never even
    crossed their minds to consider the legality of a trading strategy before running
    it. My guess would be the latter, but I’m not sure which possibility should be
    more concerning. In either case, if Allston is guilty, it indicates that potentially
    it could have been engaging in manipulative trading on an even broader scale.
    I want to stress that my intuition here is that they are not guilty; the whole
    thing seems a little too absurd for reality. Still, I wonder if its recent [cessation](http://www.bloomberg.com/news/articles/2015-01-23/chicago-speed-trader-allston-withdraws-from-u-s-stock-market)
    of equities trading is more than coincidence. Equities are considered a heavily
    regulated asset class, so I imagine shadier trading companies are better off steering
    clear of them.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些指控被证明是真实的，这个案例的独特之处在于，一家看似信誉良好的交易公司使用了一个只有一个目的的工具，即增加合规性，来操纵市场。我一直认为交易所和监管机构对Self-Match
    Prevention的使用进行了严格的监控。似乎几乎不可避免的是，使用它进行操纵的人会被抓住，这让我想知道涉及的交易员是否认为自己不受法律约束。要么是这样，要么Allston的合规文化如此之差，以至于他们在运行交易策略之前甚至没有考虑到其合法性。我猜测是后者，但我不确定哪个可能性更令人担忧。无论如何，如果Allston有罪，这表明它可能参与了更广泛的操纵性交易。我想强调的是，我的直觉是他们没有罪；这一切似乎有点超现实。然而，我仍在想，如果它最近停止了股票交易是否纯属巧合。[股票被视为一个高度监管的资产类别，所以我想，更可疑的交易公司最好还是远离它们。
- en: Because of this possibility, I wanted to check if similar manipulation could
    have been occurring on US equities markets. Before you get excited, I’ll spoil
    the surprise by saying that I didn’t find any smoking gun. Still, there are a
    surprisingly large number of market data events that I suspect are due to Self-Match
    Prevention. Exchange surveillance could well be doing similar analysis, but also
    checking the identities of traders.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这种可能性，我想检查一下是否美国股票市场也发生了类似的操作。在你激动之前，我会透露一下我没有找到任何直接的证据。然而，令人惊讶的是，有许多市场数据事件我怀疑是由于自对冲预防造成的。交易所监控可能正在做类似的分析，但也在检查交易员的身份。
- en: Self-Match Prevention for US Equities
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 美国股票的自对冲预防
- en: To see one way in which Self-Match Prevention could be used as part of a manipulation
    scheme, an example given in Nasdaq’s documentation is illuminating (see “Cancel
    Oldest” on [p.2](https://www.nasdaqtrader.com/content/productsservices/trading/selfmatchprevention.pdf)).
    In this example the market has three resting orders on the offer, one of which
    came from market participant (MPID) A. MPID A then sends a new buy order at the
    same price as those resting sell orders. To prevent a self-match, Nasdaq cancels
    the resting order from MPID A, after first executing the other two orders. Now,
    in this case the order cancelled by Self-Match Prevention was at the back of the
    queue, so almost certainly did not induce the other two orders into being submitted.[[1](#bottom1)]
    It’s still possible that by being at the back of the queue, it affected the behavior
    of the orders in front of it, but that kind of subtle manipulation would be hard
    to detect.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 为了了解自对冲预防可能被用作操纵计划的一部分的方式，纳斯达克文档中给出的一个例子很有启发性（见[第2页](https://www.nasdaqtrader.com/content/productsservices/trading/selfmatchprevention.pdf)上的“取消最旧订单”）。在这个例子中，市场有三份挂单在卖出价上，其中一份来自市场参与者（MPID）A。然后MPID
    A发送一个新的买入订单，价格与那些挂出的卖出订单相同。为了防止自对冲，纳斯达克首先执行了其他两个订单，然后取消了来自MPID A的挂单。现在，在这个案例中，被自对冲预防取消的订单在队列的末尾，所以几乎肯定没有促使其他两个订单提交。[[[1](#bottom1)]]
    仍然有可能，由于它在队列的末尾，它影响了它前面的订单的行为，但这种微妙的操纵很难被检测到。
- en: 'The most readily detectable manipulation might be similar to what was detailed
    in a potentially related [lawsuit](http://blogs.wsj.com/moneybeat/2015/03/12/was-john-doe-manipulating-treasury-futures-new-lawsuit-says-yes/)
    by HTG. I imagine spoofing that makes use of Self-Match Prevention in its simplest
    form would look something like:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 最容易被检测到的操纵行为可能与HTG提起的[相关诉讼](http://blogs.wsj.com/moneybeat/2015/03/12/was-john-doe-manipulating-treasury-futures-new-lawsuit-says-yes/)中所详细描述的类似。我想象的利用自我匹配预防的最简单形式的伪造行为可能看起来像这样：
- en: Market is 10.00/10.02
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 市场价格为10.00/10.02。
- en: Spoofer adds new sell order at 10.01
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 伪造者在大约10.01的价格添加新的卖出订单。
- en: Victim follows spoofed order by adding a sell order of its own at 10.01
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 受害者通过在10.01添加自己的卖出订单来跟随伪造的订单。
- en: Spoofer sweeps the entire offer, relying on Self-Match Prevention to cancel
    its prior sell order
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 伪造者清扫整个报价，依靠自我匹配预防来取消其先前的卖出订单。
- en: How might orders that are cancelled by exchange Self-Match Prevention appear
    in market data? My guess is that, for events like those described in the above
    example, an order deleted message would be distributed in the same packet as an
    order executed message. In such events, there is only one order entry message
    sent to the exchange that would trigger both market data messages; it would make
    sense for the exchange to distribute those market data messages in one burst –
    that is, one network packet. A search for these simultaneous messages reveals
    a substantial number on Bats BZX and Nasdaq, but few on EdgeX. Nasdaq does offer
    an [expensive FPGA feed](http://www.nasdaqtrader.com/TraderNews.aspx?id=dn2012-13)
    that reduces message queueing (and presumably the number of messages agglomerated
    into a packet). The data analyzed here did not come from that feed, but the results
    are similar if the deleted and executed messages are considered “simultaneous”
    when the exchange timestamped them in the same microsecond.[[2](#bottom1)]
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 交易所自我匹配预防取消的订单在市场数据中可能如何表现？我猜测，对于上面例子中描述的事件，一个删除订单的消息会与一个执行订单的消息在同一个包中分发。在这种情况下，只有一个订单条目消息发送到交易所会触发两个市场数据消息；交易所将这些市场数据消息一次性分发——也就是说，在一个网络包中。对这些同时消息的搜索在Bats
    BZX和纳斯达克发现了大量数据，但在EdgeX上很少。纳斯达克确实提供了一个[昂贵的FPGA数据流](http://www.nasdaqtrader.com/TraderNews.aspx?id=dn2012-13)，可以减少消息排队（以及
    presumably the number of messages agglomerated into a packet）。这里分析的数据没有来自那个数据流，但如果考虑交易所将删除和执行消息标记为“同时”时，这些消息在同一个微秒中，那么结果也是类似的。[2](#bottom1)
- en: What we look for next is the difference between the creation times of the deleted
    and executed orders. In our example above, this would be the interval between
    3 and 2\. If there’s widespread spoofing, we would expect the executed order to
    perform worse if it was added after the order that was later deleted by Self-Match
    Prevention (i.e. step 4 would tend to be very toxic sweep). I’d be particularly
    suspicious in instances where that time interval is short enough for the second
    order to have been submitted by an HFT (or other algo) in response to the first.
    The figure below plots the pre and post-trade performance of executed orders,
    split by this time interval.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我们接下来要寻找的是删除订单和执行订单创建时间之间的差异。在我们上面的例子中，这将是在3和2之间的间隔。如果存在广泛的伪造行为，我们预计如果执行订单是在后来被自我匹配预防删除的订单之后添加的，那么执行订单的表现会较差（即第四步往往会是非常有毒的清扫）。在那种时间间隔足够短的情况下，我特别怀疑是高频交易（或其他算法）在第一个订单之后提交了第二个订单。下面的图表根据这个时间间隔绘制了执行订单的买卖交易表现。
- en: '[![inet_trades_with_del_inSameBC_splitByCreateTimeDiffInExec-Del_800](img/1644509a05989363d716511ad347c463.png)](https://mechanicalmarkets.wordpress.com/wp-content/uploads/2015/03/inet_trades_with_del_insamebc_splitbycreatetimediffinexec-del_1.png)'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '![inet_trades_with_del_inSameBC_splitByCreateTimeDiffInExec-Del_800](https://mechanicalmarkets.wordpress.com/wp-content/uploads/2015/03/inet_trades_with_del_insamebc_splitbycreatetimediffinexec-del_1.png)'
- en: 'Pre and Post-trade performance of trades on Nasdaq that were received in the
    same network packet as a delete message from about 6 days in August. The order
    deleted must have had the same side as the passive side of the trade. Includes
    only messages that deleted orders that were resting at the very front of the queue
    (including deletes of orders that were alone at the price level) – this excludes
    a fair number of otherwise qualifying events, but I wanted to stay close in spirit
    to our example. “ReactionTime” refers to the creation timestamp of the executed
    order subtracted from the creation timestamp of the deleted order. If a computer,
    colocated with Nasdaq, reacted to the order that was later cancelled, you’d expect
    to see it in the “(0,200us)” group. Humans and non-colocated computers reacting
    to that order would appear in the “(200us,Inf)” group. Bottom Panel: Share Volume
    on Nasdaq including fiducial trade'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在八月份的约六天内，纳斯达克上那些与删除消息在同一网络数据包中接收的交易的前后交易表现。被删除的订单必须与交易的被动方相同。只包括那些位于队列最前面的删除订单（包括那些在该价格水平上单独存在的订单）的信息——这排除了许多其他符合条件的
    event，但我想要保持与我们的例子在精神上接近。“ReactionTime”指的是执行订单的创建时间戳减去被删除订单的创建时间戳。如果一个与纳斯达克共置的计算机对后来被取消的订单做出了反应，你期望在“(0,200us)”组中看到它。人类和非共置计算机对那个订单做出的反应将出现在“(200us,Inf)”组中。底部面板：纳斯达克上的股票成交量，包括基准交易。
- en: As you can see, there’s no smoking gun here. There are actually fewer events
    in the groups with a positive reaction time than a negative one. And the positive
    reaction time groups do not have noticeably different post-trade performance.
    This doesn’t prove anything of course, but I think it’s suggestive that any manipulation
    using this method occurs infrequently at most. Note that the figure does include
    simultaneous deletes and trades that are at different prices.[[3](#bottom1)]
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，这里并没有直接的证据。实际上，反应时间正向的事件组比反应时间负向的事件组少。而且，正向反应时间组在交易后的表现并没有明显不同。这当然不能证明任何事情，但我想说的是，使用这种方法操纵市场的可能性最少也是不经常发生的。请注意，图中确实包括了同时删除和价格不同的交易。[[3](#bottom1)]
- en: Again, the unique aspect here is the use of a compliance tool in alleged market
    manipulation. The manipulation itself is most likely mundane. There are many [examples](http://dealbreaker.com/2012/06/libor-was-whatever-barclays-wanted-it-to-be/)
    of manipulation far more consequential and brazen. Self-Match Prevention could
    easily be modified to prevent it from being used in this way.[[4](#bottom4)] Of
    course, spoofing could still be done with countless other methods. If it were
    up to me, I’d probably leave it the way it is and allow it to function as a sort
    of spoofer’s honeypot.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，这里独特的方面是使用合规工具进行所谓的市场操纵。操纵本身最有可能是平凡的。有很多[例子](http://dealbreaker.com/2012/06/libor-was-whatever-barclays-wanted-it-to-be/)显示，操纵行为更有意义且更加大胆。自我匹配预防功能很容易被修改，以防止它以这种方式使用。[[4](#bottom4)]当然，欺骗仍然可以通过无数其他方法进行。如果由我决定，我可能会保持现状，让它作为一个欺骗者的陷阱发挥作用。
- en: If true, these allegations would be unhelpful in the effort to convince conspiracy
    theorists that large HFTs are subject to the same rules as everybody else. This
    is really too bad, because my impression is that the vast majority of HFTs take
    ethics and compliance very seriously. If indeed a previously respected company
    like Allston has engaged in this sort of activity, it suggests that a few HFTs
    may be lacking proper compliance culture. The SEC has expressed a desire to [require
    HFTs to join FINRA](http://www.reuters.com/article/2015/03/25/us-sec-highspeedtrading-idUSKBN0ML1Z920150325).
    I would argue that a painless and more important reform would be to require high-volume
    proprietary traders and developers to take a short compliance course. I think
    a single day should suffice, with lots of examples and Q&A. If the course instructor
    is in-house or under NDA/privilege, then those examples could even be made directly
    relevant to a firm’s strategies. One day of new employees’ time seems like a small
    price to ensure they have some common sense about compliance.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些指控是真的，那么在说服阴谋论者大型高频交易员与其他人一样受到相同规则的约束方面将不会有帮助。这真的很糟糕，因为我的印象是，高频交易员中的绝大多数非常重视伦理和合规。如果确实像Allston这样以前受人尊敬的公司参与了这种活动，那么这表明可能有少数高频交易员缺乏适当的合规文化。美国证券交易委员会已经表达了一种愿望，即[要求高频交易员加入FINRA](http://www.reuters.com/article/2015/03/25/us-sec-highspeedtrading-idUSKBN0ML1Z920150325)。我认为，一种无痛且更为重要的改革将是要求高成交量自营交易员和开发者参加一个短期合规课程。我认为一天时间就足够了，课程中有许多示例和问答环节。如果课程讲师是公司内部人员或受保密协议/隐私保护的，那么这些示例甚至可以与公司的策略直接相关。新员工的一天时间似乎是一个很小的代价，以确保他们对合规有一些常识。
- en: '[[1](#1)] Technically it could have. A spoofer could modify an order in a way
    that sends it to the back of the queue, behind the order that it had previously
    induced into being submitted at the same price.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '[[1](#1)] 从技术上讲，它可能已经做到了。一个欺骗者可以修改订单，使其被发送到队列的末尾，位于之前诱导以相同价格提交的订单之后。'
- en: '[[2](#2)] Similar in terms of their long term post-trade performance. The pre-trade
    performance and absolute number are fairly different in the “(0,200us)” group.
    Interestingly, that’s not as true for the other 3 groups. The exchange logic that
    determines whether two market data messages are aggregated into a single packet
    may be complex, and possibly different for the FPGA feed.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '[[2](#2)] 在长期交易绩效方面相似。在“(0,200us)”组中，预交易绩效和绝对数量相当不同。有趣的是，这在其他3组中并不那么真实。决定两个市场数据消息是否聚合成一个数据包的交换逻辑可能很复杂，对于FPGA馈送可能不同。'
- en: The two methods also give substantially different results for BatsZ, with significantly
    fewer deletes and executes timestamped in the same microsecond than distributed
    in the same packet.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种方法对BatsZ的结果也大不相同，在同一微秒内删除和执行的次数明显比在同一数据包内分布的次数少。
- en: '[[3](#3)] There are fewer of these events than those with a simultaneous delete
    and execute occurring at the same price. Still, there are some. I’ve included
    an example of one below (with the prices changed by a small constant offset, and
    order IDs obfuscated):'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '[[3](#3)] 这类事件比同时发生在相同价格的删除和执行事件要少。不过，还是有一些。我在下面包含了一个示例（价格通过一个小的常数偏移量进行更改，订单ID被模糊处理）：'
- en: '[PRE0]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[[4](#4)] All that would need to be changed is for Self-Match Prevention to
    be made strictly “Cancel Both” or “Cancel Newest.” That would make it impossible
    to initiate a trade with a self-matching order.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '[[4](#4)] 需要更改的只是将自我匹配预防严格设置为“双方取消”或“取消最新”。这样将无法使用自我匹配订单启动交易。'
