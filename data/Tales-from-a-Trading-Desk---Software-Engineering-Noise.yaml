- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: æœªåˆ†ç±»'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ†ç±»ï¼šæœªåˆ†ç±»
- en: 'date: 2024-05-18 06:37:39'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¥æœŸï¼š2024-05-18 06:37:39
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: Tales from a Trading Desk | Software Engineering Noise
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: äº¤æ˜“å°æ•…äº‹ | è½¯ä»¶å·¥ç¨‹å™ªéŸ³
- en: æ¥æºï¼š[https://mdavey.wordpress.com#0001-01-01](https://mdavey.wordpress.com#0001-01-01)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¥æºï¼š[https://mdavey.wordpress.com#0001-01-01](https://mdavey.wordpress.com#0001-01-01)
- en: 'Having just spent what feels like years waiting for fibre to be available in
    my area of the woods, Three weeks ago, Iâ€™ve finally had the fibre installed into
    my house but took a few weeks to resolve the connectivity issues ğŸ˜¦ Hereâ€™s a summary
    to help anyone else following in my footsteps:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç­‰å¾…æˆ‘çš„æ—åœ°åŒºåŸŸå…‰çº¤å¯ç”¨ï¼Œæ„Ÿè§‰åƒæ˜¯ç­‰äº†å¥½å‡ å¹´ä¹‹åï¼Œä¸‰å‘¨å‰ï¼Œæˆ‘ç»ˆäºæŠŠå…‰çº¤å®‰è£…åˆ°äº†æˆ‘çš„æˆ¿å­é‡Œï¼Œä½†è§£å†³è¿é€šæ€§é—®é¢˜èŠ±äº†å‡ å‘¨æ—¶é—´ğŸ˜¦ ä»¥ä¸‹æ˜¯ä¸€ä»½æ€»ç»“ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åæ¥è€…ï¼š
- en: Iâ€™ve been running with [Plusnet](https://www.plus.net/) broadband for a long
    time. The broadband comes in on a copper phone line, into an OpenReach bridge,
    and from the bridge to a Plusnet 4 port router. Previously I had the router connected
    into Port9 (default) of the UDM Pro (WAN). This works fine, until you decide you
    want a static IP address, at which point you need to connect the OpenReach bridge
    directly into WAN which is the default Port9, and go via the UDM Pro dashboard,
    settings/internet, select Default (WAN) and in the advance section, select manual,
    and for IPv4 Connection select PPPoE, and sent the Plusnet username and password.
    This should allow the [UDM Pro](https://store.ui.com/collections/unifi-network-unifi-os-consoles/products/udm-pro)
    to PPPoE to Plusnet.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä¸€ç›´ä½¿ç”¨[Plusnet](https://www.plus.net/)å®½å¸¦ã€‚å®½å¸¦é€šè¿‡é“œè´¨ç”µè¯çº¿è¿›å…¥ï¼Œç»è¿‡OpenReachæ¡¥æ¥ï¼Œå†ä»æ¡¥æ¥å™¨æ¥åˆ°Plusnet
    4ç«¯å£è·¯ç”±å™¨ã€‚ä»¥å‰æˆ‘å°†è·¯ç”±å™¨è¿æ¥åˆ°UDM Proçš„Port9ï¼ˆé»˜è®¤ç«¯å£ï¼‰(WAN)ã€‚è¿™æ ·æ˜¯å¯ä»¥çš„ï¼Œç›´åˆ°ä½ æƒ³ä½¿ç”¨é™æ€IPåœ°å€ï¼Œè¿™æ—¶ä½ éœ€è¦å°†OpenReachæ¡¥æ¥å™¨ç›´æ¥è¿æ¥åˆ°WANï¼Œå³é»˜è®¤çš„Port9ï¼Œç„¶åé€šè¿‡UDM
    Proæ§åˆ¶é¢æ¿ï¼Œè®¾ç½®/äº’è”ç½‘ï¼Œé€‰æ‹©é»˜è®¤ï¼ˆWANï¼‰ï¼Œåœ¨é«˜çº§è®¾ç½®ä¸­ï¼Œé€‰æ‹©æ‰‹åŠ¨ï¼Œå¯¹äºIPv4è¿æ¥é€‰æ‹©PPPoEï¼Œå¹¶è¾“å…¥Plusnetç”¨æˆ·åå’Œå¯†ç ã€‚è¿™åº”è¯¥å¯ä»¥è®©UDM
    Proé€šè¿‡PPPoEè¿æ¥åˆ°Plusnetã€‚
- en: I made the decision to keep Plusnet for a period of time whilst I get Hey!Broadband
    Fibre install, and get a bearing on the quality of service. Plusnet has delivered
    a good quality of service over the last n years, but doesnâ€™t offer fibre in my
    area.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å†³å®šåœ¨ä¸€æ®µæ—¶é—´å†…ä¿ç•™Plusnetï¼ŒåŒæ—¶æˆ‘å®‰è£…Hey!Broadband Fibreï¼Œå¹¶äº†è§£æœåŠ¡è´¨é‡ã€‚Plusnetåœ¨è¿‡å»å‡ å¹´ä¸­æä¾›äº†è‰¯å¥½çš„æœåŠ¡è´¨é‡ï¼Œä½†åœ¨æˆ‘çš„åœ°åŒºä¸æä¾›å…‰çº¤ã€‚
- en: '[Hey!Broadband Fibre](https://heybroadband.co.uk/for-home) cones into a bridge
    model, which in non bridge install, would connect to a wifi router. I opted for
    bridge mode, with a static IP, and therefore didnâ€™t need the wifi router. UDM
    Pro Port10 (WAN2) is the port that requires the ethernet cable from Fibre bridge
    modem. Once this is connected, UDM Pro dashboard, settings/internet, select Backup
    (WAN2) advance settings needs to have PPPoE enabled, with the appropriate username
    and password. If you want to view the logs whilst the PPPoE is enabled, SSH into
    the UDM Pro from any machine on your LAN, and tail /var/log/message. You may also
    want to ifconfig and route -n to check the interface is setup as expected on a
    successful connection. Errors I experience during the initial setup of the service
    ranged from failing to find remote host, Unsupported address family, Misformatted
    DNS reply and Unable to complete PPPoE Discovery'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[Hey!Broadband Fibre](https://heybroadband.co.uk/for-home)æä¾›ä¸€ä¸ªæ¡¥æ¥æ¨¡å‹ï¼Œåœ¨éæ¡¥æ¥å®‰è£…ä¸­ï¼Œä¼šè¿æ¥åˆ°æ— çº¿è·¯ç”±å™¨ã€‚æˆ‘é€‰æ‹©äº†æ¡¥æ¥æ¨¡å¼ï¼Œå¹¶ä½¿ç”¨é™æ€IPï¼Œå› æ­¤ä¸éœ€è¦æ— çº¿è·¯ç”±å™¨ã€‚UDM
    Pro Port10ï¼ˆWAN2ï¼‰æ˜¯éœ€è¦çš„ä»å…‰çº¤æ¡¥æ¥è°ƒåˆ¶è§£è°ƒå™¨è¿æ¥ä»¥å¤ªç½‘çº¿çš„ç«¯å£ã€‚ä¸€æ—¦è¿æ¥å®Œæˆï¼ŒUDM Proæ§åˆ¶é¢æ¿ï¼Œè®¾ç½®/äº’è”ç½‘ï¼Œé€‰æ‹©å¤‡ä»½ï¼ˆWAN2ï¼‰é«˜çº§è®¾ç½®éœ€è¦å¯ç”¨PPPoEï¼Œå¹¶è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ã€‚å¦‚æœä½ æƒ³åœ¨å¯ç”¨PPPoEæ—¶æŸ¥çœ‹æ—¥å¿—ï¼Œä»ä½ å±€åŸŸç½‘ä¸­çš„ä»»ä½•ä¸€å°æœºå™¨é€šè¿‡SSHç™»å½•åˆ°UDM
    Proï¼Œå¹¶æŸ¥çœ‹/var/log/messageçš„å°¾ç«¯ã€‚ä½ ä¹Ÿè®¸è¿˜æƒ³è¦ä½¿ç”¨ifconfigå’Œroute -nå‘½ä»¤æ¥æ£€æŸ¥åœ¨æˆåŠŸè¿æ¥åæ¥å£æ˜¯å¦è®¾ç½®å¦‚é¢„æœŸã€‚åœ¨æœåŠ¡åˆå§‹è®¾ç½®è¿‡ç¨‹ä¸­ï¼Œæˆ‘é‡åˆ°çš„é”™è¯¯ä»æ‰¾ä¸åˆ°è¿œç¨‹ä¸»æœºã€ä¸æ”¯æŒçš„åœ°å€æ—ã€æ ¼å¼é”™è¯¯çš„DNSå›å¤åˆ°æ— æ³•å®ŒæˆPPPoEå‘ç°ã€‚'
- en: Hopefully by now your UDM Pro dashboard (top left) should display WAN and WAN2
    with IP addresses above the Gateway IP. You should be able to run Speed Tests
    for both internet connections (WAN/WAN2) from the UDM Pro dashboard (bottom right),
    by selecting WAN or WAN2 and then selecting Speed Test.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ çš„UDM Proæ§åˆ¶é¢æ¿ï¼ˆå·¦ä¸Šè§’ï¼‰åº”è¯¥æ˜¾ç¤ºWANå’ŒWAN2ï¼Œå¹¶åœ¨ç½‘å…³IPä¸Šæ–¹æ˜¾ç¤ºIPåœ°å€ã€‚ä½ åº”è¯¥èƒ½å¤Ÿä»UDM Proæ§åˆ¶é¢æ¿ï¼ˆå³ä¸‹è§’ï¼‰å¯¹ä¸¤ä¸ªäº’è”ç½‘è¿æ¥ï¼ˆWAN/WAN2ï¼‰è¿›è¡Œé€Ÿåº¦æµ‹è¯•ï¼Œé€šè¿‡é€‰æ‹©WANæˆ–WAN2ï¼Œç„¶åé€‰æ‹©é€Ÿåº¦æµ‹è¯•ã€‚
- en: I ran into two issue during the overall install of fibre. Hey!Broadband hasnâ€™t
    setup the bridge modem correctly. I diagnosed this by using a laptop, and PPPoEâ€™d
    to the bridge modem, and reporting the issues I saw. Post a successful PPPoE connecting,
    I saw DNS resolution issues on the bridge modem or further back into Hey!Broadbandâ€™s
    network. Reporting this to TechSupport resolve the issue at 6.40am the following
    morning â€“ effectively they assigned me a new static IP
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å®‰è£…å…‰çº¤æ•´ä½“è¿‡ç¨‹ä¸­ï¼Œæˆ‘é‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜ã€‚å˜¿ï¼å®½å¸¦æ²¡æœ‰æ­£ç¡®è®¾ç½®æ¡¥æ¥è°ƒåˆ¶è§£è°ƒå™¨ã€‚æˆ‘ç”¨ç¬”è®°æœ¬ç”µè„‘è¿›è¡Œäº†è¯Šæ–­ï¼Œé€šè¿‡æ¡¥æ¥è°ƒåˆ¶è§£è°ƒå™¨è¿›è¡ŒPPPoEè¿æ¥ï¼Œå¹¶æŠ¥å‘Šäº†æˆ‘çœ‹åˆ°çš„é—®é¢˜ã€‚åœ¨æˆåŠŸè¿›è¡ŒPPPoEè¿æ¥åï¼Œæˆ‘å‘ç°æ¡¥æ¥è°ƒåˆ¶è§£è°ƒå™¨æˆ–è¿›ä¸€æ­¥è¿›å…¥å˜¿ï¼å®½å¸¦ç½‘ç»œçš„DNSè§£æå­˜åœ¨é—®é¢˜ã€‚æˆ‘å°†æ­¤é—®é¢˜æŠ¥å‘Šç»™æŠ€æœ¯æ”¯æŒï¼Œåœ¨ç¬¬äºŒå¤©æ—©ä¸Š6.40è§£å†³äº†é—®é¢˜â€”â€”å®é™…ä¸Šä»–ä»¬ä¸ºæˆ‘åˆ†é…äº†ä¸€ä¸ªæ–°çš„é™æ€IPã€‚
- en: Between a successful PPPoE connection, and resolved DNS issues, I wanted the
    OpenReach PPPoE to work from Port10 (WAN2), since it was going to be the failover.
    The reason for this turned out to be that Port10 canâ€™t downgrade to 100Mb, which
    is the max connection the OpenReach bridge can achieve. Effectively I now had
    Port9 (WAN) Plusnet, and Port10(WAN2) Hey!Broadband Fibre, which is the wrong
    way around from a failover, and default UDM Pro setup. To resolve this I went
    into the UDM Pro [Port Management](https://help.ui.com/hc/en-us/articles/360008365334-UniFi-Configure-Port-Remapping),
    and swapped WAN to Port10 and WAN2 to Port9\. Solved
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆåŠŸè¿›è¡ŒPPPoEè¿æ¥å’Œè§£å†³DNSé—®é¢˜ä¹‹é—´ï¼Œæˆ‘å¸Œæœ›OpenReach PPPoEèƒ½ä»Port10ï¼ˆWAN2ï¼‰å·¥ä½œï¼Œå› ä¸ºå®ƒå°†æ˜¯æ•…éšœè½¬ç§»çš„æ‰‹æ®µã€‚åæ¥å‘ç°Port10ä¸èƒ½é™çº§åˆ°100Mbï¼Œè¿™æ˜¯OpenReachæ¡¥æ¥èƒ½è¾¾åˆ°çš„æœ€å¤§è¿æ¥ã€‚å®é™…ä¸Šæˆ‘ç°åœ¨æœ‰äº†Port9ï¼ˆWANï¼‰Plusnetå’ŒPort10ï¼ˆWAN2ï¼‰å˜¿ï¼å®½å¸¦å…‰çº¤ï¼Œè¿™ä¸æ•…éšœè½¬ç§»çš„é»˜è®¤UDM
    Proè®¾ç½®æ­£å¥½ç›¸åã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘è¿›å…¥äº†UDM Proçš„[ç«¯å£ç®¡ç†](https://help.ui.com/hc/en-us/articles/360008365334-UniFi-Configure-Port-Remapping)ï¼Œå¹¶å°†WANäº¤æ¢åˆ°Port10ï¼ŒWAN2äº¤æ¢åˆ°Port9ã€‚è§£å†³äº†é—®é¢˜ã€‚
- en: With the above failover configuration in place, PPPoE connected, but the DNS
    issues unresolved, the UDM Pro failed over to WAN2, and the slower Plusnet broadband.
    Sometimes between 1am and 6:40am, Hey!Broadband resolve the DNS/PPPoE issues,
    and UDM Pro failed back to WAN.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸Šè¿°æ•…éšœè½¬ç§»é…ç½®å°±ç»ªåï¼ŒPPPoEè¿æ¥æˆåŠŸï¼Œä½†DNSé—®é¢˜æœªè§£å†³ï¼ŒUDM Proæ•…éšœè½¬ç§»åˆ°äº†WAN2ï¼Œå¹¶ä½¿ç”¨äº†è¾ƒæ…¢çš„Plusnetå®½å¸¦ã€‚åœ¨å‡Œæ™¨1ç‚¹åˆ°6:40ä¹‹é—´ï¼Œå˜¿ï¼å®½å¸¦è§£å†³äº†DNS/PPPoEé—®é¢˜ï¼ŒUDM
    Proæ¢å¤åˆ°äº†WANã€‚
- en: Posted in [Uncategorized](https://mdavey.wordpress.com/category/uncategorized/)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: å‘å¸ƒåœ¨[æœªåˆ†ç±»](https://mdavey.wordpress.com/category/uncategorized/)
