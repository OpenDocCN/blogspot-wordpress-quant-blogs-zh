- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: æœªåˆ†ç±»'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: ç±»åˆ«ï¼šæœªåˆ†ç±»
- en: 'date: 2024-05-18 06:37:01'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¥æœŸï¼š2024 å¹´ 5 æœˆ 18 æ—¥ 06:37:01
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: 'Financial Messaging: ZeroMQ Random Reading | Tales from a Trading Desk'
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é‡‘èæ¶ˆæ¯ï¼šZeroMQ éšæœºé˜…è¯» | äº¤æ˜“å°æ•…äº‹
- en: æ¥æºï¼š[https://mdavey.wordpress.com/2012/08/01/financial-messaging-zeromq-random-reading/#0001-01-01](https://mdavey.wordpress.com/2012/08/01/financial-messaging-zeromq-random-reading/#0001-01-01)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¥æºï¼š[https://mdavey.wordpress.com/2012/08/01/financial-messaging-zeromq-random-reading/#0001-01-01](https://mdavey.wordpress.com/2012/08/01/financial-messaging-zeromq-random-reading/#0001-01-01)
- en: Bit of aÂ spaghetti posting, but possibly relevant at a future date ğŸ˜‰
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰ç‚¹ç±»ä¼¼äºæ„å¤§åˆ©é¢çš„å¸–å­ï¼Œä½†å¯èƒ½åœ¨æœªæ¥ç›¸å…³ ğŸ˜‰
- en: Although old, [Design and Evaluation of Benchmarks for Financial Applications
    using Advanced Message Queuing Protocol (AMQP) over Inï¬niBand](ftp://ftp.cse.ohio-state.edu/pub/tech-report/2008/TR51.pdf)
    is worth a read in the context of Martinâ€™s [comments](https://groups.google.com/forum/?fromgroups#!topic/lmax-disruptor/CFXHbAYqmIs)
    around the disruptor, Ultra Messaging and ZeroMQ (Ã˜MQ)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡å¹´ä»£ä¹…è¿œï¼Œ[ä½¿ç”¨é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®® (AMQP) åœ¨ InfiniBand ä¸Šè®¾è®¡å’Œè¯„ä¼°é‡‘èåº”ç”¨åŸºå‡†çš„æŠ¥å‘Š](ftp://ftp.cse.ohio-state.edu/pub/tech-report/2008/TR51.pdf)åœ¨
    Martin å¯¹ disruptorã€Ultra Messaging å’Œ ZeroMQ (Ã˜MQ) çš„è¯„è®ºèƒŒæ™¯ä¸‹ä»å€¼å¾—ä¸€è¯»
- en: 0MQ did not exist when we evaluated message providers. Â This was about
  id: totrans-8
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¯„ä¼°æ¶ˆæ¯æä¾›è€…æ—¶ï¼Œ0MQ è¿˜ä¸å­˜åœ¨ã€‚è¿™æ˜¯å…³äº
- en: 3 years ago. Â It does look interesting for some usecases.
  id: totrans-9
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 3 å¹´å‰ã€‚å¯¹äºæŸäº›ç”¨ä¾‹ç¡®å®å¾ˆæœ‰è¶£ã€‚
- en: ''
  id: totrans-10
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: When going for ultra low-latency you need to pick a transport that
  id: totrans-11
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å½“éœ€è¦æä½å»¶è¿Ÿæ—¶ï¼Œæ‚¨éœ€è¦é€‰æ‹©ä¸€ç§ä¼ è¾“æ–¹å¼
- en: uses IP multicast or InfiniBand. Â TCP has significant overhead, and
  id: totrans-12
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ IP å¤šæ’­æˆ– InfiniBandã€‚TCP æœ‰å¾ˆå¤§çš„å¼€é”€ï¼Œå¹¶ä¸”
- en: buffering, which does not lend itself to low-latency. Â It is also
  id: totrans-13
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç¼“å†²ï¼Œè¿™ä¸é€‚åˆä½å»¶è¿Ÿã€‚æ­¤å¤–
- en: important to pick a transport that does not use daemons/brokers.
  id: totrans-14
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: é€‰æ‹©ä¸€ä¸ªä¸ä½¿ç”¨å®ˆæŠ¤ç¨‹åº/ä»£ç†çš„ä¼ è¾“æ–¹å¼éå¸¸é‡è¦ã€‚
- en: These â€œmen in the middleâ€ add latency and can be single points of
  id: totrans-15
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è¿™äº›"ä¸­é—´äºº"å¢åŠ äº†å»¶è¿Ÿï¼Œå¹¶ä¸”å¯èƒ½æˆä¸ºå•ç‚¹æ•…éšœã€‚
- en: failure. Â State of the art is single digit microseconds for a hop
  id: totrans-16
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¤±è´¥ã€‚ä¸€è·³çš„æ—¶é—´ä¸ºå•ä¸ªå¾®ç§’æ•°æ˜¯å½“å‰æœ€å…ˆè¿›çš„æŠ€æœ¯
- en: between two nodes. Â Have you measured 0MQ?
  id: totrans-17
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ã€‚ä½ æµ‹é‡è¿‡ 0MQ å—ï¼Ÿ
- en: 'Which leads to Mr Fowlerâ€™s overview of the [LMAX](http://martinfowler.com/articles/lmax.html)
    architecture, and specifically the details on replication and master/slave:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¯¼è‡´äº†ç¦å‹’å…ˆç”Ÿå¯¹ [LMAX](http://martinfowler.com/articles/lmax.html) æ¶æ„çš„æ¦‚è¿°ï¼Œä»¥åŠå¤åˆ¶å’Œä¸»/ä»çš„ç»†èŠ‚ï¼š
- en: Earlier on I mentioned that LMAX runs multiple copies of its system in a cluster
    to support rapid failover. The replicator keeps these nodes in sync. All communication
    in LMAX uses IP multicasting, so clients donâ€™t need to know which IP address is
    the master node. Only the master node listens directly to input events and runs
    a replicator. The replicator broadcasts the input events to the slave nodes. Should
    the master node go down, itâ€™s lack of heartbeat will be noticed, another node
    becomes master, starts processing input events, and starts its replicator. Each
    node has its own input disruptor and thus has its own journal and does its own
    unmarshaling.
  id: totrans-19
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ—©äº›æ—¶å€™æˆ‘æåˆ°è¿‡ï¼ŒLMAX åœ¨é›†ç¾¤ä¸­è¿è¡Œå…¶ç³»ç»Ÿçš„å¤šä¸ªå‰¯æœ¬ä»¥æ”¯æŒå¿«é€Ÿæ•…éšœè½¬ç§»ã€‚å¤åˆ¶å™¨ä½¿è¿™äº›èŠ‚ç‚¹ä¿æŒåŒæ­¥ã€‚LMAX ä¸­çš„æ‰€æœ‰é€šä¿¡éƒ½ä½¿ç”¨ IP å¤šæ’­ï¼Œå› æ­¤å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å“ªä¸ª
    IP åœ°å€æ˜¯ä¸»èŠ‚ç‚¹ã€‚åªæœ‰ä¸»èŠ‚ç‚¹ç›´æ¥ä¾¦å¬è¾“å…¥äº‹ä»¶å¹¶è¿è¡Œå¤åˆ¶å™¨ã€‚å¤åˆ¶å™¨å°†è¾“å…¥äº‹ä»¶å¹¿æ’­åˆ°ä»èŠ‚ç‚¹ã€‚å¦‚æœä¸»èŠ‚ç‚¹å®•æœºï¼Œå®ƒçš„å¿ƒè·³ä¸¢å¤±å°†è¢«æ³¨æ„åˆ°ï¼Œå¦ä¸€ä¸ªèŠ‚ç‚¹æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œå¼€å§‹å¤„ç†è¾“å…¥äº‹ä»¶ï¼Œå¹¶å¯åŠ¨å…¶å¤åˆ¶å™¨ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è‡ªå·±çš„è¾“å…¥
    disruptorï¼Œå› æ­¤æœ‰è‡ªå·±çš„æ—¥å¿—å’Œè‡ªå·±çš„ååºåˆ—åŒ–æ“ä½œã€‚
- en: ''
  id: totrans-20
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Even with IP multicasting replication is still needed because IP messages can
    arrive in a different order on different nodes. The master node provides a deterministic
    sequence for the rest of the processing.
  id: totrans-21
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å³ä½¿ä½¿ç”¨ IP å¤šæ’­ï¼Œä»ç„¶éœ€è¦å¤åˆ¶ï¼Œå› ä¸º IP æ¶ˆæ¯å¯èƒ½ä»¥ä¸åŒçš„é¡ºåºåˆ°è¾¾ä¸åŒçš„èŠ‚ç‚¹ã€‚ä¸»èŠ‚ç‚¹ä¸ºå…¶ä½™å¤„ç†æä¾›äº†ç¡®å®šçš„é¡ºåºã€‚
- en: 'Which leads to a few relevant articles over on the ZeroMQ site (assuming you
    happened to want to look at ZeroMQ in this context, and didnâ€™t want to pay for
    Ultra Messaging):'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¯¼è‡´äº† ZeroMQ ç½‘ç«™ä¸Šçš„ä¸€äº›ç›¸å…³æ–‡ç« ï¼ˆå‡è®¾æ‚¨åˆšå¥½æƒ³åœ¨è¿™ç§æƒ…å†µä¸‹æŸ¥çœ‹ ZeroMQï¼Œè€Œä¸æƒ³ä¸º Ultra Messaging ä»˜è´¹ï¼‰ï¼š
- en: ~ by mdavey on August 1, 2012.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: ~ ç”± mdavey äº 2012 å¹´ 8 æœˆ 1 æ—¥å‘å¸ƒã€‚
- en: Posted in [Uncategorized](https://mdavey.wordpress.com/category/uncategorized/)
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: å‘å¸ƒäº [æœªåˆ†ç±»](https://mdavey.wordpress.com/category/uncategorized/)
- en: 'Tags: [Disruptor](https://mdavey.wordpress.com/tag/disruptor/), [Messaging](https://mdavey.wordpress.com/tag/messaging/)'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡ç­¾ï¼š[Disruptor](https://mdavey.wordpress.com/tag/disruptor/)ï¼Œ[Messaging](https://mdavey.wordpress.com/tag/messaging/)
