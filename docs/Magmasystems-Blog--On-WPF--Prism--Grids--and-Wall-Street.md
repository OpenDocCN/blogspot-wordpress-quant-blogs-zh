<!--yml

类别：未分类

日期：2024-05-18 04:49:38

-->

# Magmasystems Blog：关于 WPF、Prism、网格和华尔街

> 来源：[`magmasystems.blogspot.com/2011/08/on-wpf-prism-grids-and-wall-street.html#0001-01-01`](http://magmasystems.blogspot.com/2011/08/on-wpf-prism-grids-and-wall-street.html#0001-01-01)

我利用这次休假尝试学习一些我一直计划学习，但一直没有太多时间深入研究的技术。其中两项技术是 WPF 和 Prism。在过去的几年里，我一直管理着使用 WPF 和 Prism 的团队，但当我自己需要编写 GUI 时，我总是退回到熟悉的 Winforms 舒适区。

当我担任花旗集团股票业务的首席架构师时，我被要求对花旗投资银行的下一代 GUI 技术做出判断。经过深思熟虑，我推荐使用 WPF。这个建议绝不是因为性能原因，也不是因为 WPF 相比 Winforms 有任何额外的功能。选择 WPF 是为了让花旗能够留住它的开发者。作为一名技术员，我们希望参与到最新最伟大的技术中。我们不想在换工作时被认为是一群恐龙。我见过那些没有转向最新技术公司的开发者的影响。开发者自然会流向那些能技术上挑战他们的公司。因此，为了保留我在股票业务中试图推广的“向前看”的态度，我选择了 WPF 作为未来的发展方向。但我并不确信。

然而，现在我注意到资本市场的大多数人已经转向了 WPF。很多时候，你有一个包含基于 Winforms 的网格的 WPF 外壳。基于 WPF 的网格的性能根本无法与基于 Winforms 的网格相比。而且，网格就是一切。

我从未完全适应将 WPF 与交易工作站结合在一起的想法。我见过的大多数交易工作站其实就是一堆网格。交易员使用这些网格来监控市场并下注。研究和分析主要在彭博上完成。如果你想要查看一些图表，你将使用你的彭博工作站。

在编写报价单时，主要困难在于如何处理大量的报价。如果你有一个处理 ETF 的交易员，那么这个交易员需要能够监控 ETF 以及底层篮子中的组件。这意味着每个标签中可能潜在有数百个报价，同时还有数千个报价正在监控中。如果能够写出一个完全基于 WPF 的工作站来应对这种流程，那将会很有趣。

为了学习 WPF 和 Prism，我已从零开始编写一个 POC。我编写了一个一级报价模拟器，它可以以不同的速度推送报价，并且报价收藏数据与微软 WPF DataGrid 控件绑定。在小范围内，速度似乎可以接受。我还没有探索加速网格和处理大量报价的方法。我需要开始使用未绑定列，实现一个最后值缓存的环形缓冲区，使用更智能的更新，使用虚拟网格，并开始研究使用小型对象和垃圾回收。所有这些改进在编写处理实时数据的 GUI 时都是标准的。但在横向编写这些优化之前，我想深入研究 WPF。

接下来要编写一个二级报价模拟器，并编写一个订单簿控制。

华尔街应该放弃 WPF 吗？不，一点也不。我见过一些完全用 WPF 编写的漂亮应用。花旗银行的老灯塔 CEP 系统就是一个完全基于 WPF 的漂亮且引人注目的 GUI 的例子。而且，在编写 GUI 时克服了足够的挑战，我觉得这个灯塔团队的 GUI 开发者是华尔街最好的 WPF 开发者之一。

我非常想知道在资本市场工作中，大家与 WPF 相处的经历如何。请花点时间在这里留下一些评论。

©2011 Marc Adler - 版权所有。此处所有观点均为个人观点，与我的雇主无关。
