<!--yml

category: 未分类

date: 2024-05-13 00:09:45

-->

# 黑客攻击纳斯达克 @ 500 FPS：俯视图

> 来源：[`hackingnasdaq.blogspot.com/2009/12/message-rate.html#0001-01-01`](http://hackingnasdaq.blogspot.com/2009/12/message-rate.html#0001-01-01)

那么这是什么样的消息速率？对于每天 700M 条消息，不是很有趣，大约在 100k 条/秒左右，相当于在 4.1ghz 上的 4100 个周期或者每 1000ns/条消息......这*太多了*。这里是所有符号的单日订单添加/删除/执行/取消的绘图。有趣的是它是多么尖锐，一些非常明确的模式 - 假设是从 VWAP/TWAP 算法中的“时间区间”。

绿色  = 订单删除数量

蓝色    = 订单添加数量

橙色 = 订单执行数量

红色     = 订单取消数量

1 横向像素 = 1 秒的订单

很明显，报价数据的量级比执行交易要大得多，只把订单交易数据分解出来看起来就像（注意：垂直刻度是数量级较少）。乍一看并没有相同的周期时间区间。

1 横向像素 = 1 秒的已执行订单

再深入了解一个更微观水平的视图，下一个图像是每 10ms 采样一次，即每个像素是 10ms 的切片，运行大约 11 分钟。在大约 20000ms 标记处发生了一些有趣的事情，似乎触发了某种算法，一大堆订单涌入市场。请记住，这些是所有符号的图表，垂直轴以消息数为单位，而不是总订单量。有趣的是（我假设）在 20000ms 之前的尖峰代表某种其他算法/符号/公司，而之后的尖峰代表其他种类算法/符号/公司，本质上是一种数字签名。

![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgBqynBUfafjnXBRQLk57jgMvFJGa7sd2Wozkv4k08_YLfvh6zeAHBfvgZ1YKXw-AZ09LDuQetHrn7Uz8htdqtY4NYP2RSEcnN-Oo_L2fCO4NVYeoHY4k9v4sv-JV4XoWkFC5wln1ZHmg/s1600-h/stack_10ms.png)

1 横向像素 = 10ms 的订单价值

继续向 1ms 级别细分，数据变得更加混乱，从噪音中提取信号变得更加困难。该图表显示每个横向像素代表 1ms 的订单价值，这是 ITCH3.1 规范的分辨率限制。ITCH4 的时间戳是纳秒级别的，因此也许增加准确性后就能看清楚同一张图片......或者也许不行。尖刺状的图案仍然相当明显，但它们所代表的可能是 VWAP/TWAP，也可能是交易所如何处理订单。可能是前者，但无论如何，这是某种明显的特征。

1 横向像素 = 1ms 的订单价值

这有些奇怪，看这些图像就像在看我之前做过的硬件性能跟踪逻辑 - 想象一个以循环级逻辑分析器，每 100ns 左右就向专用 ddr/ram 转储计数器。你最终得到了一大堆数据，需要分析到底发生了什么，以及如何提高芯片性能 - 有趣的东西。
