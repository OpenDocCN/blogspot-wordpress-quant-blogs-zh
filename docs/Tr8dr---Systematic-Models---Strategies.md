<!--yml

分类：未分类

日期：2024-05-18 15:41:49

-->

# Tr8dr | 系统模型与策略

> 来源：[`tr8dr.wordpress.com#0001-01-01`](https://tr8dr.wordpress.com#0001-01-01)

在上一篇文章中概述了打算为前四大比特币交易所组装高质量 L2/L3 数据源，收集 L3 数据，并为交易提供综合实时订单簿的意图。到目前为止，已经实现了 OKCoin 并正在实验其他交易所以确定它们的 API 能力。

除了 OKCoin 之外，我目前发现的情况都不好。以下是前四大交易所关于市场数据 API 的总结（我还包括了 Coinbase，因为我认为它会成为一个顶级玩家）：

![Screen Shot 2015-02-08 at 9.33.28 AM](https://tr8dr.wordpress.com/wp-content/uploads/2015/02/screen-shot-2015-02-08-at-9-33-28-am.png)

**BTCChina** 是最大的交易所，然而在市场数据方面似乎技术粗糙。他们去年 11 月实现了 FIX 4.4，然而文档所述的全量 OB 请求无法工作（如果有人在这方面取得任何成功，请告知我）。BTCChina 有一个替代的公开 WebSocket/JSON API，只提供 5 个订单簿级别。然而，似乎有一个“秘密”API 提供完整的订单簿深度，因为实时 UI（如 bitcoinwisdom）显示的活动超出 5 个级别（如果有人知道这个是如何工作的，请让我知道）。**补充**：我已经联系了 BTCChina，希望他们能解决 FIX 订单簿深度订阅问题，而不是将其视为一个特性。

**OKCoin** 是交易量第二大的交易所，并且似乎拥有最活跃的订单簿。好消息是，其 FIX API 如文档所述正常工作。从活动量来看，平均每 100-300 毫秒或 15 毫秒收到 20 多个交易。这种活跃程度堪比更传统市场。话说回来，怀疑交易所或者一个零交易成本的市场制造商伙伴在订单簿的前 3-5 个级别不断对市场两边进行操作。我所见到的模式是非常浅的订单（十分之一的 BTC）在市场两边的前 3-5 个级别被交替地扫单。

**Bitfinex** 似乎是最受欢迎的 BTC/USD 交易所，因此不能忽视它，尽管它有一个不智的市场数据 API。他们正在测试 AlphaPoint 的“现代”交易所实现。一旦投入生产，应该期待既有 FIX 也有二进制流式数据源。我不知道这些是否会提供 L2（订单簿深度）或 L3（订单交易）的交易所视图。任何一个都会非常受欢迎。

**BitStamp**在 BTC/USD 交易量的市场份额急剧下降。考虑到它的困境，我怀疑它是否能生存下去。尽管它有一个提供 L3 数据的“秘密”API，但支持该交易所的技术令人怀疑。特别是，它的匹配引擎既有[不正确的匹配语义](http://www.reddit.com/r/Bitcoin/comments/1r4d6t/bitstamps_streaming_api_and_exploitation/ "improper matching semantics")（在 reddit 上有记录）而且非常慢，清扫几个层次可能需要几秒钟才能执行。除非 Bitstamp 在技术和信任上彻底重塑自己，否则问题是谁将取代他们成为 BTC/USD 市场的第二大角色？

**Coinbase**或尚未推出的 Gemini，可能是取代 Bitstamp 在市场地位上的继任者（或许甚至挑战 Bitfinex）。在市场数据方面，它提供了订单簿中完整的订单列表。**更新**：Coinbase 有一个流 API 及三级数据，我的错误。~~然而这必须通过轮询他们的 REST/json API 来查询。正如你所想象的，这不是一种可扩展的方法——订单数量会随着时间的推移增加到一定程度，消息大小将在定期频率上令人应接不暇。正确的解决方案是一个带有订单交易“差分”的流 API（新订单、删除订单、更新订单等）。最基本的设计、规模和可访问性错误已经被重复，并且在一家知名交易所的推出（受监管的、NYSE 支持的等）。~~

**中国交易所**

在中国交易所关于交易量和可交易性的真实性很难得知。我没有与 OKCoin 或 BTCChina 的任何交易经验，然而，以下是从多个来源注意到的([例如](http://www.reddit.com/r/BitcoinMarkets/comments/2swttr/okcoin_unusable_during_this_drop/ "for example")):

+   OKCoin：在大规模价格变动时，交易所对交叉订单不响应（价格变动上的 DDOS）。

+   OKCoin & BTCChina：大量洗盘交易和垃圾订单（很明显是内置的交易机器人，否则在经济上不可行）。这与我在 OKCoin 的市场数据中看到的情况相呼应。

至少作为一个数据来源，我认为这些交易所是有价值的。更理想的是找到一种用于交易的方法，并避免在不太可能执行时的情况。关于在大规模价格变动时对交叉订单的不响应，问题这是由于糟糕的匹配引擎技术（可能 OB 被淹没）[1]还是为了“自家人”有意为之[2]。似乎交易所为自己交易提供服务的同时，很可能在为自己提供交易所服务。

今天也传来了一些坏消息，一家香港交易所（MaiCoin）[消失](http://headlines.yahoo.co.jp/hl?a=20150208-00000055-jij-cn "消失")了，携带着来自客户的 30 亿港元存款。我认为在比特币领域已经存在足够的欺诈和不良市场行为，因此一定程度的监管和受监管的交易所将会受到欢迎。

**结论（技术方面）**

总的来说，我对（大多数）交易所的比特币技术印象是，它们是由典型的全栈网络应用开发者设计的，这些开发者从传统市场学到的东西很少，或者在考虑规模问题时没有运用常识。轮询 REST/JSON 是比特币交易所普遍存在的一个极其愚蠢的想法（尽管在某些应用场景中是可行的）。有了这种外部接口/设计决策，人们不禁要好奇幕后还有哪些惊人的“杰作”。

我相信这些缺陷将会得到改进，通过市场竞争，它们将趋向于更加复杂和合理的设计。如果出于其他任何理由，我都愿意为这些交易所提供咨询服务，帮助他们将 API 和实施方式推向业界先进水平，以使这些交易所成为更好的交易场所。

**注记**

考虑到在 BTC 领域我们已经见证了不计其数的无信息/考虑不周的实施案例，如果大多数交易所的订单匹配引擎在订单量扩展方面存在缺陷，那也毫不令人意外。Bitstamp 肯定也存在这样的问题。

所谓的“利于交易所自身”的骗局可能包括故意延迟和抢跑：在市场上升时，延迟买方流量，在买方流量之前买入并在更高的价格卖给潜在的买家。
