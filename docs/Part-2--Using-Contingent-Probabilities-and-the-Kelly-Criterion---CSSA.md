<!--yml

分类：未分类

日期：2024-05-12 18:51:28

-->

# 第二部分：使用条件概率和凯利公式 | CSSA

> 来源：[`cssanalytics.wordpress.com/2009/08/09/using-contingent-probabilities-and-the-kelly-criterion-part-2/#0001-01-01`](https://cssanalytics.wordpress.com/2009/08/09/using-contingent-probabilities-and-the-kelly-criterion-part-2/#0001-01-01)

在第一部分中，我们讨论了使用 MDVK 和基准策略来估算投注量的程序，以识别牛市和熊市。现在，我们应该看看如何在与新信息结合时使用这些信息——也就是说，我们试图使用条件概率数据来计算投注量。解决这个问题有两种方法：1) **“信手拈来”** —— 使用历史数据以及基于人类逻辑的一些调整进行估计 2) **使用高级统计预测：** —— 使用条件概率进行预测，其中考虑了独立变量之间的相关性和交互作用。

本文将重点讨论“信手拈来”的估计，因为现实情况是，大多数交易者没有足够的装备或知识，无法在日常基础上有效地使用第二种方法。理想数字世界和交易*.*的粗犷世界之间有很大的区别。我会用以下比喻来比较 1 和 2：你不会想让一名士兵带着一种复杂或难以使用的新武器上战场，除非经过充分的训练。此外，良好的判断力与基本的历史数据（正确使用）相结合，可以产生比执行不当的定量模型更健壮的、可靠的结果。

生成可用条件概率数据的一个最佳来源是 Rob Hanna 的***Quantifiable Edges*** [`quantifiableedges.blogspot.com/`](http://quantifiableedges.blogspot.com/)。通常，Rob 会呈现一个与当前环境直接可比较的具体情况，然后提供历史数据，告诉你在这个具体的条件下进行交易你会盈利还是亏损。假设我们的主要交易工具是 SPY，以下是一个实际例子：

[`2.bp.blogspot.com/_931wANibTqw/SnGgh-ybdJI/AAAAAAAABS4/ksKrIMBsfnQ/s1600-h/2009-7-30+png.png`](http://2.bp.blogspot.com/_931wANibTqw/SnGgh-ybdJI/AAAAAAAABS4/ksKrIMBsfnQ/s1600-h/2009-7-30+png.png)

假设我们从第一部分例子中，当前处于牛市且 VIX 为 15。根据之前的 MDVK 计算，我们的基准投注应该是 47%。假设我们无法获得在牛市或熊市中特定结果的条件概率。我们必须结合我们的新信息来决定下注多少。再假设我们一次交易一周，我们的决策并持有 5 个交易日。在这种情况下，Rob 展示了当“SPY 在交易最后 hour 连续 4 天收高，x 天后卖出”的历史交易结果。这是我们所需的所有数据：

| | | **总计：所有** | **总计：百分比** | **总计：胜/负** |
| --- | --- | --- | --- | --- |
| **x 天** | | **交易** | **盈利** | **比率** |
| 5 | | 85 | 45.88% | 0.82 |

现在，使用 MDVK 我们可以计算在这种情况下应该下注多少——让我们重新审视一下计算过程。这次我还简化了凯利准则，以便更容易理解：

**B** = **T** x 20/(当前 VIX 水平)

**MDVK**= (B x 1/2 x (100/(1-f)))*max(300%)*

*注意，如果“f” <0，那么公式变为：-1*(B x 1/2 x (100/(1-|f|)))*max(-300%)*

*其中 **T** = *100%趋势投注在牛市/熊市做空*

*其中 **B** = *基准投注在牛市/熊市做空*

*其中凯利准则= f = W – [(1 – W) / R]    和    R=胜/负比率，W=盈利的交易百分比*

*B= 20/15 x (100%)= 1.333*

*f= 46%-((1-46%)/.82))= -20%*

*MDVK=-1 x 1.333 x .5 x (100/80)= -83% 或“做空”你组合的 83%*

为了计算此案例中的组合“f”，我们需要利用之前的基准估计 47%与当前应急估计-83%。理想情况下，我们想知道条件概率是什么，因为我们不知道，我们可以像下面这样解决我们的“信封背面”问题：

组合 f = (基准 f + (信心)x 应急(f))/2*

*其中信心=t-score 信心 OR 根据样本大小和情况，自己对这种概率可靠性的粗略调整。如果样本量小于 20，我建议最多 50%的信心。另一种调整包括如果你觉得当前情况并不完全符合历史情况。或许市场异常，或者需要考虑季节影响。*

在这个案例中，为了保持简单，我们将假设 100%的信心：

结合 f = (47% + (-83%))/2 = -18%

在这种情况下，我们会平掉多头头寸，并使我们的组合净空头 18%。正如您所看到的，上述方法是实用的，因为它允许我们量化下注的金额，同时也可以根据我们对形势的判断进行调整。交易员常常在确定下注金额和是否获利了结，或者转换头寸上感到困惑。使用 MDVK 来计算综合的“f”，会给你一个明确的答案，告诉你当前应该采取什么头寸。虽然它并不意味着非常精确，但比在收盘铃声压力下做出的“拍脑袋”决策要好得多。这是一个高度结构化的框架，考虑了 1）当前的长期趋势 2）波动性 3）风险/回报比率以及 4）衍生情况。

我会在本周结束前尝试向读者提供一份电子表格，以便用于实际交易。在第三部分，我们将研究如何使用统计学来做出更精确的条件预测。这是一个我们将逐步建立的主题，我将介绍各种统计程序及其应用，以及优缺点。周二我们将研究如何进行“信手拈来”的鲁棒优化程序，以找出如何交易对。然而，这种方法适用于优化任何不会过拟合的交易系统。
