<!--yml

类别：未分类

日期：2024-05-12 18:56:54

-->

# 量化交易：时间序列分析与数据空白

> 来源：[`epchan.blogspot.com/2015/07/time-series-analysis-and-data-gaps.html#0001-01-01`](http://epchan.blogspot.com/2015/07/time-series-analysis-and-data-gaps.html#0001-01-01)

大多数时间序列技术，如 ADF 测试用于平稳性、Johansen 测试用于协整，或 ARIMA 模型用于回报预测，都假设我们的数据点是按固定间隔收集的。用交易者的行话来说，它假设柱状数据具有固定的柱长。很明显，即使我们只是分析日柱，这个简单的要求也会立即提出一个问题：我们如何处理周末和假日？

你可以看到，工作日的回报柱状统计数据与周末和假日的大不相同。以下是 2005/05/04-2015/04/09 SPY 日回报的比较表：

|  |  |  | **平均绝对回报（基点）** |  |
| --- | --- | --- | --- | --- |
|  |  |  |  |  |
|  |  |  |  |  |

尽管一个工作日的回报绝对幅度与一个周末的相似，但工作日的平均回报要积极得多。注意，回报的峰度在周末几乎翻了一番。（周末的风险尾部要高得多，而预期回报要少得多：为什么有人会在周末持仓呢？）因此，如果我们对日数据进行任何时间序列分析，我们都是在强制拟合一个在具有异质统计数据的数据上工作的模型，这个模型不会很好地工作。

当然，如果我们试图对日内柱进行分析，问题会更糟。我们不仅面临周末空白问题，在股票或 ETF 的情况下，我们还面临隔夜空白问题。以下是 2009/01/01-2015/06/16 AUDCAD 15 分钟回报与周末回报的比较表：

|  |  |  | **平均绝对回报（基点）** |  |
| --- | --- | --- | --- | --- |
|  |  |  |  |  |
|  |  |  |  |  |

在这种情况下，每一个重要的统计数据都是不同的（值得注意的是，这里周末的峰度实际上更低，说明了该时间序列的平均回归特性。）

那么我们应该如何预测具有周末空白的数据的日内回报呢？（同样的解决方案也适用于股票的隔夜空白，但在此后的讨论中省略。）让我们考虑几个建议：

1) 直接删除周末回报，或在 Matlab 中将它们设置为 NaN，或在 R 中将它们设置为缺失值 NA。

这种方法行不通，因为一周的前几根柱子不能被上一周的最后几根柱子正确预测。我们不应该使用任何基于日或日内数据构建的线性模型来预测一周的前几根柱子的回报，无论该模型是否包含具有周末空白的数据。至于多少根柱子构成“前几根”，这取决于模型的回顾期。（注意我在此强调线性模型，因为一些非线性模型可以适当地处理周末的大跳跃。）

2) 在构建/训练时间序列模型时，假装周末的回报与日常或日内回报没有什么不同，但不要用模型来预测周末的回报。也就是说，周末不要持仓。

这是许多交易员处理这个问题的默认方法，也许是最简单（天真）的方法，而且也不算太差。一周最初几个棒图的预测将再次受到怀疑，如同 1)中一样，所以那时可能想要避免交易。这种方法构建的模型不是最好的，但然后我们不必过于严谨。

3) 只使用没有间隔的最新时期来训练模型。所以对于一个日内 FX 模型，我们将使用前一个星期的棒图，*去掉*周末的棒图来训练模型。不要用模型来预测周末的回报也不要用模型来预测一周最初的几个棒图。

这听起来不错，但问题是通常一周内收集的数据量不足以构建一个健壮的模型，因此得到的模型通常会受到严重的历史数据挖掘偏差的影响。

你可能会认为应该能够将多个无间隔期的数据连接起来形成一个更大的训练集。这种“连接”并不意味着只是将多个星期的时间序列拼接成一条长的时间序列 - 这将等同于 2)并且是错误的。连接的意思是我们最大化模型在不同独立时间序列上的总对数似然，在理论上可以很容易地做到，因为独立数据的对数似然（即对数概率）是可加的。但实际中，大多数预打包的时间序列模型程序没有这个功能。（如果有人知道 Matlab，R 或 Python 中的这样的包，请添加一个评论！） 而不是修改时间序列拟合包的似然最大化过程的内部，我们将在下一个提案中研究一个捷径。

4) 与其使用带有最大似然估计的预打包时间序列模型，不如使用等效的多项式线性回归（LR）模型。然后用这个 LR 模型拟合训练数据，训练集中包含除周末棒图外的所有数据，并用于预测除周末棒图和一周最初几根棒图外的所有未来的棒图。

将时间序列模型转换为 LR 模型的过程对于自回归模型 AR(p)来说相对简单，但对于自回归移动平均模型 ARMA(p, q)来说可能是不可能的。这是因为后者涉及到对残差的移动平均，产生了我不知道如何将其纳入 LR 模型中的依赖关系。但是我发现，由于 AR(p)模型的简单性，它在样本外通常比 ARMA 模型表现得更好。当然，很容易在 LR 拟合中省略某些数据点，因为假设每个数据点都是独立的。

以下是预测 NOKSEK 15 分钟回报的一个此类 AR 模型的样本回报累积图，假设中点执行且无交易成本（点击以放大。）

无论决定使用处理数据缺失的这一技巧还是那一种技巧，始终关注模型在这些特殊柱子上的表现是一个好主意。

**===**

这是一个关于使用 AI 技术实际寻找资产回报预测指标的新在线研讨会。

===

**托管账户更新**

我们的外汇托管账户计划在 6 月份上涨了 6.02%（年初至今：31.33%）。

**===**

**行业更新**

+   我之前 [报道](http://epchan.blogspot.com/2014/02/fundamental-factors-revisited-with.html) 过，由莱尔和 Wang 提出的基于仅仅两个公司基本面的线性组合的股票模型——市净率（book-to-market ratio）和股本回报率（return on equity）。莱尔教授已经 [发布](http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2613366) 这个模型的一个新的版本。

+   查尔斯-阿尔贝托·莱哈勒、让-菲利普·布肖 aud 和保罗·贝松报告称“日内价格更多地与已签名的限价订单（累计订单补充）相一致，而不是已签名的市价订单（累计订单不平衡），即使订单不平衡能够预测短期价格变动。”致谢：[马蒂亚·曼佐尼](https://it.linkedin.com/pub/mattia-manzoni/45/670/b01/en)。（我没有原文论文的链接：请找马蒂亚获取！）

+   一个可以帮助您筹集资本的新投资竞赛在 [hedgefol.io](http://hedgefol.io/) 上可用。

+   在周二，7 月 14 日，与曼哈顿景色尽收眼底的露台上美食和饮料相伴，和同行量化分析师一起参加纽约消防员烧伤中心基金会的户外夏日派对。请通过 [RSVP](http://quantsgiveback.org/event/) 加入量化基金经理、系统交易员、算法交易员、分析师和高频交易员的行列，共度良辰。这是一个 **免费** 的活动（欢迎捐赠）。

**===**

关注我的推特：@chanep
