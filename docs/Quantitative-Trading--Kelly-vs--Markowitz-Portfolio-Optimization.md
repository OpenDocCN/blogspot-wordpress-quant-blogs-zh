<!--yml

category: 未分类

date: 2024-05-12 18:57:29

-->

# 量化交易：凯利与马科维茨投资组合优化

> 来源：[`epchan.blogspot.com/2014/08/kelly-vs-markowitz-portfolio.html#0001-01-01`](http://epchan.blogspot.com/2014/08/kelly-vs-markowitz-portfolio.html#0001-01-01)

在我

[book](http://www.amazon.com/dp/0470284889/ref=as_sl_pd_tf_lc?tag=quantitativet-20&camp=14573&creative=327641&linkCode=as1&creativeASIN=0470284889&adid=0DEF116W4JR65B8KSV6H&&ref-refURL=http%3A%2F%2Fepchan.blogspot.ca%2F)

，我描述了一个非常简单且优雅的公式，用于确定 N 项资产之间的最优资产分配：

F=C

^(-1)

*M   (1)

其中 F 是一个 Nx1 向量，表示要分配给每个资产的股本比例，C 是协方差矩阵，M 是这些资产的超额回报的平均向量。请注意，这些“资产”实际上可以是“交易策略”或“投资组合”本身。如果这些实际上是会产生融资（持仓）成本的真实资产，那么超额回报是回报减去无风险利率。

请注意这些比例，或者像通常所说的权重，并没有标准化 - 它们不一定加起来等于 1\。这意味着 F 不仅决定了总股本在 N 项资产中的分配，而且还决定了应使用的整体最优杠杆。F 的各分量绝对值之和除以总股本实际上是整体杠杆。因此，凯利公式的美妙之处在于：一个简单的公式中包含了最优分配和最优杠杆，这应该能最大化一个人股本（或等效地，多个周期后的股本）的复合增长率。

然而，大多数金融学生并没有学习凯利投资组合优化。他们学习了马科维茨均值-方差投资组合优化。特别是，他们学习了存在一个称为

*贴边投资组合*

位于有效前沿（一组最小化方差并符合一定预期回报的组合），并最大化夏普比率。未提及的是

+   这个贴边投资组合有什么好处？

+   最大化夏普比率的真正好处是什么？

+   这个贴边投资组合是否与凯利最优分配所推荐的投资组合相同？

我想在这里回答这些问题，并为凯利和马科维茨投资组合优化之间提供联系。

根据凯利和艾德·索普（在我书中解释）的观点，上述的 F 不仅能最大化复合增长率，还能最大化 Sharpe 比例。换句话说：当 Sharpe 比例最大化时，增长率最大。因此我们明白了为什么切线组合如此重要。实际上，**切线组合与凯利最优组合 F** 相同，只是切线组合假设是标准化的，杠杆为 1，而 F 更进一步为我们确定了最优杠杆。否则，在两个组合中，资产的百分比分配是相同的（假设我们没有在优化问题中施加额外的约束）。我们如何证明这一点呢？

教授马科维茨投资组合优化通常的方法是建立一个有约束的

*二次*

优化问题 - 二次因为我们要优化投资组合方差，这是一个基于底层资产权重的二次函数 - 然后使用数值二次规划（QP）程序来解决这个方程，然后进一步最大化 Sharpe 比例以找到切线组合。但这是不必要的繁琐，实际上还模糊了上面显示的 F 的优雅公式。相反，我们可以通过应用拉格朗日乘数到以下优化问题（参见

（http://faculty.washington.edu/ezivot/econ424/portfolioTheoryMatrix.pdf](http://faculty.washington.edu/ezivot/econ424/portfolioTheoryMatrix.pdf)

对于类似的处理）：

最大化 Sharpe 比例 = F^T*M/(F^T*C*F)^(1/2 （2）

受限于约束 F^T***1** = 1   （3）

（为了强调左边的**1**是一个由一组成的列向量，我使用了粗体。）

所以我们应该最大化以下无约束量，关于每个资产 i 的权重 F[i] 和拉格朗日乘数 λ：

F^T*M/(F^T*C*F)^(1/2 - λ(F^T***1 - **1) （4）

但是对这个分式取偏导数，分母中有平方根，是不方便的。所以等价地，我们可以最大化 Sharpe 比例的对数，同时受限于相同的约束。这样我们可以取

log(F^T*M) - (1/2)*log(F^T*C*F)^(-1)λ(F^T***1 - **1) （5）

关于 F[i]。将每个分量 i 设为零得到矩阵方程

（1/F^T*M）M -（1/F^T*C*F）C*F = λ**1   （6）

将整个方程乘以 F^(T )在右边得到

（1/F^T*M）F^T*M -（1/F^T*C*F）F^T*C*F = λF^T***1   （7）

记住约束，我们认识到右边就是 λ。左边的结果恰好为零，这意味着 λ 也为零。一个结果为零的拉格朗日乘数意味着这个约束不会影响优化问题的解，直到一个比例常数。这是令人满意的，因为我们知道如果我们对所有资产应用相同的杠杆，最大 Sharpe 比例应该不受影响。所以我们得到了最优解 F 的矩阵方程：

C*F = (F^T*C*F/F^T*M)M   （8）

如果你知道如何使用矩阵代数解决这个公式中的 F，请告知我。但我们尝试一个*假设*F=C^(-1)*M，如公式(1)所示。公式(8)的左边变为 M，右边变为(F^T*M/F^T*M)M = M。所以这个假设是有效的，并且解决方案实际上是(1)，乘以一个比例常数。为了满足归一化约束(3)，我们可以写

公式(9)：F=C^(-1)*M / (**1**^T*C^(-1)*M) 

所以，切线组合与凯利最优组合相同，乘以一个归一化常数，并没有告诉我们最优杠杆是多少。

====

**研讨会更新：**

====
