<!--yml

类别：未分类

date: 2024-05-18 04:46:47

-->

# 智能交易：遗传算法系统交易开发 - 第二部分

> 来源：[`intelligenttradingtech.blogspot.com/2010/02/genetic-algorithm-systematic-trading_17.html#0001-01-01`](http://intelligenttradingtech.blogspot.com/2010/02/genetic-algorithm-systematic-trading_17.html#0001-01-01)

我们首先讨论了遗传算法的目标，即找到优于其他潜在规则的规则候选池。在我们移动平均的例子中，我们寻求规则的参数值：

如果 ma(m)二进制运算 ma(n)则动作。

*注：binop 是二元运算符的简称；在此情况下，二元运算符是>或

<./>

遗传算法（genetic algorithm）通过将规则集编码为二值变量的字符串来实现。例如，如果我们想编码移动平均参数

至于 4 个实数小数值，我们可以简单地使用一个 2 位字符串，其中 00=0 小数，01=1 小数，10=2 小数，11=3 小数。我们可以在每个字符串中包含的位中编码多达 2^n 的值。如果我们想要编码 512 个值，我们需要一个 9 位字符串来编码这个值（2⁹=512）。

此外，我们可以将除了小数值以外的值编码为二进制位，例如，

动作=买入或卖出，可以用 0 或 1 表示。大于或小于(>或

![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgxfZYeuCwy8St-m4kYQ55Zo2n1qvdmIaDsc13VcKaFuuzfx-hV0YV3JLtuvxtFIRgUKvDYi1_6u24HR-My851ysQSCnWjeaYbZqBNzrpG9rJGrcdAUNBZXKE1z6U4Zjvwf-ztaAczML4E/s1600-h/fig_2boolencodinga.jpg)

图 1. 布尔编码示例

一旦我们将规则集编码为布尔表示或字符串，我们然后希望生成一个字符串种群以供选择。通常，我们开始时会给参数分配随机值。例如，我们可能开始一个包含 100 个字符串的种群；每个字符串代表一组具有不同参数的规则。

一条字符串可能是如果 ma(10)<ma(50)则买入，另一条可能是如果 ma(20)>ma(200)则卖出。一旦最初创建了一个种群，我们需要产生多样性，并且成功地在后代中改进适应度，以供后续几代使用。

适应度的概念也许是使遗传算法成为一个强大优化器的最优雅、最灵活的选项之一。在我们讨论的决策树学习和神经网络学习中，只有一个或两个简单的目标来进行训练（例如，决策树的目标是减少信息熵，神经网络的目标是减少拟合误差方差）。遗传算法可以利用你能想象到的任何目标，这使得它与其它方法相比具有无限的灵活性。你可以使用

将总收益、夏普比率或利润因子作为目标。你甚至可以组合目标。适应度或目标是你试图优化的东西。请记住，遗传算法和其他学习者一样，不能保证你找到绝对最好的，它可能会陷入适应度景观的局部最大值。

然而，你可以变得更加复杂，并添加其他子方法来尝试避免这种情况。

![图 3 种群示例](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiStlHTG_XUfM-YOsjWwTa2AVBss1ihvD4cRoJ-jzQXMlKcJUECbJjB10P5s9Pi6bShb4Q_Rg0nE9SoSt-pv6ZCYlqE1fh5JK7GpkLHinFS8ilr_dRXzeKCKt0xX1LMcQ-NY8fxEvY3fdg/s1600-h/fig3populationa.jpg)

图 2. 待处理规则种群的示例。

一旦我们创建了基于参数的规则的初始种群（随机创建），那么我们就要考虑如何实现优化目标或找到最能优化我们适应度的规则参数集。请注意，每次我们创建一个新的后代种群，我们称之为新的代运行或时期。第一组后代或父母通常尝试选择一些适应度最高的成员，传递到下一代。我们可以使用贪心方法，只是对成员进行排序或排名，并只从最优秀的 50%中选择传递到下一代（这称为截断选择）或者使用一种称为轮盘选择的方法。在轮盘选择中，我们根据它们的标准化适应度从原始种群中抽取成员。所以如果最好的适应度是所有适应度之和的 20%，那么以 20%的概率将该字符串或规则复制到下一代。其他适应度/字符串组合也适用。最终，我们从前一代最优秀的候选者中选择更多的后代。接下来，我们想要确保后代中有一定的多样性。交叉操作通过将一个候选者与另一个候选者之间的基因交叉或交换来实现这一点。这是在整个种群中执行的，以确保多样性。最后，我们使用变异来随机选择一些字符元素并翻转它们。这为后代增加了更多的随机多样性，因此可能有一些候选者会出现，其表现非常好（想想篮球中的异常身高）。

可以添加更多功能来提高性能。锦标赛选择是另一种通过在字符串候选者之间运行锦标赛来改进后代选择的方法。获胜的候选者会被传递到下一代。

![图 4 选择过程](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj1nZA61G1V5l_tXRfFpFPd2_q72-v0G-aq83ie2t4-dplC5FgpncOXIpu2UVQhXYLU4iyVbp-GHGNXVeuTY7rgbnzfMu0bYzTEPEnnwp6eo1vunaEhxf7y89Dl1NprQ8k_L9hxZy18VVY/s1600-h/fig4selection.jpg)

图 3. 选择过程。

我们实际上是在每一代中运行优化和多样性程序，最优的候选者会一直传递到下一代，直到我们的代数用尽，或者我们指定了提前停止的标准。

就我们的规则集而言，我们希望它能够收敛到最佳的一组参数。

（移动平均参数，以及二进制大于或等于运算符），这基于我们为其指定的适应度目标。

下一节。遗传算法系统交易开发——第三部分
