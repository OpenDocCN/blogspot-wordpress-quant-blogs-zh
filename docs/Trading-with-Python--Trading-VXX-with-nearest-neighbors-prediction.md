<!--yml

分类：未分类

日期：2024-05-18 15:42:06

-->

# 使用 Python 交易：使用最近邻预测交易 VXX

> 来源：[`tradingwithpython.blogspot.com/2014/11/trading-vxx-with-nearest-neighbors.html#0001-01-01`](http://tradingwithpython.blogspot.com/2014/11/trading-vxx-with-nearest-neighbors.html#0001-01-01)

经验丰富的交易员根据一组指标及其解读，知道市场会出现什么行为。后者通常基于他的记忆或某种模型进行。找到一组好的指标并处理它们的信息是一个巨大的挑战。首先，需要了解哪些因素与

**期货**

价格。没有预测价值的数据只会引入噪音和复杂性，降低策略表现。找到好的指标是一门科学，通常需要深入了解市场动态。这一部分策略设计不能轻易自动化。幸运的是，一旦找到了一组好的指标，交易员的记忆和'直觉'可以很容易地被统计模型所取代，计算机确实有完美的记忆能力，可以进行完美的统计估计。

关于波动率交易，我花了很长时间才理解影响其走势的因素。特别是，我感兴趣的是那些

**预测**

期货回报率。我不会在这里进行详细解释，只是提供一个结论：我对波动率最宝贵的两个指标是期限结构斜率和当前波动率溢价。

我对这两个的定义是：

+   **波动率溢价 = VIX-实际波动率**

+   **delta (term structure slope) = VIX-VXV**

**VIX & VXV**

是标普 500 的前 1 个月和 3 个月隐含波动率。

**实际波动率**

以下是 SPY 的 10 日实际波动率，使用杨-张公式计算。

**delta**

经常在

[VixAndMore](http://vixandmore.blogspot.nl/)

博客，同时

**溢价**

众所周知，来自期权交易。

当**溢价**高且期货处于正向市场(*delta* < 0)时做空波动率是有意义的。这将导致 VXX 沿着期限结构的每日滚动带来顺风。但这只是一个粗略的估计。一个好的交易策略会结合来自*溢价*和*delta*的信息来预测 VXX 的交易方向。

我花了很长时间才找到了一种好的方法来结合这两个指标产生的噪声数据。我尝试了大部分的'标准'方法，比如线性回归，写了一堆'如果-那么'，但与只使用一个指标相比，改进非常小。一个使用简单规则的'单个指标'策略的例子可以在

[](http://www.tradingtheodds.com/2014/11/ddns-volatility-risk-premium-strategy-revisited-3/)

博客。看起来不错，但是多个指标能做些什么呢？

我将从 MarketSci 获取一些样本外的 VXX 数据

[MarketSci](http://marketsci.wordpress.com/2012/04/18/free-historical-vxx-data/)

注意，这是模拟数据，在 VXX 创建之前。

下面是同一时期的指标图表：

如果我们取其中一个指标（这里为溢价）并与 VXX 未来的回报进行绘图，可以看到一些相关性，但数据非常嘈杂：

然而，很明显，负溢价很可能会在第二天带来正的 VXX 回报。

将溢价和 delta 结合成一个模型对我来说一直是一个挑战，但我一直想做一个统计近似。本质上，对于（delta,premium）的组合，我想找到所有与当前值最接近的历史值，并基于它们来估计未来的回报。我曾经几次开始编写自己的最近邻插值算法，但每次都不得不放弃...直到我遇到了

[scikit 最近邻回归](http://scikit-learn.org/stable/auto_examples/neighbors/plot_regression.html#example-neighbors-plot-regression-py)

这让我能够快速基于两个输入构建一个预测器，结果非常好，以至于我有点担心我在某个地方犯了一个错误...

以下是所作之事：

1.  创建一个数据集[*delta,premium*] -> [*VXX 下一日回报*]（样本内）

1.  基于上述数据集创建一个最近邻预测器

1.  用以下规则进行样本外交易策略（out-of-sample）:

+   如果预测回报率>0，则做多

+   如果预测回报率<0，则做空

这个策略不能再简单了...

结果似乎非常好，并且当用于估计的邻居更多时，表现会更好。

首先，用 10 个点，策略在样本内表现优秀，但在样本外表现平淡（下面图表中的红线是样本内的最后一个点）

然后，随着 40 和 80 个点的增加，表现变得更好：

在最后两个图表中，策略在样本内外的表现似乎相同。夏普比率约为 2.3。

我对结果非常满意，并且感觉我仅仅触及了这项技术可能做到的表面。
