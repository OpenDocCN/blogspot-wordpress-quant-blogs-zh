<!--yml

category: 未分类

日期：2024 年 5 月 12 日 22:29:15

-->

# Falkenblog：回测错误

> 来源：[`falkenblog.blogspot.com/2009/01/backtesting-errors.html#0001-01-01`](http://falkenblog.blogspot.com/2009/01/backtesting-errors.html#0001-01-01)

回测最烦人的部分是创建数据库，这是有问题的，因为大多数数据都是为了展示当前信息的一次性采集，而不是截止到 1998 年 1 月 14 日的横截面数据。看看，比如 IBM 的市场和财务报表数据，这些信息是免费且容易获取的。但如果不放在上下文中，这些信息有什么用呢？上下文是什么，除了对过去的相关分布和相关性有一个历史感之外？

汇总此类数据通常涉及整合来自不同来源的数据，将它们拼接在一起，并确保你有“死去”的公司数据。不可避免地，数据提供者坚称他们拥有“所有”数据，因为对他们而言，当前公司就是他们能想象到的全部。所以你必须具体询问，问他们是否拥有“死去”的公司，比如安然、世通-美国通讯和贝尔斯登。然后还有关于拆分、股利的问题，如果不加以考虑，可能会产生虚假的模式。

无论如何，我发现了一些我认为非常有趣的东西，但后来发现这只是一个错误。看看你能否发现错误。我有一个数据库，其中包含每个月末的财务报表信息。通过这个记录或观察，我可以得到未来一个月的回报，以及该月末的交易量和市值信息。

我研究了收益日的回报，收益发布日期前一天的回报，以及收益发布日期后一天的收盘价格。为了做到这一点，我不得不获取收益报告日期信息，然后将这些日期-公司 ID 对应到一个日收益数据的数据库。我注意到它们的每日（年化）波动率约为此期间平均每日回报的 150%左右，这是完全合理的。为了好玩，我看了所有市值超过 10 亿美元的公司，并发现

平均

在这一天的日回报约为 0.2%左右，非常显著。平均而言，回报显著为正，但没有人注意到，因为对于任何一个观察值，噪声都很大，而且并不明显到可以完全明显。我寻找市值大于 5 亿美元的公司，结果相同，并且随着时间的推移高度一致。

错误在哪里？

嗯，我的尺寸过滤器使用了

月底

回顾一下收益日期的回报情况

来自同一个月的

只考虑月底市值超过 $1B 或 $500MM 的公司，足以包括那些向上迁移的公司，并排除足够多向下迁移的公司，从而产生了 0.2%的回报，这完全是由于这种偏差造成的。也就是说，有足够多的公司从 $975MM 上升到 $1001MM 获得了进入，也有足够多的公司从 $1001MM 下降到 $975MM 被剔除，以产生一种虚假的样本统计数据。

我认为 $1B 的截止线并不重要，尤其是因为

通常

这个数据库用于寻找月度回报中不存在偏差的模式，所以我没有意识到。但事实上，市值截止线存在实质性的选择偏差。有时这些事情很微妙。
