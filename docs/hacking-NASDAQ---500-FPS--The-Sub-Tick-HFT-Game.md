<!--yml

类别：未分类

日期：2024-05-13 00:03:30

-->

# 500 FPS 下的黑客纳斯达克：亚速高频游戏

> 来源：[`hackingnasdaq.blogspot.com/2012/04/sub-tick-hft-game.html#0001-01-01`](http://hackingnasdaq.blogspot.com/2012/04/sub-tick-hft-game.html#0001-01-01)

关于数学问题我发牢骚有点多了，所以是时候发一篇 6 点文章了-请原谅偶尔的无逻辑性  <g>我说的数学指的是一个策略必须达到什么样的概率才能盈利，考虑到游戏的规则。</g>

到纳斯达克的基本数学如下（以每股 0.0001 美元的单位）

-30 移除流动性

+21 添加流动性

-0.0000192 * 卖出品种的美元价值

0 到-20 的佣金

+ 交易的实现总值

（这是一个变动的佣金，取决于你和谁结算，可能是 0，比如拥有自己清算部门的大型基金，或者初级算法经纪商收取-20）

让我们简化一下，可以说是以不同价格但相同数量的买入/卖出的一对，产生的净实现收益

净值 = 数量 * （卖出价格 - 买入价格 + 返利 + 佣金 + 税）

第一个结构分类是你选择什么样的入场/出场点。选项有

攻击性 + 攻击性 （AA）：-30 - 30 = -60

攻击性 + 被动（AP）：-30 + 21 = -9

被动 + 攻击性（PA）：+21 - 30 = -9

被动 + 被动（PP）：+21 + 21 = +42

（被动意味着你的订单在执行时在订单簿上可见）

（攻击性意味着你的订单命中了订单簿上可见的东西，例如越过了报价差）

将这简化一点分为 3 类

AA ( -60) AP (-9) PP(+42)

注意：AA 你越过了报价差，因此实际上是-160，但为了快速计算，让我们忽略并且享受迪士尼乐园吧。

假设我们的策略有 2 个离散的极点，+100 胜和-100 负，所以每边 1 个 tick，没有 0 的结果。

下面是交易获胜概率的图表（最左边的列）和每种入场/出场方式的 1 股@ 特定概率下的实现收益/亏损。

仅返利

0.000000 : AA:    -160 AP:    -109 PP:     -58

0.040000 : AA:    -152 AP:    -101 PP:     -50

0.080000 : AA:    -144 AP:     -93 PP:     -42

0.120000 : AA:    -136 AP:     -85 PP:     -34

0.160000 : AA:    -128 AP:     -77 PP:     -26

0.200000 : AA:    -120 AP:     -69 PP:     -18

0.240000 : AA:    -112 AP:     -61 PP:     -10

0.280000 : AA:    -104 AP:     -53 PP:      -2

0.320000 : AA:     -96 AP:     -45 PP:       6

0.360000 : AA:     -88 AP:     -37 PP:      14

0.400000 : AA:     -80 AP:     -29 PP:      22

0.440000 : AA:     -72 AP:     -21 PP:      29

0.480000 : AA:     -64 AP:     -13 PP:      38

0.520000 : AA:     -56 AP:      -5 PP:      46

0.560000 : AA:     -47 AP:       3 PP:      54

0.600000 : AA:     -40 AP:      11 PP:      62

0.640000 : AA:     -32 AP:      19 PP:      70

0.680000 : AA:     -24 AP:      27 PP:      78

0.720000 : AA:     -16 AP:      35 PP:      86

0.760000 : AA:      -8 AP:      43 PP:      94

0.800000 : AA:       0 AP:      51 PP:     102

0.840000 : AA:       8 AP:      59 PP:     110

0.880000 : AA: 16 AP: 67 PP: 118

0.920000 : AA: 24 AP: 75 PP: 126

0.960000 : AA: 32 AP: 83 PP: 134

1.000000 : AA: 40 AP: 91 PP: 142

结果是，你需要一个超过 80% 的胜率策略，AA 模型的胜率超过 56%，AP 模型的胜率超过 32%。

这很有道理，那么就在税务上加上 $20 符号

返利+税 @ $20

0.000000 : AA: -163 AP: -112 PP: -61

0.040000 : AA: -155 AP: -104 PP: -53

0.080000 : AA: -147 AP: -96 PP: -45

0.120000 : AA: -139 AP: -88 PP: -37

0.160000 : AA: -131 AP: -80 PP: -29

0.200000 : AA: -123 AP: -72 PP: -21

0.240000 : AA: -115 AP: -64 PP: -13

0.280000 : AA: -107 AP: -56 PP: -5

0.320000 : AA: -99 AP: -48 PP: 2

0.360000 : AA: -91 AP: -40 PP: 10

0.400000 : AA: -83 AP: -32 PP: 18

0.440000 : AA: -75 AP: -24 PP: 26

0.480000 : AA: -67 AP: -16 PP: 34

0.520000 : AA: -59 AP: -8 PP: 42

0.560000 : AA: -51 AP: 0 PP: 50

0.600000 : AA: -43 AP: 7 PP: 58

0.640000 : AA: -35 AP: 15 PP: 66

0.680000 : AA: -27 AP: 23 PP: 74

0.720000 : AA: -19 AP: 31 PP: 82

0.760000 : AA: -11 AP: 39 PP: 90

0.800000 : AA: -3 AP: 47 PP: 98

0.840000 : AA: 4 AP: 55 PP: 106

0.880000 : AA: 12 AP: 63 PP: 114

0.920000 : AA: 20 AP: 71 PP: 122

0.960000 : AA: 28 AP: 79 PP: 130

1.000000 : AA: 36 AP: 87 PP: 138

没有太大的区别，但即使 $20 税款也会使整体胜率降低几个百分点，此举很容易使你的策略变为亏损。

让我们提高一档，假设你想以 $139 交易 SPY (2012/04/17)

返利+税 @ $139

0.000000 : AA: -186 AP: -135 PP: -84

0.040000 : AA: -178 AP: -127 PP: -76

0.080000 : AA: -170 AP: -119 PP: -68

0.120000 : AA: -162 AP: -111 PP: -60

0.160000 : AA: -154 AP: -103 PP: -52

0.200000 : AA: -146 AP: -95 PP: -44

0.240000 : AA: -138 AP: -87 PP: -36

0.280000 : AA: -130 AP: -79 PP: -28

0.320000 : AA: -122 AP: -71 PP: -20

0.360000 : AA: -114 AP: -63 PP: -12

0.400000 : AA: -106 AP: -55 PP: -4

0.440000 : AA: -98 AP: -47 PP: 3

0.480000 : AA: -90 AP: -39 PP: 11

0.520000 : AA: -82 AP: -31 PP: 19

0.560000 : AA: -74 AP: -23 PP: 27

0.600000 : AA: -66 AP: -15 PP: 35

0.640000 : AA: -58 AP: -7 PP: 43

0.680000 : AA: -50 AP: 0 PP: 51

0.720000 : AA: -42 AP: 8 PP: 59

0.760000 : AA: -34 AP: 16 PP: 67

0.800000 : AA: -26 AP: 24 PP: 75

0.840000 : AA: -18 AP: 32 PP: 83

0.880000 : AA: -10 AP: 40 PP: 91

0.920000 : AA: -2 AP: 48 PP: 99

0.960000 : AA: 5 AP: 56 PP: 107

1.000000 : AA:     13 AP:     64 PP:     115

看起来有点更“困难”，具体到 AA 结构，你需要达到>= 96%的准确率，PA >= 68%，PP >= 44%。很明显，对于+100/-100 的交易来说，AA 几乎是不可能的，并且如果考虑到额外的-100 点的差价成本……那就是不可能了。

上述佣金为 0，那么在$20 的标的物上增加-5 的佣金

返利+佣金(-5) + 税费 @ $20

0.000000 : AA:    -173 AP:    -122 PP:    -71

0.040000 : AA:    -165 AP:    -114 PP:     -63

0.080000 : AA:    -157 AP:    -106 PP:    -55

0.120000 : AA:    -149 AP:    -98 PP:     -47

0.160000 : AA:    -141 AP:    -90 PP:     -39

0.200000 : AA:    -133 AP:     -82 PP:     -31

0.240000 : AA:     -125 AP:     -74 PP:     -23

0.280000 : AA:     -117 AP:     -66 PP:     -15

0.320000 : AA:    -109 AP:     -58 PP:     -7

0.360000 : AA:     -101 AP:     -50 PP:     0

0.400000 : AA:     -93 AP:     -42 PP:     8

0.440000 : AA:     -85 AP:     -34 PP:      16

0.480000 : AA:     -77 AP:     -26 PP:     24

0.520000 : AA:     -69 AP:     -18 PP:     32

0.560000 : AA:     -61 AP:     -10 PP:     40

0.600000 : AA:     -53 AP:     -2 PP:     48

0.640000 : AA:     -45 AP:     5 PP:     56

0.680000 : AA:     -37 AP:     13 PP:     64

0.720000 : AA:     -29 AP:     21 PP:     72

0.760000 : AA:     -21 AP:     29 PP:     80

0.800000 : AA:     -13 AP:     37 PP:     88

0.840000 : AA:     -5 AP:      45 PP:      96

0.880000 : AA:     2 AP:      53 PP:     104

0.920000 : AA:     10 AP:     61 PP:     112

0.960000 : AA:     18 AP:     69 PP:     120

1.000000 : AA:     26 AP:      77 PP:     128

在每股 -5（请记住两侧都要）的情况下，AA 几乎需要达到 90%的准确率，这是一个很难达到的数字。

返利+佣金 @ -10 / 每股 + 税费 @ $20

0.000000 : AA:    -183 AP:    -132 PP:     -81

0.040000 : AA:    -175 AP:    -124 PP:    -73

0.080000 : AA:     -167 AP:    -116 PP:    -65

0.120000 : AA:    -159 AP:    -108 PP:    -57

0.160000 : AA:     -151 AP:    -100 PP:    -49

0.200000 : AA:    -143 AP:    -92 PP:     -41

0.240000 : AA:     -135 AP:     -84 PP:     -33

0.280000 : AA:     -127 AP:     -76 PP:     -25

0.320000 : AA:    -119 AP:     -68 PP:     -17

0.360000 : AA:    -111 AP:     -60 PP:     -9

0.400000 : AA:     -103 AP:     -52 PP:     -1

0.440000 : AA:     -95 AP:     -44 PP:     6

0.480000 : AA:     -87 AP:     -36 PP:     14

0.520000 : AA:     -79 AP:     -28 PP:     22

0.560000 : AA:     -71 AP:     -20 PP:     30

0.600000 : AA:     -63 AP:     -12 PP:     38

0.640000 : AA:     -55 AP:     -4 PP:     46

0.680000 : AA:     -47 AP:     3 PP:     54

0.720000 : AA:     -39 AP:     11 PP:     62

0.760000 : AA:     -31 AP:     19 PP:     70

0.800000 : AA:     -23 AP:     27 PP:     78

0.840000 : AA:     -15 AP:     35 PP:     86

0.880000 : AA:     -7 AP:     43 PP:     94

0.920000 : AA:     0 AP:      51 PP:     102

0.960000 : AA:     8 AP:     59 PP:     110

1.000000 : AA:     16 AP:     67 PP:    118

佣金每股-10 美元，结果是+100/-100 2 极需要，AA 接近不可能，需要 95%的精准度才能盈利，比如你需要一台时光机来赚钱。

最后真的往负 20 美元/股挤	进去

0.000000 : AA:   -203 AP:   -152 PP: -101

0.040000 : AA:   -195 AP:   -144 PP:   -93

0.080000 : AA:   -187 AP:   -136 PP:   -85

0.120000 : AA:   -179 AP:   -128 PP:   -77

0.160000 : AA:   -171 AP:   -120 PP:    -69

0.200000 : AA:   -163 AP:   -112 PP:   -61

0.240000 : AA:   -155 AP:   -104 PP:   -53

0.280000 : AA:   -147 AP:     -96 PP:   -45

0.320000 : AA:   -139 AP:  -88 PP:   -37

0.360000 : AA:   -131 AP:     -80 PP:   -29

0.400000 : AA:   -123 AP:     -72 PP:   -21

0.440000 : AA:   -115 AP:    -64 PP:    -13

0.480000 : AA:   -107 AP:     -56 PP:     -5

0.520000 : AA:     -99 AP:     -48 PP:      2

0.560000 : AA:     -91 AP:     -40 PP:     10

0.600000 : AA:     -83 AP:     -32 PP:     18

0.640000 : AA:    -75 AP:     -24 PP:      26

0.680000 : AA:   -67 AP:   -16 PP:     34

0.720000 : AA:    -59 AP:      -8 PP:      42

0.760000 : AA:    -51 AP:       0 PP:      50

0.800000 : AA:    -43 AP:       7 PP:      58

0.840000 : AA:   -35 AP:   15 PP:     66

0.880000 : AA:     -27 AP:   23 PP:     74

0.920000 : AA:   -19 AP:   31 PP:   82

0.960000 : AA:     -11 AP:     39 PP:     90

1.000000 : AA:     -3 AP:     47 PP:    98

此时 AA 在理论上几乎是不可能的，PA 需要 76%的交易正确才能实现收支平衡。

很明显，它在很多微妙但又重大的麻烦问题上都更多涉及，但是你可以从中了解到所需的精度水平和委托的程度。

这也没说当执行订单时需要多低的延迟/技术……或者现实世界概率的多低，但这是另一回事	如果只有订单以被动方式按那个价格拆除，世界将会变得和平、快乐、幸福:P

……奋斗还在继续
