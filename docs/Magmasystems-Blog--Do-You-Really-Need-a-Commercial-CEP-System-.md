-   <!--yml

-   分类：未分类

-   date: 2024-05-18 04:57:26

-   -->

# -   Magmasystems Blog: Do You Really Need a Commercial CEP System?

> 来源：[`magmasystems.blogspot.com/2008/11/do-you-really-need-commercial-cep.html#0001-01-01`](http://magmasystems.blogspot.com/2008/11/do-you-really-need-commercial-cep.html#0001-01-01)

-   几乎每天，我们都会问自己，决定使用商业 CEP 系统是否值得。如果你在过去 14 个月里一直关注我的博客，你就会跟踪我在选择是构建还是购买，以及我的供应商选择方面的思考过程。几乎每天，当我在椭圆机上锻炼 30 分钟时，我的思绪就会飘忽不定，我开始反思我的决定，想知道是否正确购买了商业 CEP 系统。

-  我们的系统还不能进行任何复杂的模式匹配。现在，我们正在进行大量的聚合、分组、汇总和简单的比较测试，以生成警报和实时仪表板信息。

-   如长期关注博客的读者所知，我们用手工编写的 C#代码在几天内就建立了一个非常早期的系统原型并运行起来。但是，这只是我们。我们已经有了很多商业 CEP 系统提供的元素。但是，如果我们没有那个框架来利用呢？

-   假设我最近从华尔街公司失业（这是一个非常现实的情况），我和我的几个朋友决定在我的地下室里开一家小型的自营交易公司。我们是一家 3 名交易员和一名开发人员的公司。我们需要为自己构建一个小型算法或高频交易系统。我们需要什么？

-   我们需要实时市场数据，来自路透社或彭博社，或者如果我对非常快的数据感兴趣，我可能会尝试 Activ。我们需要将行情和结果持久化到数据库中，因此我们将需要一个行情数据库（如 KDB 或 Vhayu）和一个标准数据库，如 SQL Server 或 MySQL。我们需要能够与维护我们模型的引擎通信的行情处理程序。我们需要一个 GUI，让交易员可以监控市场和订单。我们需要一个 FIX 引擎，这样我们才能向市场发送订单。

-   我明确告诉我的开发人员尽快完成。我不想他花时间编写解决一般问题的优雅框架。我希望他写尽可能简单的东西。如果我们使用彭博社，我希望他使用 BBAPI 以最快的方式获取市场数据并将其输入交易引擎，并且延迟最低。如果我们必须进行汇总，我希望他取数据，求和，并将其放入以符号为索引的哈希表中。

-   我的所有需求都准备好了，我知道我的技术员需要 6 个月的时间来让我们在这个新系统上开始交易。开发成本大约需要 10 万美元。然而，我们的机会成本很大，因为我们无法进行一些我们本来想要的交易。

购买商业 CEP 系统需要花费多少钱？Coral8 对主要机器的核心收费为 1.5 万美元。对于高可用性（HA）机器有折扣。Aleri 对核心的收费为 2.6 万美元。我们在 2007 年初与 Streambase 会面时，他们告诉我们启动需要 50 万美元（我不知道他们是否降低了价格。）如果我有一台 4CPU 双核机器，那么 Coral8 的费用为 12 万美元，Aleri 的费用为 20.8 万美元。此外，大多数公司都会收取 15-20%的年维护费。

我为这笔费用能得到什么？

我基本上获得了一个实时匹配引擎。我获得了一种高级语言，如果我的交易员愿意学习并且不自己陷入困境的话，这种语言可以让我的交易员“调整”他们的模型。我获得了一些输入和输出适配器，可以让我从引擎中获取信息和将信息输入到引擎中。（我可能需要为路透社或彭博社的适配器支付更多的费用，而且这只有在我的供应商有适配器的情况下才成立。）我获得了一个集成开发环境（IDE），结合高级语言，我可以用来开发模型。

如果我购买了一个商业 CEP 引擎，我会失去什么？如果我发现一个虫洞，我失去了修复引擎内部的权利。我任由供应商的发布周期摆布。如果我发现一个虫洞，供应商告诉我将在 3 个月后的下一个发布版本中修复，我不会高兴。3 个月实际上是 4 个月，因为最初的主要发布版本总是有问题的。我失去了在需要时添加新特性的权利。我生活在恐惧之中，在这种财政环境下，风险投资家可能会决定从供应商的脚下把所有资金都抽出来。

好处之一是，我能利用供应商的客户支持人员，从而让我的程序员去做其他事情。我可能有机会与其他 CEP 系统的用户交流，这样我就能学到最佳实践。

现在我已经有了商业 CEP 系统，接下来怎么办？我得让我的技术员去学习一种新语言（CEP 供应商提供的流式 SQL 变体很容易学习，但正如我们所发现的那样，如果你不正确使用它，你会把自己搞得一团糟）。如果我们没有供应商提供的特定输入适配器（如彭博社）或输出适配器（如 FIX），那么我的开发者就得自己写。我的开发者仍然必须编程模型，但现在我们得担心供应商的语言是否足够强大和灵活，以支持模型的编程。

如果我们发现 CEP 引擎中有堵塞虫洞，或者如果我们发现我们迫切需要的语言特性，那么我们就得任由供应商摆布。

另一方面，供应商有一个高度优化的多线程引擎，这是我们不必去做的一大块开发。CEP 引擎拥有我们需要的一些酷炫功能，比如滑动窗口和嵌套模式匹配。

这是一个重大的决定。如果我在一家人大的公司工作，而且有几个不同的框架可供选择，我还有 5 名全职开发人员，那么我可能会选择从零开始编写代码。如果我是一个小型的初创公司，既负担不起市场数据费用也无法承担 CEP 引擎的费用，那么我可能会寻找像 Esper 这样的免费解决方案。如果我是一个 5-20 人的团队，那么我的决策会更困难。

如果有一个商业 CEP 供应商提供了一个能解决我们需求的垂直应用，那将使决策变得更容易。一个封装好的交易系统。Apama 就是朝着这个方向发展的，而 Mark Palmer 也试图通过 Streambase 沿袭这个方向。Coral8 在聘请 Colin 后也将走这条路，Aleri 也在关注这个方向。
