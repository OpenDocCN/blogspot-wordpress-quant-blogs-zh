<!--yml

类别：未分类

日期：2024-05-18 04:44:45

-->

# 智能交易：模式识别：使用 R 进行前向箱形图轨迹

> 来源：[`intelligenttradingtech.blogspot.com/2011/07/pattern-recognition-forward-boxplot.html#0001-01-01`](http://intelligenttradingtech.blogspot.com/2011/07/pattern-recognition-forward-boxplot.html#0001-01-01)

虽然以下讨论可以适用于定量蜡烛图模式识别系列，但它与任何基本条件类型系统面临的问题是相同的——何时以及如何退出。以下是思考和可视化问题的一种方法，绝非最优。

图 1. 后置箱形图轨迹。

通常，我们试图找到一组先前的输入模式，这些模式会导致有利的后续结果。然而，在大多数可用的示例中，我们通常只给出启发式和基于规则的准则，关于何时退出。这可能是有意义的，因为没有人能够准确预测何时退出。然而，有了对过去样本的了解，我们可以有一些关于基于先前知识的前向轨迹，一个好的退出目标可能在哪里的想法。我在这里称其为“箱形图轨迹”，因为我认为这是可视化许多可能结果轨迹以便进一步分析的有用方式。

在此示例中，我使用编写的 R 语言专有程序分析了一组基于日价格的模式，结果产生了一个输入模式，产生了符合我的条件标准的 52 个样本。图 1 说明了一种根据条件标准中的一个有利模式来查看轨迹结果的方法。底部图表仅仅是每个轨迹数据点的中位数结果的绘图。我们经常试图在没有预知未来的情况下想象退出最佳方式（以及略微不太基于规则的准则）。

图 2. 轨迹树。

一种方法是使用基于每个连续点范围统计中位数的退出规则。考虑到有一半的顶点位于中位数之上和之下，我们应期望至少有一半的目标位于或高于中位数。鉴于第三个点的中位数最高，早点退出比等待更大的收益（中位数更低）是有意义的。因此，如果我们将第三个点的的中值作为目标，那么在总共 52 个样本中的 27/52 我们能够实现平均固定的 1.59%的目标。

在剩余样本中，我们现在可能希望在第 11 个条形图（或更早，如果更早达到相同目标）处退出，目标为 0.556%，在剩余的 13/52 个样本中实现。这只剩下最后一个条形图，我们只需将平均回报作为该目标的加权回报值，在这种情况下，剩余样本为-1.74% : 12/52。注意，我们总是会有那些被推迟到最后的较差竞争者。

期望得到 E(rtn)=27/52*.0159+13/52*.0056-12/52*-.017 =.0057

寻求平均+的小幅收益为 0.57%。复合起来，这相当于：

(1+0.0159)²⁷*(1+0.0056)¹³*(1-0.017)¹²~ 34%的回报，对于 52 笔交易，每笔交易的时间都不超过 3 天。在这种情况下，命中率（作为次要观察）为 77%。

这种方法特别适用于高频策略，因为它的佣金非常低。请注意，这绝不是全面的（是的，我这里只展示了一个样本），而是一种新颖的思考退出策略的方法。
